import{r as N,a as Ro,R as es,c as Et,g as Lo}from"./vendor-wpXbf5jk.js";import{u as _t,w as Io,r as Vo}from"./utils-uoQkVabA.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var ia={exports:{}},er={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fo=N,_o=Symbol.for("react.element"),Oo=Symbol.for("react.fragment"),Bo=Object.prototype.hasOwnProperty,zo=Fo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$o={key:!0,ref:!0,__self:!0,__source:!0};function oa(e,t,r){var s,a={},o=null,i=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(s in t)Bo.call(t,s)&&!$o.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:_o,type:e,key:o,ref:i,props:a,_owner:zo.current}}er.Fragment=Oo;er.jsx=oa;er.jsxs=oa;ia.exports=er;var n=ia.exports,la,Ks=Ro;la=Ks.createRoot,Ks.hydrateRoot;let Uo={data:""},Go=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Uo,Wo=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Ho=/\/\*[^]*?\*\/|  +/g,qs=/\n+/g,De=(e,t)=>{let r="",s="",a="";for(let o in e){let i=e[o];o[0]=="@"?o[1]=="i"?r=o+" "+i+";":s+=o[1]=="f"?De(i,o):o+"{"+De(i,o[1]=="k"?"":t)+"}":typeof i=="object"?s+=De(i,t?t.replace(/([^,])+/g,l=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,d=>/&/.test(d)?d.replace(/&/g,l):l?l+" "+d:d)):o):i!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=De.p?De.p(o,i):o+":"+i+";")}return r+(t&&a?t+"{"+a+"}":a)+s},be={},ca=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+ca(e[r]);return t}return e},Ko=(e,t,r,s,a)=>{let o=ca(e),i=be[o]||(be[o]=(d=>{let c=0,f=11;for(;c<d.length;)f=101*f+d.charCodeAt(c++)>>>0;return"go"+f})(o));if(!be[i]){let d=o!==e?e:(c=>{let f,u,p=[{}];for(;f=Wo.exec(c.replace(Ho,""));)f[4]?p.shift():f[3]?(u=f[3].replace(qs," ").trim(),p.unshift(p[0][u]=p[0][u]||{})):p[0][f[1]]=f[2].replace(qs," ").trim();return p[0]})(e);be[i]=De(a?{["@keyframes "+i]:d}:d,r?"":"."+i)}let l=r&&be.g?be.g:null;return r&&(be.g=be[i]),((d,c,f,u)=>{u?c.data=c.data.replace(u,d):c.data.indexOf(d)===-1&&(c.data=f?d+c.data:c.data+d)})(be[i],t,s,l),i},qo=(e,t,r)=>e.reduce((s,a,o)=>{let i=t[o];if(i&&i.call){let l=i(r),d=l&&l.props&&l.props.className||/^go/.test(l)&&l;i=d?"."+d:l&&typeof l=="object"?l.props?"":De(l,""):l===!1?"":l}return s+a+(i??"")},"");function tr(e){let t=this||{},r=e.call?e(t.p):e;return Ko(r.unshift?r.raw?qo(r,[].slice.call(arguments,1),t.p):r.reduce((s,a)=>Object.assign(s,a&&a.call?a(t.p):a),{}):r,Go(t.target),t.g,t.o,t.k)}let da,Lr,Ir;tr.bind({g:1});let ke=tr.bind({k:1});function Yo(e,t,r,s){De.p=t,da=e,Lr=r,Ir=s}function Le(e,t){let r=this||{};return function(){let s=arguments;function a(o,i){let l=Object.assign({},o),d=l.className||a.className;r.p=Object.assign({theme:Lr&&Lr()},l),r.o=/ *go\d+/.test(d),l.className=tr.apply(r,s)+(d?" "+d:"");let c=e;return e[0]&&(c=l.as||e,delete l.as),Ir&&c[0]&&Ir(l),da(c,l)}return a}}var Xo=e=>typeof e=="function",$t=(e,t)=>Xo(e)?e(t):e,Zo=(()=>{let e=0;return()=>(++e).toString()})(),ua=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Jo=20,fa=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,Jo)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:r}=t;return fa(e,{type:e.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(o=>o.id===s||s===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let a=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+a}))}}},Ot=[],Ue={toasts:[],pausedAt:void 0},He=e=>{Ue=fa(Ue,e),Ot.forEach(t=>{t(Ue)})},Qo={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},el=(e={})=>{let[t,r]=N.useState(Ue),s=N.useRef(Ue);N.useEffect(()=>(s.current!==Ue&&r(Ue),Ot.push(r),()=>{let o=Ot.indexOf(r);o>-1&&Ot.splice(o,1)}),[]);let a=t.toasts.map(o=>{var i,l,d;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((i=e[o.type])==null?void 0:i.removeDelay)||(e==null?void 0:e.removeDelay),duration:o.duration||((l=e[o.type])==null?void 0:l.duration)||(e==null?void 0:e.duration)||Qo[o.type],style:{...e.style,...(d=e[o.type])==null?void 0:d.style,...o.style}}});return{...t,toasts:a}},tl=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||Zo()}),wt=e=>(t,r)=>{let s=tl(t,e,r);return He({type:2,toast:s}),s.id},q=(e,t)=>wt("blank")(e,t);q.error=wt("error");q.success=wt("success");q.loading=wt("loading");q.custom=wt("custom");q.dismiss=e=>{He({type:3,toastId:e})};q.remove=e=>He({type:4,toastId:e});q.promise=(e,t,r)=>{let s=q.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof e=="function"&&(e=e()),e.then(a=>{let o=t.success?$t(t.success,a):void 0;return o?q.success(o,{id:s,...r,...r==null?void 0:r.success}):q.dismiss(s),a}).catch(a=>{let o=t.error?$t(t.error,a):void 0;o?q.error(o,{id:s,...r,...r==null?void 0:r.error}):q.dismiss(s)}),e};var rl=(e,t)=>{He({type:1,toast:{id:e,height:t}})},sl=()=>{He({type:5,time:Date.now()})},ut=new Map,nl=1e3,al=(e,t=nl)=>{if(ut.has(e))return;let r=setTimeout(()=>{ut.delete(e),He({type:4,toastId:e})},t);ut.set(e,r)},il=e=>{let{toasts:t,pausedAt:r}=el(e);N.useEffect(()=>{if(r)return;let o=Date.now(),i=t.map(l=>{if(l.duration===1/0)return;let d=(l.duration||0)+l.pauseDuration-(o-l.createdAt);if(d<0){l.visible&&q.dismiss(l.id);return}return setTimeout(()=>q.dismiss(l.id),d)});return()=>{i.forEach(l=>l&&clearTimeout(l))}},[t,r]);let s=N.useCallback(()=>{r&&He({type:6,time:Date.now()})},[r]),a=N.useCallback((o,i)=>{let{reverseOrder:l=!1,gutter:d=8,defaultPosition:c}=i||{},f=t.filter(x=>(x.position||c)===(o.position||c)&&x.height),u=f.findIndex(x=>x.id===o.id),p=f.filter((x,v)=>v<u&&x.visible).length;return f.filter(x=>x.visible).slice(...l?[p+1]:[0,p]).reduce((x,v)=>x+(v.height||0)+d,0)},[t]);return N.useEffect(()=>{t.forEach(o=>{if(o.dismissed)al(o.id,o.removeDelay);else{let i=ut.get(o.id);i&&(clearTimeout(i),ut.delete(o.id))}})},[t]),{toasts:t,handlers:{updateHeight:rl,startPause:sl,endPause:s,calculateOffset:a}}},ol=ke`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,ll=ke`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,cl=ke`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,dl=Le("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ol} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${ll} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${cl} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,ul=ke`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,fl=Le("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${ul} 1s linear infinite;
`,ml=ke`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,hl=ke`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,pl=Le("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ml} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${hl} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,gl=Le("div")`
  position: absolute;
`,xl=Le("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,yl=ke`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,vl=Le("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${yl} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,bl=({toast:e})=>{let{icon:t,type:r,iconTheme:s}=e;return t!==void 0?typeof t=="string"?N.createElement(vl,null,t):t:r==="blank"?null:N.createElement(xl,null,N.createElement(fl,{...s}),r!=="loading"&&N.createElement(gl,null,r==="error"?N.createElement(dl,{...s}):N.createElement(pl,{...s})))},wl=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,jl=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,Nl="0%{opacity:0;} 100%{opacity:1;}",kl="0%{opacity:1;} 100%{opacity:0;}",Sl=Le("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Cl=Le("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Pl=(e,t)=>{let r=e.includes("top")?1:-1,[s,a]=ua()?[Nl,kl]:[wl(r),jl(r)];return{animation:t?`${ke(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ke(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Tl=N.memo(({toast:e,position:t,style:r,children:s})=>{let a=e.height?Pl(e.position||t||"top-center",e.visible):{opacity:0},o=N.createElement(bl,{toast:e}),i=N.createElement(Cl,{...e.ariaProps},$t(e.message,e));return N.createElement(Sl,{className:e.className,style:{...a,...r,...e.style}},typeof s=="function"?s({icon:o,message:i}):N.createElement(N.Fragment,null,o,i))});Yo(N.createElement);var Al=({id:e,className:t,style:r,onHeightUpdate:s,children:a})=>{let o=N.useCallback(i=>{if(i){let l=()=>{let d=i.getBoundingClientRect().height;s(e,d)};l(),new MutationObserver(l).observe(i,{subtree:!0,childList:!0,characterData:!0})}},[e,s]);return N.createElement("div",{ref:o,className:t,style:r},a)},Dl=(e,t)=>{let r=e.includes("top"),s=r?{top:0}:{bottom:0},a=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:ua()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...s,...a}},El=tr`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Mt=16,Ml=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:s,children:a,containerStyle:o,containerClassName:i})=>{let{toasts:l,handlers:d}=il(r);return N.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Mt,left:Mt,right:Mt,bottom:Mt,pointerEvents:"none",...o},className:i,onMouseEnter:d.startPause,onMouseLeave:d.endPause},l.map(c=>{let f=c.position||t,u=d.calculateOffset(c,{reverseOrder:e,gutter:s,defaultPosition:t}),p=Dl(f,u);return N.createElement(Al,{id:c.id,key:c.id,onHeightUpdate:d.updateHeight,className:c.visible?El:"",style:p},c.type==="custom"?$t(c.message,c):a?a(c):N.createElement(Tl,{toast:c,position:f}))}))};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rl={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ll=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),G=(e,t)=>{const r=N.forwardRef(({color:s="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:l="",children:d,...c},f)=>N.createElement("svg",{ref:f,...Rl,width:a,height:a,stroke:s,strokeWidth:i?Number(o)*24/Number(a):o,className:["lucide",`lucide-${Ll(e)}`,l].join(" "),...c},[...t.map(([u,p])=>N.createElement(u,p)),...Array.isArray(d)?d:[d]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=G("Accessibility",[["circle",{cx:"16",cy:"4",r:"1",key:"1grugj"}],["path",{d:"m18 19 1-7-6 1",key:"r0i19z"}],["path",{d:"m5 8 3-3 5.5 3-2.36 3.5",key:"9ptxx2"}],["path",{d:"M4.24 14.5a5 5 0 0 0 6.88 6",key:"10kmtu"}],["path",{d:"M13.76 17.5a5 5 0 0 0-6.88-6",key:"2qq6rc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Il=G("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=G("Apple",[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fl=G("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=G("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=G("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=G("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=G("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=G("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=G("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=G("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=G("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=G("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=G("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=G("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=G("CookingPot",[["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"M20 12v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-8",key:"u0tga0"}],["path",{d:"m4 8 16-4",key:"16g0ng"}],["path",{d:"m8.86 6.78-.45-1.81a2 2 0 0 1 1.45-2.43l1.94-.48a2 2 0 0 1 2.43 1.46l.45 1.8",key:"12cejc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=G("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl=G("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=G("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kl=G("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=G("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=G("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=G("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=G("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=G("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=G("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=G("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=G("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=G("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=G("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=G("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=G("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=G("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=G("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=G("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nc=G("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=G("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=G("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=G("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=G("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=G("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=G("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=G("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=G("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=G("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=G("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=G("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),uc=({user:e,onLogout:t})=>n.jsx("header",{className:"bg-white/95 dark:bg-gray-900/95 backdrop-blur-sm border-b border-sage-200 dark:border-gray-700 sticky top-0 z-50 shadow-sm",children:n.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-3 sm:py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[n.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-r from-primary-500 to-accent-500 rounded-xl flex items-center justify-center shadow-lg",children:n.jsx(Il,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("h1",{className:"text-lg sm:text-xl font-bold text-sage-900 dark:text-white truncate",children:"Bilanciamo"}),n.jsx("p",{className:"text-xs text-sage-600 dark:text-gray-400 hidden sm:block",children:"D.ssa Giulia Biondi"})]})]}),e&&n.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-primary-100 to-accent-100 dark:from-primary-800 dark:to-accent-800 rounded-full flex items-center justify-center border border-primary-200 dark:border-primary-700",children:n.jsx(lc,{className:"w-5 h-5 text-primary-600 dark:text-primary-300"})}),n.jsxs("div",{className:"hidden md:block min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-sage-900 dark:text-white truncate max-w-32",children:e.name}),n.jsx("p",{className:"text-xs text-sage-600 dark:text-gray-400 truncate max-w-32",children:e.email})]})]}),n.jsx("button",{onClick:t,className:"p-3 sm:p-2 text-sage-600 dark:text-gray-300 hover:text-white hover:bg-gradient-to-r hover:from-primary-500 hover:to-accent-500 rounded-xl transition-all duration-200 shadow-sm hover:shadow-md touch-manipulation min-h-[44px] min-w-[44px] sm:min-h-[40px] sm:min-w-[40px] flex items-center justify-center",title:"Logout",children:n.jsx(Zl,{className:"w-5 h-5 sm:w-4 sm:h-4"})})]})]})})}),fc=({onLogin:e})=>{const[t,r]=N.useState({name:"",email:""}),s=a=>{a.preventDefault(),t.name.trim()&&t.email.trim()&&e(t)};return n.jsx("div",{className:"max-w-md mx-auto mt-8 sm:mt-16 animate-fade-in px-4 sm:px-0",children:n.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-6 sm:p-8",children:[n.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[n.jsx("div",{className:"w-14 h-14 sm:w-16 sm:h-16 bg-gradient-to-r from-primary-500 to-accent-500 rounded-xl mx-auto mb-4 flex items-center justify-center shadow-lg",children:n.jsx(Xl,{className:"w-6 h-6 sm:w-8 sm:h-8 text-white"})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-sage-900 mb-2",children:"Accesso Bilanciamo"}),n.jsx("p",{className:"text-sage-600 text-sm sm:text-base",children:"Inserisci i tuoi dati per continuare"})]}),n.jsxs("form",{onSubmit:s,className:"space-y-4 sm:space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-sage-700 mb-2",children:"Nome completo"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:t.name,onChange:a=>r({...t,name:a.target.value}),className:"w-full pl-10 pr-4 py-3 bg-white/60 border border-sage-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200 shadow-sm focus:shadow-md text-sm sm:text-base",placeholder:"Il tuo nome",required:!0}),n.jsx(Ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 sm:w-5 sm:h-5 text-sage-400"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-sage-700 mb-2",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"email",value:t.email,onChange:a=>r({...t,email:a.target.value}),className:"w-full pl-10 pr-4 py-3 bg-white/60 border border-sage-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200 shadow-sm focus:shadow-md text-sm sm:text-base",placeholder:"la-tua-email@esempio.com",required:!0}),n.jsx(Ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 sm:w-5 sm:h-5 text-sage-400"})]})]}),n.jsxs("button",{type:"submit",className:"w-full bg-gradient-to-r from-primary-500 to-accent-500 text-white py-3 px-6 rounded-xl font-medium hover:from-primary-600 hover:to-accent-600 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-all duration-200 flex items-center justify-center space-x-2 group shadow-lg hover:shadow-xl transform hover:scale-105",children:[n.jsx("span",{className:"text-sm sm:text-base",children:"Accedi"}),n.jsx(Fl,{className:"w-4 h-4 sm:w-5 sm:h-5 group-hover:translate-x-1 transition-transform duration-200"})]})]}),n.jsx("div",{className:"mt-4 sm:mt-6 text-center",children:n.jsx("p",{className:"text-xs text-sage-500",children:"Demo - I dati vengono salvati localmente nel browser"})})]})})},mc=["Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato","Domenica"],Zs=()=>{console.log("Calculations.tsx: component rendered");const[e,t]=N.useState({age:0,height:0,weight:0,gender:"female",laf:1.4,y:.8,dailyDeficit:275}),[r,s]=N.useState(null),[a,o]=N.useState(!1),[i,l]=N.useState({});N.useEffect(()=>{console.log("Calculations.tsx: useEffect - loading data from localStorage");const g=localStorage.getItem("bilanciamo_calculations");if(g){console.log("Calculations.tsx: useEffect - found saved calculations",g);const P=JSON.parse(g);t(P.data),s(P.results),console.log("Calculations.tsx: useEffect - setData and setResults called with",P.data,P.results),o(!0)}const k=localStorage.getItem("bilanciamo_daily_limits");if(k){console.log("Calculations.tsx: useEffect - found saved daily limits",k);try{const P=JSON.parse(k);l(P),console.log("Calculations.tsx: useEffect - setDailyCalorieLimits called with",P)}catch(P){console.error("Errore nel caricamento dei limiti giornalieri:",P),l({})}}},[]);const d=()=>{const g=e.height/100,k=e.weight/(g*g),P=21.5*(g*g),A=e.gender==="female"?655+9.5*P+1.8*e.height-4.6*e.age:66.5+13.75*P+5*e.height-6.75*e.age,S=A*e.laf,D=S*7,C=e.dailyDeficit||0,V=C*7,_=D-V,F=P*e.y,z=F*7;return{bmi:k,idealWeight:P,basalMetabolism:A,dailyMetabolism:S,weeklyMetabolism:D,dailyDeficit:C,weeklyDeficit:V,weeklyCalories:_,dailyProteinRda:F,weeklyProteinRda:z}},c=()=>{console.log("Calculations.tsx: handleCalculate called");const g=d();s(g),o(!0),localStorage.setItem("bilanciamo_calculations",JSON.stringify({data:e,results:g}))},f=()=>{console.log("Calculations.tsx: handleReset called"),t({age:0,height:0,weight:0,gender:"female",laf:1.4,y:.8,dailyDeficit:275}),s(null),o(!1),localStorage.removeItem("bilanciamo_calculations")},u=(g,k)=>{const P={...i};P[g]=parseInt(k)||0,l(P),localStorage.setItem("bilanciamo_daily_limits",JSON.stringify(P))},p=()=>Object.values(i).reduce((g,k)=>g+(k||0),0),x=e.age>0&&e.height>0&&e.weight>0,v=g=>g<18.5?"Sottopeso":g<25?"Normopeso":g<30?"Sovrappeso":g<35?"Obesità di classe I":g<40?"Obesità di classe II":"Obesità di classe III";return console.log("Calculations.tsx: rendering, data:",e,"results:",r,"isCalculated:",a),n.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[n.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl p-4 sm:p-6 lg:p-8 border border-white/20 shadow-lg",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-4 sm:mb-6",children:[n.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-r from-primary-500 to-accent-500 rounded-lg flex items-center justify-center",children:n.jsx(_r,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),n.jsx("h2",{className:"text-lg sm:text-xl font-bold text-sage-900",children:"Dati Personali"})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"age",className:"block text-sm font-medium text-sage-700 mb-2",children:"Età"}),n.jsx("input",{type:"number",id:"age",value:e.age||"",onChange:g=>t({...e,age:parseInt(g.target.value)||0}),className:"w-full px-4 py-3 border border-sage-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200 bg-white/60 shadow-sm focus:shadow-md text-sm sm:text-base",placeholder:"Anni"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"height",className:"block text-sm font-medium text-sage-700 mb-2",children:"Altezza"}),n.jsx("input",{type:"number",id:"height",value:e.height||"",onChange:g=>t({...e,height:parseInt(g.target.value)||0}),className:"w-full px-4 py-3 border border-sage-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200 bg-white/60 shadow-sm focus:shadow-md text-sm sm:text-base",placeholder:"cm"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"weight",className:"block text-sm font-medium text-sage-700 mb-2",children:"Peso"}),n.jsx("input",{type:"number",id:"weight",value:e.weight||"",onChange:g=>t({...e,weight:parseInt(g.target.value)||0}),className:"w-full px-4 py-3 border border-sage-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200 bg-white/60 shadow-sm focus:shadow-md text-sm sm:text-base",placeholder:"kg"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"gender",className:"block text-sm font-medium text-sage-700 mb-2",children:"Genere"}),n.jsxs("select",{id:"gender",value:e.gender,onChange:g=>t({...e,gender:g.target.value}),className:"w-full px-4 py-3 border border-sage-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200 bg-white/60 shadow-sm focus:shadow-md text-sm sm:text-base",children:[n.jsx("option",{value:"female",children:"Donna"}),n.jsx("option",{value:"male",children:"Uomo"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"laf",className:"block text-sm font-medium text-sage-700 mb-2",children:"LAF"}),n.jsx("input",{type:"number",id:"laf",value:e.laf||"",onChange:g=>{const k=parseFloat(g.target.value),P=Math.min(Math.max(k,1.45),2.1),A=Math.round(P*20)/20;t({...e,laf:A})},step:"0.05",min:"1.45",max:"2.1",className:"w-full px-4 py-3 border border-sage-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200 bg-white/60 shadow-sm focus:shadow-md text-sm sm:text-base",placeholder:"LAF"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"y",className:"block text-sm font-medium text-sage-700 mb-2",children:"Grammi proteici per kg"}),n.jsx("input",{type:"number",id:"y",value:e.y||"",onChange:g=>{const k=parseFloat(g.target.value),P=Math.min(Math.max(k,.8),3);t({...e,y:P})},step:"0.1",min:"0.8",max:"3",className:"w-full px-4 py-3 border border-sage-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200 bg-white/60 shadow-sm focus:shadow-md text-sm sm:text-base",placeholder:"Grammi proteici per kg"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"dailyDeficit",className:"block text-sm font-medium text-sage-700 mb-2",children:"Deficit Giornaliero"}),n.jsx("input",{type:"number",id:"dailyDeficit",value:e.dailyDeficit||"",onChange:g=>t({...e,dailyDeficit:parseInt(g.target.value)||0}),className:"w-full px-4 py-3 border border-sage-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200 bg-white/60 shadow-sm focus:shadow-md text-sm sm:text-base",placeholder:"kcal"})]})]}),n.jsxs("div",{className:"mt-4 sm:mt-6 flex flex-col sm:flex-row gap-3 sm:gap-4",children:[n.jsxs("button",{onClick:c,disabled:!x,className:`px-6 py-3 rounded-xl flex items-center justify-center space-x-2 font-medium transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 text-sm sm:text-base ${x?"bg-gradient-to-r from-primary-500 to-accent-500 text-white hover:from-primary-600 hover:to-accent-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[n.jsx(_r,{className:"w-4 h-4 sm:w-5 sm:h-5"}),n.jsx("span",{children:"Calcola"})]}),n.jsxs("button",{onClick:f,className:"px-6 py-3 bg-white text-sage-700 rounded-xl border border-sage-200 hover:bg-sage-50 hover:shadow-md flex items-center justify-center space-x-2 font-medium transition-all duration-200 text-sm sm:text-base",children:[n.jsx(tc,{className:"w-4 h-4 sm:w-5 sm:h-5"}),n.jsx("span",{children:"Reset"})]})]})]}),a&&r&&n.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl p-4 sm:p-6 lg:p-8 border border-white/20 shadow-lg",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-4 sm:mb-6",children:[n.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-r from-accent-500 to-primary-500 rounded-lg flex items-center justify-center",children:n.jsx(Gt,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),n.jsx("h3",{className:"text-lg sm:text-xl font-bold text-sage-900",children:"Risultati"})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-primary-50 to-accent-50 p-4 rounded-xl border border-primary-100",children:[n.jsx("p",{className:"text-sm text-sage-600 mb-1",children:"BMI (Indice di Massa Corporea)"}),n.jsx("p",{className:"text-xl sm:text-2xl font-bold text-sage-900",children:r.bmi.toFixed(1)}),n.jsx("p",{className:"text-xs text-sage-500 mt-1",children:v(r.bmi)})]}),n.jsxs("div",{className:"bg-gradient-to-br from-accent-50 to-primary-50 p-4 rounded-xl border border-accent-100",children:[n.jsx("p",{className:"text-sm text-sage-600 mb-1",children:"Peso Ideale"}),n.jsxs("p",{className:"text-xl sm:text-2xl font-bold text-sage-900",children:[r.idealWeight.toFixed(1)," kg"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-primary-50 to-accent-50 p-4 rounded-xl border border-primary-100",children:[n.jsx("p",{className:"text-sm text-sage-600 mb-1",children:"Metabolismo Basale"}),n.jsxs("p",{className:"text-xl sm:text-2xl font-bold text-sage-900",children:[Math.round(r.basalMetabolism)," kcal"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-accent-50 to-primary-50 p-4 rounded-xl border border-accent-100",children:[n.jsx("p",{className:"text-sm text-sage-600 mb-1",children:"Metabolismo Giornaliero"}),n.jsxs("p",{className:"text-xl sm:text-2xl font-bold text-sage-900",children:[Math.round(r.dailyMetabolism)," kcal"]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-primary-50 to-accent-50 p-4 rounded-xl border border-primary-100",children:[n.jsx("p",{className:"text-sm text-sage-600 mb-1",children:"Deficit Giornaliero"}),n.jsxs("p",{className:"text-xl sm:text-2xl font-bold text-sage-900",children:[Math.round(r.dailyDeficit)," kcal"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-sage-600",children:"Deficit Settimanale"}),n.jsxs("p",{className:"text-lg font-bold text-sage-900",children:[Math.round(r.weeklyDeficit)," kcal"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-sage-600",children:"Calorie Settimanali"}),n.jsxs("p",{className:"text-lg font-bold text-sage-900",children:[Math.round(r.weeklyCalories)," kcal"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-sage-600",children:"RDA Proteine Giornaliero"}),n.jsxs("p",{className:"text-lg font-bold text-sage-900",children:[r.dailyProteinRda.toFixed(1)," g"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-sage-600",children:"RDA Proteine Settimanale"}),n.jsxs("p",{className:"text-lg font-bold text-sage-900",children:[r.weeklyProteinRda.toFixed(1)," g"]})]})]}),n.jsxs("div",{className:"mt-6 bg-white/90 rounded-xl p-6 border border-sage-200 shadow-sm",children:[n.jsxs("h3",{className:"text-lg font-semibold text-sage-800 mb-4 flex items-center",children:[n.jsx(Gt,{className:"w-5 h-5 text-primary-600 mr-2"}),"Limiti Calorie Giornalieri"]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border-collapse rounded-lg overflow-hidden",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gradient-to-r from-primary-100 to-accent-100",children:[n.jsx("th",{className:"px-4 py-3 text-left text-sage-700 font-semibold",children:"Giorno"}),n.jsx("th",{className:"px-4 py-3 text-left text-sage-700 font-semibold",children:"Kcal Limite"})]})}),n.jsxs("tbody",{children:[mc.map((g,k)=>n.jsxs("tr",{className:`hover:bg-sage-50 ${k%2===0?"bg-white":"bg-sage-50/50"}`,children:[n.jsx("td",{className:"px-4 py-3 border-t border-sage-200",children:g}),n.jsx("td",{className:"px-4 py-3 border-t border-sage-200",children:n.jsx("input",{type:"number",value:i[g]||"",onChange:P=>u(g,P.target.value),className:"w-full px-3 py-2 border border-sage-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm",placeholder:"Kcal"})})]},g)),n.jsxs("tr",{className:"bg-primary-100 font-medium",children:[n.jsx("td",{className:"px-4 py-3 border-t border-sage-200",children:"Totale Settimanale"}),n.jsxs("td",{className:"px-4 py-3 border-t border-sage-200 font-bold",children:[p()," kcal"]})]}),n.jsxs("tr",{className:"bg-accent-100",children:[n.jsx("td",{className:"px-4 py-3 border-t border-sage-200",children:"Calorie Settimanali Calcolate"}),n.jsxs("td",{className:"px-4 py-3 border-t border-sage-200 font-bold",children:[Math.round(r.weeklyCalories)," kcal"]})]}),n.jsxs("tr",{className:"bg-gradient-to-r from-primary-50 to-accent-50 font-medium",children:[n.jsx("td",{className:"px-4 py-3 border-t border-sage-200",children:"Differenza"}),n.jsxs("td",{className:"px-4 py-3 border-t border-sage-200 font-bold",children:[p()-Math.round(r.weeklyCalories)," kcal"]})]})]})]})})]})]})]})},hc=({days:e,selectedDay:t,onDaySelect:r})=>n.jsx("div",{className:"grid grid-cols-7 gap-2 sm:flex sm:flex-wrap",children:e.map((s,a)=>n.jsxs("button",{onClick:()=>r(a),className:`px-3 py-3 sm:px-4 sm:py-2 rounded-xl font-medium transition-all duration-200 touch-manipulation min-h-[48px] sm:min-h-[40px] flex items-center justify-center text-sm sm:text-base ${t===a?"bg-gradient-to-r from-primary-500 to-accent-500 text-white shadow-lg transform scale-105":"bg-sage-100 dark:bg-gray-700 text-sage-700 dark:text-gray-300 hover:bg-sage-200 dark:hover:bg-gray-600 hover:shadow-md"}`,children:[n.jsx("span",{className:"sm:hidden",children:s.substring(0,3)}),n.jsx("span",{className:"hidden sm:inline",children:s.substring(0,3)})]},a))});let Br=[];try{const e=localStorage.getItem("bilanciamo_food_database");if(e){const t=JSON.parse(e);Array.isArray(t)&&t.length>0&&(Br=t)}}catch(e){console.error("Errore nel caricamento del database alimentare:",e)}const ya=({value:e,onChange:t,grams:r})=>{const[s,a]=N.useState(e),[o,i]=N.useState([]),[l,d]=N.useState(!1),[c,f]=N.useState(null),u=N.useRef(null);N.useEffect(()=>{if(e&&!c){const g=Br.find(k=>k.name===e);g&&f(g)}},[e,c]),N.useEffect(()=>{if(c&&r>0){const g={calories:c.calories/100*r,proteins:c.proteins/100*r,carbs:c.carbs/100*r,fats:c.fats/100*r,category:c.category};t(c.name,g)}},[r,c,t]),N.useEffect(()=>{const g=k=>{u.current&&!u.current.contains(k.target)&&d(!1)};return document.addEventListener("mousedown",g),()=>{document.removeEventListener("mousedown",g)}},[]);const p=g=>{if(!g.trim()){i([]);return}const k=Br.filter(P=>P.name.toLowerCase().includes(g.toLowerCase())).slice(0,10);i(k)},x=g=>{const k=g.target.value;a(k),d(!0),p(k),k||(f(null),t("",{calories:0,proteins:0,carbs:0,fats:0,category:""}))},v=g=>{a(g.name),f(g),d(!1);const k={calories:g.calories/100*(r||0),proteins:g.proteins/100*(r||0),carbs:g.carbs/100*(r||0),fats:g.fats/100*(r||0),category:g.category};t(g.name,k)};return n.jsxs("div",{className:"relative",ref:u,children:[n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:s,onChange:x,onFocus:()=>{s&&(d(!0),p(s))},className:"w-full px-3 py-2 pl-10 bg-white border border-sage-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm",placeholder:"Cerca alimento..."}),n.jsx(rc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-sage-400"})]}),l&&o.length>0&&n.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-sage-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:o.map(g=>n.jsxs("div",{className:"px-4 py-2 cursor-pointer hover:bg-sage-50 text-sm",onClick:()=>v(g),children:[n.jsx("div",{className:"font-medium",children:g.name}),n.jsxs("div",{className:"text-xs text-sage-600",children:[g.calories," kcal | ",g.proteins,"g proteine | ",g.carbs,"g carb | ",g.fats,"g grassi"]})]},g.name))})]})},ot=({title:e,mealData:t,onUpdate:r})=>{const[s,a]=N.useState(!0),o=()=>{const f={id:Date.now().toString(),food:"",grams:0,calories:0,proteins:0,carbs:0,fats:0,category:""};r([...t,f])},i=(f,u)=>{const p=t.map(x=>x.id===f?{...x,...u}:x);r(p)},l=f=>{r(t.filter(u=>u.id!==f))},c=t.reduce((f,u)=>({calories:f.calories+(u.calories||0),proteins:f.proteins+(u.proteins||0),carbs:f.carbs+(u.carbs||0),fats:f.fats+(u.fats||0)}),{calories:0,proteins:0,carbs:0,fats:0});return n.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl border border-gray-200/50 shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden",children:[n.jsx("div",{className:"p-4 cursor-pointer hover:bg-gray-50/80 transition-colors duration-150",onClick:()=>a(!s),children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-sage-900",children:e}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"text-right",children:n.jsxs("p",{className:"text-sm text-sage-600",children:[Math.round(c.calories)," kcal • ",c.proteins.toFixed(1),"g proteine"]})}),s?n.jsx(ha,{className:"w-5 h-5 text-sage-600"}):n.jsx(Bl,{className:"w-5 h-5 text-sage-600"})]})]})}),s&&n.jsxs("div",{className:"px-4 pb-4",children:[n.jsxs("div",{className:"space-y-3",children:[t.map(f=>n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-3 items-end p-3 bg-white/60 rounded-lg border border-gray-100/50 hover:bg-white/80 transition-colors duration-150",children:[n.jsxs("div",{className:"md:col-span-4",children:[n.jsx("label",{className:"block text-xs font-medium text-sage-700 mb-1",children:"Alimento"}),n.jsx(ya,{value:f.food,onChange:(u,p)=>{i(f.id,{food:u,...p})},grams:f.grams})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-xs font-medium text-sage-700 mb-1",children:"Grammi"}),n.jsx("input",{type:"number",value:f.grams||"",onChange:u=>{const p=parseFloat(u.target.value)||0;i(f.id,{grams:p})},className:"w-full px-3 py-2 bg-white border border-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm transition-all duration-150",placeholder:"0",min:"0"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-xs font-medium text-sage-700 mb-1",children:"Kcal"}),n.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-sm text-gray-700",children:Math.round(f.calories||0)})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-xs font-medium text-sage-700 mb-1",children:"Proteine (g)"}),n.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-sm text-gray-700",children:(f.proteins||0).toFixed(1)})]}),n.jsx("div",{className:"md:col-span-1",children:n.jsx("button",{onClick:()=>l(f.id),className:"p-2 text-red-500 hover:text-red-600 hover:bg-red-50 rounded-md transition-all duration-150 hover:scale-105",children:n.jsx(rs,{className:"w-4 h-4"})})})]},f.id)),n.jsxs("button",{onClick:o,className:"w-full p-3 border-2 border-dashed border-gray-300 rounded-md text-gray-600 hover:text-gray-800 hover:border-gray-400 hover:bg-gray-50/80 transition-all duration-150 flex items-center justify-center space-x-2 hover:scale-[1.02]",children:[n.jsx(Ut,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-medium",children:"Aggiungi alimento"})]})]}),n.jsx("div",{className:"mt-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-100/50",children:n.jsx("div",{className:"flex flex-wrap items-center justify-between gap-4",children:n.jsxs("div",{className:"flex space-x-6",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Totale Calorie"}),n.jsx("p",{className:"text-lg font-bold text-gray-800",children:Math.round(c.calories)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-600",children:"Totale Proteine"}),n.jsxs("p",{className:"text-lg font-bold text-gray-800",children:[c.proteins.toFixed(1),"g"]})]})]})})}),c.calories>0&&n.jsx("div",{className:"mt-3 p-3 bg-white rounded-lg border border-gray-200 shadow-sm",children:n.jsxs("div",{className:"flex rounded-md overflow-hidden",children:[n.jsxs("div",{className:"flex-1 bg-yellow-100/80 p-3",children:[n.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Carboidrati"}),n.jsxs("p",{className:"text-sm font-bold text-gray-800",children:[(c.carbs*4/(c.calories||1)*100).toFixed(1),"% (45-60%)"]}),n.jsxs("p",{className:"text-xs text-gray-800",children:[c.carbs.toFixed(1),"g"]})]}),n.jsxs("div",{className:"flex-1 bg-red-100/80 p-3",children:[n.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Proteine"}),n.jsxs("p",{className:"text-sm font-bold text-gray-800",children:[(c.proteins*4/(c.calories||1)*100).toFixed(1),"% (10-20%)"]}),n.jsxs("p",{className:"text-xs text-gray-800",children:[c.proteins.toFixed(1),"g"]})]}),n.jsxs("div",{className:"flex-1 bg-green-100/80 p-3",children:[n.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Lipidi"}),n.jsxs("p",{className:"text-sm font-bold text-gray-800",children:[(c.fats*9/(c.calories||1)*100).toFixed(1),"% (20-35%)"]}),n.jsxs("p",{className:"text-xs text-gray-800",children:[c.fats.toFixed(1),"g"]})]})]})})]})]})},pc=({dayData:e,selectedDay:t})=>{const[r,s]=N.useState(null),[a,o]=N.useState(null),i=["Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato","Domenica"];N.useEffect(()=>{try{const p=localStorage.getItem("bilanciamo_daily_limits");if(p){const v=JSON.parse(p),g=i[t];s(v[g]||null)}const x=localStorage.getItem("bilanciamo_calculations");if(x){const v=JSON.parse(x);v.results&&v.results.dailyProteinRda&&o(v.results.dailyProteinRda)}}catch(p){console.error("Errore nel caricamento dei dati:",p),s(null),o(null)}},[t]);const l=()=>{let p=0,x=0,v=0,g=0;return!e||typeof e!="object"?{totalCalories:p,totalProteins:x,totalCarbs:v,totalFats:g}:(Object.values(e).forEach(k=>{Array.isArray(k)&&k.forEach(P=>{P&&typeof P=="object"&&(p+=P.calories||0,x+=P.proteins||0,v+=P.carbs||0,g+=P.fats||0)})}),{totalCalories:p,totalProteins:x,totalCarbs:v,totalFats:g})},{totalCalories:d,totalProteins:c,totalCarbs:f,totalFats:u}=l();return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-primary-50 to-primary-100 p-6 rounded-xl border border-primary-200",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx(ss,{className:"w-6 h-6 text-primary-600"}),n.jsx("h3",{className:"text-lg font-semibold text-primary-900",children:"Calorie Totali"})]}),n.jsxs("div",{className:"flex items-end space-x-2",children:[n.jsx("p",{className:"text-3xl font-bold text-primary-900",children:Math.round(d)}),r&&n.jsxs("p",{className:"text-lg text-primary-700 mb-1",children:["/ ",r," kcal limite"]})]}),n.jsx("p",{className:"text-sm text-primary-700 mt-1",children:"kcal giornaliere"})]}),n.jsxs("div",{className:"bg-gradient-to-br from-accent-50 to-accent-100 p-6 rounded-xl border border-accent-200",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx(Gt,{className:"w-6 h-6 text-accent-600"}),n.jsx("h3",{className:"text-lg font-semibold text-accent-900",children:"Proteine Totali"})]}),n.jsxs("div",{className:"flex items-end space-x-2",children:[n.jsx("p",{className:"text-3xl font-bold text-accent-900",children:c.toFixed(1)}),a&&n.jsxs("p",{className:"text-lg text-accent-700 mb-1",children:["/ ",a.toFixed(1),"g obiettivo"]})]}),n.jsx("p",{className:"text-sm text-accent-700 mt-1",children:"grammi giornalieri"})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 p-6 rounded-xl border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Distribuzione Macronutrienti Giornaliera"}),n.jsxs("div",{className:"flex rounded-md overflow-hidden border border-gray-300",children:[n.jsxs("div",{className:"flex-1 bg-yellow-100/80 p-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Carboidrati"}),n.jsxs("p",{className:"text-lg font-bold text-gray-800",children:[(f*4/(d||1)*100).toFixed(1),"% (45-60%)"]}),n.jsxs("p",{className:"text-sm text-gray-800",children:[f.toFixed(1),"g"]})]}),n.jsxs("div",{className:"flex-1 bg-red-100/80 p-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Proteine"}),n.jsxs("p",{className:"text-lg font-bold text-gray-800",children:[(c*4/(d||1)*100).toFixed(1),"% (10-20%)"]}),n.jsxs("p",{className:"text-sm text-gray-800",children:[c.toFixed(1),"g"]})]}),n.jsxs("div",{className:"flex-1 bg-green-100/80 p-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Lipidi"}),n.jsxs("p",{className:"text-lg font-bold text-gray-800",children:[(u*9/(d||1)*100).toFixed(1),"% (20-35%)"]}),n.jsxs("p",{className:"text-sm text-gray-800",children:[u.toFixed(1),"g"]})]})]})]})]})},gc=["Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato","Domenica"],xc=()=>{const[e,t]=N.useState(0),[r,s]=N.useState(0),[a,o]=N.useState({});N.useEffect(()=>{try{const x=localStorage.getItem("bilanciamo_meals");if(x){const v=JSON.parse(x);v&&typeof v=="object"?o(v):(console.error("Formato dati non valido, inizializzazione con oggetto vuoto"),o({}))}}catch(x){console.error("Errore nel caricamento dei dati:",x),o({})}},[]);const i=x=>{try{o(x),localStorage.setItem("bilanciamo_meals",JSON.stringify(x))}catch(v){console.error("Errore nel salvataggio dei dati:",v)}},l=()=>`week_${r}`,d=()=>`${l()}_day_${e}`,c=()=>{try{const x=d(),v=a[x];return v?{breakfast:Array.isArray(v.breakfast)?v.breakfast:[],morningSnack:Array.isArray(v.morningSnack)?v.morningSnack:[],lunch:Array.isArray(v.lunch)?v.lunch:[],afternoonSnack:Array.isArray(v.afternoonSnack)?v.afternoonSnack:[],dinner:Array.isArray(v.dinner)?v.dinner:[]}:{breakfast:[],morningSnack:[],lunch:[],afternoonSnack:[],dinner:[]}}catch(x){return console.error("Errore nel recupero dei dati del giorno:",x),{breakfast:[],morningSnack:[],lunch:[],afternoonSnack:[],dinner:[]}}},f=x=>{try{const v={...a,[d()]:x};i(v)}catch(v){console.error("Errore nell'aggiornamento dei dati del giorno:",v)}},u=()=>{const x=new Date,v=new Date(x);return v.setDate(x.getDate()-x.getDay()+1+r*7),v},p=()=>{const x=u(),v=new Date(x);return v.setDate(x.getDate()+6),`${x.getDate()}/${x.getMonth()+1} - ${v.getDate()}/${v.getMonth()+1}`};return n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-2xl p-4 sm:p-6 border border-white/20 dark:border-gray-700/20",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 space-y-4 sm:space-y-0",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(ts,{className:"w-6 h-6 text-primary-600 dark:text-primary-400"}),n.jsx("h2",{className:"text-lg sm:text-xl font-bold text-sage-900 dark:text-white",children:"Piano Alimentare"})]}),n.jsxs("div",{className:"flex items-center justify-center space-x-2 sm:space-x-4",children:[n.jsx("button",{onClick:()=>s(x=>x-1),className:"flex items-center justify-center w-12 h-12 sm:w-10 sm:h-10 text-sage-600 dark:text-gray-300 hover:text-sage-900 dark:hover:text-white hover:bg-sage-100 dark:hover:bg-gray-700 rounded-xl transition-colors duration-200 touch-manipulation",children:n.jsx(zl,{className:"w-6 h-6 sm:w-5 sm:h-5"})}),n.jsxs("div",{className:"text-center px-4 py-2 bg-gray-50 dark:bg-gray-700 rounded-xl min-w-[140px]",children:[n.jsxs("p",{className:"text-sm font-medium text-sage-900 dark:text-white",children:["Settimana ",r===0?"corrente":r>0?`+${r}`:r]}),n.jsx("p",{className:"text-xs text-sage-600 dark:text-gray-400",children:p()})]}),n.jsx("button",{onClick:()=>s(x=>x+1),className:"flex items-center justify-center w-12 h-12 sm:w-10 sm:h-10 text-sage-600 dark:text-gray-300 hover:text-sage-900 dark:hover:text-white hover:bg-sage-100 dark:hover:bg-gray-700 rounded-xl transition-colors duration-200 touch-manipulation",children:n.jsx($l,{className:"w-6 h-6 sm:w-5 sm:h-5"})})]})]}),n.jsx(hc,{days:gc,selectedDay:e,onDaySelect:t})]}),n.jsx(pc,{dayData:c(),selectedDay:e}),n.jsxs("div",{className:"space-y-6",children:[n.jsx(ot,{title:"Colazione",mealData:c().breakfast,onUpdate:x=>f({...c(),breakfast:x})}),n.jsx(ot,{title:"Spuntino Mattina",mealData:c().morningSnack,onUpdate:x=>f({...c(),morningSnack:x})}),n.jsx(ot,{title:"Pranzo",mealData:c().lunch,onUpdate:x=>f({...c(),lunch:x}),showChart:!0}),n.jsx(ot,{title:"Spuntino Pomeriggio",mealData:c().afternoonSnack,onUpdate:x=>f({...c(),afternoonSnack:x})}),n.jsx(ot,{title:"Cena",mealData:c().dinner,onUpdate:x=>f({...c(),dinner:x}),showChart:!0})]})]})},yc=()=>{const[e,t]=N.useState({}),[r,s]=N.useState("Nuova Ricetta"),[a,o]=N.useState([]);N.useEffect(()=>{try{const g=localStorage.getItem("bilanciamo_recipes");if(g){const k=JSON.parse(g);t(k);const P=Object.keys(k);P.length>0&&(s(P[0]),o(k[P[0]].ingredients))}}catch(g){console.error("Errore nel caricamento delle ricette:",g)}},[]),N.useEffect(()=>{Object.keys(e).length>0&&localStorage.setItem("bilanciamo_recipes",JSON.stringify(e))},[e]);const i=()=>{const g={id:Date.now().toString(),food:"",grams:0,calories:0,proteins:0,carbs:0,fats:0,category:""};o([...a,g])},l=(g,k)=>{const P=a.map(A=>A.id===g?{...A,...k}:A);o(P),f(P)},d=g=>{const k=a.filter(P=>P.id!==g);o(k),f(k)},c=g=>{const k=g.reduce((S,D)=>({grams:S.grams+(D.grams||0),calories:S.calories+(D.calories||0),proteins:S.proteins+(D.proteins||0),carbs:S.carbs+(D.carbs||0),fats:S.fats+(D.fats||0)}),{grams:0,calories:0,proteins:0,carbs:0,fats:0}),P=k.grams>0?k.calories/k.grams*100:0,A=k.grams>0?k.proteins/k.grams*100:0;return{...k,caloriesPer100g:P,proteinsPer100g:A}},f=(g=a)=>{if(r.trim()==="")return;const k=c(g),P={name:r,ingredients:g,totalGrams:k.grams,totalCalories:k.calories,totalProteins:k.proteins,caloriesPer100g:k.caloriesPer100g,proteinsPer100g:k.proteinsPer100g};t(A=>({...A,[r]:P}))},u=()=>{s("Nuova Ricetta"),o([])},p=g=>{e[g]&&(s(g),o(e[g].ingredients))},x=()=>{if(!r||!e[r])return;const g=e[r],k=g.ingredients.map(S=>({Alimento:S.food,Grammi:S.grams,Calorie:Math.round(S.calories),"Proteine (g)":S.proteins.toFixed(1),"Carboidrati (g)":S.carbs.toFixed(1),"Grassi (g)":S.fats.toFixed(1)}));k.push({Alimento:"",Grammi:"",Calorie:"","Proteine (g)":"","Carboidrati (g)":"","Grassi (g)":""}),k.push({Alimento:"TOTALI",Grammi:g.totalGrams,Calorie:Math.round(g.totalCalories),"Proteine (g)":g.totalProteins.toFixed(1),"Carboidrati (g)":"","Grassi (g)":""}),k.push({Alimento:"PER 100g",Grammi:100,Calorie:Math.round(g.caloriesPer100g),"Proteine (g)":g.proteinsPer100g.toFixed(1),"Carboidrati (g)":"","Grassi (g)":""});const P=_t.json_to_sheet(k),A=_t.book_new();_t.book_append_sheet(A,P,"Ricetta"),Io(A,`${r.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.xlsx`)},v=c(a);return n.jsx("div",{className:"space-y-8",children:n.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl border border-white/20 overflow-hidden",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(pa,{className:"w-5 h-5 text-primary-600"}),n.jsx("input",{type:"text",value:r,onChange:g=>{s(g.target.value),f()},className:"text-lg font-semibold text-sage-900 bg-transparent border-b border-sage-300 focus:outline-none focus:border-primary-500 px-2 py-1 w-full max-w-md",placeholder:"Nome Ricetta"})]}),n.jsxs("button",{onClick:x,className:"px-4 py-2 bg-accent-600 text-white rounded-md hover:bg-accent-700 transition-colors flex items-center space-x-2",disabled:a.length===0,children:[n.jsx(Wl,{className:"w-4 h-4"}),n.jsx("span",{children:"Esporta Excel"})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[n.jsxs("button",{onClick:u,className:"px-3 py-1 bg-primary-600 text-white text-sm rounded-md hover:bg-primary-700 transition-colors flex items-center space-x-1",children:[n.jsx(Ut,{className:"w-3 h-3"}),n.jsx("span",{children:"Nuova"})]}),Object.keys(e).map(g=>n.jsx("button",{onClick:()=>p(g),className:`px-3 py-1 text-sm rounded-md transition-colors ${r===g?"bg-accent-600 text-white":"bg-sage-100 text-sage-700 hover:bg-sage-200"}`,children:g},g))]}),n.jsxs("div",{className:"space-y-4",children:[a.map(g=>n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-end p-4 bg-sage-50/50 rounded-lg",children:[n.jsxs("div",{className:"md:col-span-4",children:[n.jsx("label",{className:"block text-xs font-medium text-sage-700 mb-1",children:"Alimento"}),n.jsx(ya,{value:g.food,onChange:(k,P)=>{l(g.id,{food:k,...P})},grams:g.grams})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-xs font-medium text-sage-700 mb-1",children:"Grammi"}),n.jsx("input",{type:"number",value:g.grams||"",onChange:k=>{const P=parseFloat(k.target.value)||0;if(g.food&&g.calories>0){const A=g.calories/(g.grams||1)*100,S=g.proteins/(g.grams||1)*100,D=g.carbs/(g.grams||1)*100,C=g.fats/(g.grams||1)*100;l(g.id,{grams:P,calories:A*P/100,proteins:S*P/100,carbs:D*P/100,fats:C*P/100})}else l(g.id,{grams:P})},className:"w-full px-3 py-2 bg-white border border-sage-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm",placeholder:"0",min:"0"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-xs font-medium text-sage-700 mb-1",children:"Kcal"}),n.jsx("div",{className:"px-3 py-2 bg-sage-100 border border-sage-200 rounded-lg text-sm text-sage-700",children:Math.round(g.calories||0)})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-xs font-medium text-sage-700 mb-1",children:"Proteine (g)"}),n.jsx("div",{className:"px-3 py-2 bg-sage-100 border border-sage-200 rounded-lg text-sm text-sage-700",children:(g.proteins||0).toFixed(1)})]}),n.jsx("div",{className:"md:col-span-1",children:n.jsx("button",{onClick:()=>d(g.id),className:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors duration-200",children:n.jsx(rs,{className:"w-4 h-4"})})})]},g.id)),n.jsxs("button",{onClick:i,className:"w-full p-4 border-2 border-dashed border-sage-300 rounded-lg text-sage-600 hover:text-sage-900 hover:border-sage-400 hover:bg-sage-50/50 transition-all duration-200 flex items-center justify-center space-x-2",children:[n.jsx(Ut,{className:"w-5 h-5"}),n.jsx("span",{children:"Aggiungi ingrediente"})]})]}),n.jsxs("div",{className:"mt-6 p-6 bg-gradient-to-r from-primary-50 to-accent-50 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-semibold text-sage-900 mb-4",children:"Riepilogo Ricetta"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-sage-600",children:"Peso Totale"}),n.jsxs("p",{className:"text-xl font-bold text-sage-900",children:[Math.round(v.grams)," g"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-sage-600",children:"Calorie Totali"}),n.jsxs("p",{className:"text-xl font-bold text-sage-900",children:[Math.round(v.calories)," kcal"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-sage-600",children:"Proteine Totali"}),n.jsxs("p",{className:"text-xl font-bold text-sage-900",children:[v.proteins.toFixed(1)," g"]})]}),n.jsxs("div",{className:"md:col-span-2 lg:col-span-1",children:[n.jsx("p",{className:"text-sm text-sage-600 font-medium",children:"Per 100g di ricetta:"}),n.jsxs("p",{className:"text-lg font-bold text-primary-900",children:[Math.round(v.caloriesPer100g)," kcal"]}),n.jsxs("p",{className:"text-lg font-bold text-accent-900",children:[v.proteinsPer100g.toFixed(1)," g proteine"]})]})]})]})]})})})},vc=()=>{const[e,t]=N.useState([]),[r,s]=N.useState(!1),[a,o]=N.useState(null),[i,l]=N.useState({name:"",calories:0,carbs:0,proteins:0,fats:0}),[d,c]=N.useState({name:"",calories:0,carbs:0,proteins:0,fats:0}),[f,u]=N.useState(!1),[p,x]=N.useState(""),[v,g]=N.useState("all");N.useEffect(()=>{const L=localStorage.getItem("bilanciamo_food_database");if(L)try{const B=JSON.parse(L);if(Array.isArray(B)){const $=B.map((H,X)=>({id:H.id||`food_${X}`,name:H.name||"",category:H.category||k(H.carbs||0,H.proteins||0,H.fats||0),calories:H.calories||0,carbs:H.carbs||0,proteins:H.proteins||0,fats:H.fats||0}));t($),u(!0)}}catch(B){console.error("Errore nel caricamento del database alimentare:",B)}},[]),N.useEffect(()=>{e.length>0&&localStorage.setItem("bilanciamo_food_database",JSON.stringify(e))},[e]);const k=(L,B,$)=>{const H=L*4,X=B*4,oe=$*9;return H>=X&&H>=oe?"CRB":X>=oe?"PRT":"LPD"},P=async L=>{var $;const B=($=L.target.files)==null?void 0:$[0];if(B){try{const H=await B.arrayBuffer(),X=Vo(H),oe=X.SheetNames[0],Q=X.Sheets[oe],ge=_t.sheet_to_json(Q).map((se,Ye)=>{const K=parseFloat(se.carbs||se.carboidrati||0),xe=parseFloat(se.proteins||se.proteine||0),Ve=parseFloat(se.fats||se.lipidi||0);return{id:`excel_${Ye}_${Date.now()}`,name:se.name||se.nome||"",category:se.category||k(K,xe,Ve),calories:parseFloat(se.calories||se.energia||0),carbs:K,proteins:xe,fats:Ve}});t(ge),u(!0),alert(`Database alimentare caricato con successo! ${ge.length} alimenti importati.`)}catch(H){console.error("Errore durante l'elaborazione del file Excel:",H),alert("Errore durante l'elaborazione del file Excel. Verifica il formato del file.")}L.target.value=""}},A=()=>{if(!i.name.trim()){alert("Il nome dell'alimento è obbligatorio");return}const L=k(i.carbs,i.proteins,i.fats),B={id:`new_${Date.now()}`,name:i.name.trim(),category:L,calories:i.calories,carbs:i.carbs,proteins:i.proteins,fats:i.fats};t($=>[...$,B]),l({name:"",calories:0,carbs:0,proteins:0,fats:0}),s(!1)},S=L=>{confirm("Sei sicuro di voler eliminare questo alimento?")&&t(B=>B.filter($=>$.id!==L))},D=L=>{o(L.id),c({name:L.name,calories:L.calories,carbs:L.carbs,proteins:L.proteins,fats:L.fats})},C=()=>{if(!d.name.trim()){alert("Il nome dell'alimento è obbligatorio");return}const L=k(d.carbs,d.proteins,d.fats);t(B=>B.map($=>$.id===a?{...$,name:d.name.trim(),category:L,calories:d.calories,carbs:d.carbs,proteins:d.proteins,fats:d.fats}:$)),o(null)},V=()=>{o(null),c({name:"",calories:0,carbs:0,proteins:0,fats:0})},_=e.filter(L=>{const B=L.name.toLowerCase().includes(p.toLowerCase()),$=v==="all"||L.category===v;return B&&$}),F=L=>{switch(L){case"CRB":return"Carboidrato";case"PRT":return"Proteina";case"LPD":return"Lipidi";default:return L}},z=L=>{switch(L){case"CRB":return"bg-blue-100 text-blue-800";case"PRT":return"bg-green-100 text-green-800";case"LPD":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-8 border border-white/20",children:[n.jsx("h1",{className:"text-2xl font-bold text-sage-900 mb-4",children:"Database Alimenti"}),n.jsx("p",{className:"text-sage-600",children:"Gestisci il tuo database personalizzato di alimenti con le relative proprietà nutrizionali."})]}),n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-8 border border-white/20",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[n.jsx(oc,{className:"w-6 h-6 text-primary-600"}),n.jsx("h2",{className:"text-xl font-bold text-sage-900",children:"Importa da Excel"})]}),n.jsx("p",{className:"text-sage-700 mb-4",children:"Carica un file Excel con il tuo database di alimenti."}),n.jsx("p",{className:"text-sm text-sage-600 mb-4",children:"Il file deve contenere le colonne: name/nome, calories/energia, carbs/carboidrati, proteins/proteine, fats/lipidi."}),n.jsx("div",{className:"flex items-center space-x-2",children:n.jsx("input",{type:"file",accept:".xlsx, .xls",onChange:P,className:`block w-full text-sm text-sage-500
              file:mr-4 file:py-2 file:px-4
              file:rounded-md file:border-0
              file:text-sm file:font-medium
              file:bg-primary-50 file:text-primary-700
              hover:file:bg-primary-100`})}),f&&n.jsxs("div",{className:"mt-3 text-sm text-green-600 flex items-center",children:[n.jsx(Ol,{className:"w-5 h-5 mr-2"}),n.jsxs("span",{children:["Database caricato con successo! (",e.length," alimenti)"]})]})]}),n.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-white/20",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",placeholder:"Cerca alimenti...",value:p,onChange:L=>x(L.target.value),className:"w-full px-4 py-2 border border-sage-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})}),n.jsx("div",{children:n.jsxs("select",{value:v,onChange:L=>g(L.target.value),className:"px-4 py-2 border border-sage-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[n.jsx("option",{value:"all",children:"Tutte le categorie"}),n.jsx("option",{value:"CRB",children:"Carboidrati"}),n.jsx("option",{value:"PRT",children:"Proteine"}),n.jsx("option",{value:"LPD",children:"Lipidi"})]})})]})}),n.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl border border-white/20 overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b border-sage-200",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("h2",{className:"text-xl font-bold text-sage-900",children:["Alimenti (",_.length,")"]}),n.jsxs("button",{onClick:()=>s(!0),className:"flex items-center space-x-2 px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:[n.jsx(Ut,{className:"w-4 h-4"}),n.jsx("span",{children:"Aggiungi Alimento"})]})]})}),r&&n.jsxs("div",{className:"p-6 border-b border-sage-200 bg-sage-50",children:[n.jsx("h3",{className:"text-lg font-semibold text-sage-900 mb-4",children:"Nuovo Alimento"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[n.jsxs("div",{className:"lg:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-sage-700 mb-1",children:"Nome"}),n.jsx("input",{type:"text",value:i.name,onChange:L=>l(B=>({...B,name:L.target.value})),className:"w-full px-3 py-2 border border-sage-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Nome alimento"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-sage-700 mb-1",children:"Energia (kcal/100g)"}),n.jsx("input",{type:"number",value:i.calories,onChange:L=>l(B=>({...B,calories:parseFloat(L.target.value)||0})),className:"w-full px-3 py-2 border border-sage-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",min:"0",step:"0.1"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-sage-700 mb-1",children:"Carboidrati (g/100g)"}),n.jsx("input",{type:"number",value:i.carbs,onChange:L=>l(B=>({...B,carbs:parseFloat(L.target.value)||0})),className:"w-full px-3 py-2 border border-sage-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",min:"0",step:"0.1"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-sage-700 mb-1",children:"Proteine (g/100g)"}),n.jsx("input",{type:"number",value:i.proteins,onChange:L=>l(B=>({...B,proteins:parseFloat(L.target.value)||0})),className:"w-full px-3 py-2 border border-sage-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",min:"0",step:"0.1"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-sage-700 mb-1",children:"Lipidi (g/100g)"}),n.jsx("input",{type:"number",value:i.fats,onChange:L=>l(B=>({...B,fats:parseFloat(L.target.value)||0})),className:"w-full px-3 py-2 border border-sage-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",min:"0",step:"0.1"})]})]}),n.jsxs("div",{className:"flex space-x-2 mt-4",children:[n.jsxs("button",{onClick:A,className:"flex items-center space-x-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:[n.jsx(Xs,{className:"w-4 h-4"}),n.jsx("span",{children:"Salva"})]}),n.jsxs("button",{onClick:()=>{s(!1),l({name:"",calories:0,carbs:0,proteins:0,fats:0})},className:"flex items-center space-x-2 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:[n.jsx(gt,{className:"w-4 h-4"}),n.jsx("span",{children:"Annulla"})]})]})]}),n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-sage-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-sage-500 uppercase tracking-wider",children:"Nome"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-sage-500 uppercase tracking-wider",children:"Categoria"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-sage-500 uppercase tracking-wider",children:"Energia (kcal/100g)"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-sage-500 uppercase tracking-wider",children:"Carboidrati (g/100g)"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-sage-500 uppercase tracking-wider",children:"Proteine (g/100g)"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-sage-500 uppercase tracking-wider",children:"Lipidi (g/100g)"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-sage-500 uppercase tracking-wider",children:"Azioni"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-sage-200",children:_.map(L=>n.jsxs("tr",{className:"hover:bg-sage-50",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a===L.id?n.jsx("input",{type:"text",value:d.name,onChange:B=>c($=>({...$,name:B.target.value})),className:"w-full px-2 py-1 border border-sage-200 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent"}):n.jsx("div",{className:"text-sm font-medium text-sage-900",children:L.name})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${z(L.category)}`,children:F(L.category)})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-sage-900",children:a===L.id?n.jsx("input",{type:"number",value:d.calories,onChange:B=>c($=>({...$,calories:parseFloat(B.target.value)||0})),className:"w-20 px-2 py-1 border border-sage-200 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",min:"0",step:"0.1"}):L.calories.toFixed(1)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-sage-900",children:a===L.id?n.jsx("input",{type:"number",value:d.carbs,onChange:B=>c($=>({...$,carbs:parseFloat(B.target.value)||0})),className:"w-20 px-2 py-1 border border-sage-200 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",min:"0",step:"0.1"}):L.carbs.toFixed(1)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-sage-900",children:a===L.id?n.jsx("input",{type:"number",value:d.proteins,onChange:B=>c($=>({...$,proteins:parseFloat(B.target.value)||0})),className:"w-20 px-2 py-1 border border-sage-200 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",min:"0",step:"0.1"}):L.proteins.toFixed(1)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-sage-900",children:a===L.id?n.jsx("input",{type:"number",value:d.fats,onChange:B=>c($=>({...$,fats:parseFloat(B.target.value)||0})),className:"w-20 px-2 py-1 border border-sage-200 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent",min:"0",step:"0.1"}):L.fats.toFixed(1)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a===L.id?n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:C,className:"text-green-600 hover:text-green-900",children:n.jsx(Xs,{className:"w-4 h-4"})}),n.jsx("button",{onClick:V,className:"text-gray-600 hover:text-gray-900",children:n.jsx(gt,{className:"w-4 h-4"})})]}):n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>D(L),className:"text-primary-600 hover:text-primary-900",children:n.jsx(ec,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>S(L.id),className:"text-red-600 hover:text-red-900",children:n.jsx(rs,{className:"w-4 h-4"})})]})})]},L.id))})]}),_.length===0&&n.jsx("div",{className:"text-center py-8 text-sage-500",children:e.length===0?"Nessun alimento presente. Carica un file Excel o aggiungi manualmente.":"Nessun alimento trovato con i filtri selezionati."})]})]})]})},bc=({user:e})=>{var d;console.log("Dashboard.tsx: props.user",e);const[t,r]=N.useState("calculations");console.log("Dashboard.tsx: activeTab initialized",t);const[s,a]=N.useState(null);N.useEffect(()=>{console.log("Dashboard.tsx: activeTab changed to",t),a(null)},[t]);const o=[{id:"calculations",label:"Calcoli di Base",icon:_r,component:Zs},{id:"diet",label:"Dieta",icon:ts,component:xc},{id:"recipes",label:"Ricette",icon:pa,component:yc},{id:"foods",label:"Alimenti",icon:Vl,component:vc}],i=((d=o.find(c=>c.id===t))==null?void 0:d.component)||Zs;console.log("Dashboard.tsx: ActiveComponent selected",i);const l=()=>{try{return n.jsx(i,{})}catch(c){return console.error("Errore nel rendering del componente:",c),a(`Si è verificato un errore nel caricamento della pagina ${t==="diet"?"Dieta":t==="recipes"?"Ricette":t==="foods"?"Alimenti":"Calcoli di Base"}. Riprova più tardi.`),console.log("Dashboard.tsx: rendering, user:",e,"activeTab:",t),n.jsxs("div",{className:"p-6 bg-red-50 border border-red-200 rounded-xl text-red-700",children:[n.jsx("p",{className:"font-medium",children:"Errore"}),n.jsx("p",{children:s||"Si è verificato un errore imprevisto."})]})}};return n.jsxs("div",{className:"max-w-7xl mx-auto animate-fade-in px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"mb-6 sm:mb-8",children:[n.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-sage-900 mb-2",children:["Benvenuto, ",e.name.split(" ")[0],"!"]}),n.jsx("p",{className:"text-sage-600 text-sm sm:text-base",children:"Gestisci i tuoi calcoli nutrizionali e piano alimentare"})]}),n.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-2 mb-6 sm:mb-8 border border-white/20 shadow-lg",children:n.jsx("div",{className:"flex flex-wrap gap-1 sm:gap-2",children:o.map(c=>{const f=c.icon,u=t===c.id;return n.jsxs("button",{onClick:()=>r(c.id),className:`flex items-center justify-center space-x-1 sm:space-x-2 px-3 sm:px-6 py-2 sm:py-3 rounded-lg font-medium transition-all duration-200 flex-1 sm:flex-none min-w-0 ${u?"bg-gradient-to-r from-primary-500 to-accent-500 text-white shadow-lg transform scale-105":"text-sage-600 hover:text-sage-900 hover:bg-sage-50 hover:shadow-md"}`,children:[n.jsx(f,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),n.jsx("span",{className:"text-xs sm:text-sm truncate",children:c.label})]},c.id)})})}),n.jsx("div",{className:"animate-slide-up",children:l()})]})},va=N.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),rr=N.createContext({}),sr=N.createContext(null),nr=typeof document<"u",ns=nr?N.useLayoutEffect:N.useEffect,ba=N.createContext({strict:!1}),as=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),wc="framerAppearId",wa="data-"+as(wc);function jc(e,t,r,s){const{visualElement:a}=N.useContext(rr),o=N.useContext(ba),i=N.useContext(sr),l=N.useContext(va).reducedMotion,d=N.useRef();s=s||o.renderer,!d.current&&s&&(d.current=s(e,{visualState:t,parent:a,props:r,presenceContext:i,blockInitialAnimation:i?i.initial===!1:!1,reducedMotionConfig:l}));const c=d.current;N.useInsertionEffect(()=>{c&&c.update(r,i)});const f=N.useRef(!!(r[wa]&&!window.HandoffComplete));return ns(()=>{c&&(c.render(),f.current&&c.animationState&&c.animationState.animateChanges())}),N.useEffect(()=>{c&&(c.updateFeatures(),!f.current&&c.animationState&&c.animationState.animateChanges(),f.current&&(f.current=!1,window.HandoffComplete=!0))}),c}function Je(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Nc(e,t,r){return N.useCallback(s=>{s&&e.mount&&e.mount(s),t&&(s?t.mount(s):t.unmount()),r&&(typeof r=="function"?r(s):Je(r)&&(r.current=s))},[t])}function xt(e){return typeof e=="string"||Array.isArray(e)}function ar(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const is=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],os=["initial",...is];function ir(e){return ar(e.animate)||os.some(t=>xt(e[t]))}function ja(e){return!!(ir(e)||e.variants)}function kc(e,t){if(ir(e)){const{initial:r,animate:s}=e;return{initial:r===!1||xt(r)?r:void 0,animate:xt(s)?s:void 0}}return e.inherit!==!1?t:{}}function Sc(e){const{initial:t,animate:r}=kc(e,N.useContext(rr));return N.useMemo(()=>({initial:t,animate:r}),[Js(t),Js(r)])}function Js(e){return Array.isArray(e)?e.join(" "):e}const Qs={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},yt={};for(const e in Qs)yt[e]={isEnabled:t=>Qs[e].some(r=>!!t[r])};function Cc(e){for(const t in e)yt[t]={...yt[t],...e[t]}}const ls=N.createContext({}),Na=N.createContext({}),Pc=Symbol.for("motionComponentSymbol");function Tc({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:s,Component:a}){e&&Cc(e);function o(l,d){let c;const f={...N.useContext(va),...l,layoutId:Ac(l)},{isStatic:u}=f,p=Sc(l),x=s(l,u);if(!u&&nr){p.visualElement=jc(a,x,f,t);const v=N.useContext(Na),g=N.useContext(ba).strict;p.visualElement&&(c=p.visualElement.loadFeatures(f,g,e,v))}return N.createElement(rr.Provider,{value:p},c&&p.visualElement?N.createElement(c,{visualElement:p.visualElement,...f}):null,r(a,l,Nc(x,p.visualElement,d),x,u,p.visualElement))}const i=N.forwardRef(o);return i[Pc]=a,i}function Ac({layoutId:e}){const t=N.useContext(ls).id;return t&&e!==void 0?t+"-"+e:e}function Dc(e){function t(s,a={}){return Tc(e(s,a))}if(typeof Proxy>"u")return t;const r=new Map;return new Proxy(t,{get:(s,a)=>(r.has(a)||r.set(a,t(a)),r.get(a))})}const Ec=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function cs(e){return typeof e!="string"||e.includes("-")?!1:!!(Ec.indexOf(e)>-1||/[A-Z]/.test(e))}const Wt={};function Mc(e){Object.assign(Wt,e)}const jt=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ke=new Set(jt);function ka(e,{layout:t,layoutId:r}){return Ke.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!Wt[e]||e==="opacity")}const ue=e=>!!(e&&e.getVelocity),Rc={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Lc=jt.length;function Ic(e,{enableHardwareAcceleration:t=!0,allowTransformNone:r=!0},s,a){let o="";for(let i=0;i<Lc;i++){const l=jt[i];if(e[l]!==void 0){const d=Rc[l]||l;o+=`${d}(${e[l]}) `}}return t&&!e.z&&(o+="translateZ(0)"),o=o.trim(),a?o=a(e,s?"":o):r&&s&&(o="none"),o}const Sa=e=>t=>typeof t=="string"&&t.startsWith(e),Ca=Sa("--"),zr=Sa("var(--"),Vc=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,Fc=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Me=(e,t,r)=>Math.min(Math.max(r,e),t),qe={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ft={...qe,transform:e=>Me(0,1,e)},Rt={...qe,default:1},mt=e=>Math.round(e*1e5)/1e5,or=/(-)?([\d]*\.?[\d])+/g,Pa=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,_c=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Nt(e){return typeof e=="string"}const kt=e=>({test:t=>Nt(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Te=kt("deg"),ye=kt("%"),U=kt("px"),Oc=kt("vh"),Bc=kt("vw"),en={...ye,parse:e=>ye.parse(e)/100,transform:e=>ye.transform(e*100)},tn={...qe,transform:Math.round},Ta={borderWidth:U,borderTopWidth:U,borderRightWidth:U,borderBottomWidth:U,borderLeftWidth:U,borderRadius:U,radius:U,borderTopLeftRadius:U,borderTopRightRadius:U,borderBottomRightRadius:U,borderBottomLeftRadius:U,width:U,maxWidth:U,height:U,maxHeight:U,size:U,top:U,right:U,bottom:U,left:U,padding:U,paddingTop:U,paddingRight:U,paddingBottom:U,paddingLeft:U,margin:U,marginTop:U,marginRight:U,marginBottom:U,marginLeft:U,rotate:Te,rotateX:Te,rotateY:Te,rotateZ:Te,scale:Rt,scaleX:Rt,scaleY:Rt,scaleZ:Rt,skew:Te,skewX:Te,skewY:Te,distance:U,translateX:U,translateY:U,translateZ:U,x:U,y:U,z:U,perspective:U,transformPerspective:U,opacity:ft,originX:en,originY:en,originZ:U,zIndex:tn,fillOpacity:ft,strokeOpacity:ft,numOctaves:tn};function ds(e,t,r,s){const{style:a,vars:o,transform:i,transformOrigin:l}=e;let d=!1,c=!1,f=!0;for(const u in t){const p=t[u];if(Ca(u)){o[u]=p;continue}const x=Ta[u],v=Fc(p,x);if(Ke.has(u)){if(d=!0,i[u]=v,!f)continue;p!==(x.default||0)&&(f=!1)}else u.startsWith("origin")?(c=!0,l[u]=v):a[u]=v}if(t.transform||(d||s?a.transform=Ic(e.transform,r,f,s):a.transform&&(a.transform="none")),c){const{originX:u="50%",originY:p="50%",originZ:x=0}=l;a.transformOrigin=`${u} ${p} ${x}`}}const us=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Aa(e,t,r){for(const s in t)!ue(t[s])&&!ka(s,r)&&(e[s]=t[s])}function zc({transformTemplate:e},t,r){return N.useMemo(()=>{const s=us();return ds(s,t,{enableHardwareAcceleration:!r},e),Object.assign({},s.vars,s.style)},[t])}function $c(e,t,r){const s=e.style||{},a={};return Aa(a,s,e),Object.assign(a,zc(e,t,r)),e.transformValues?e.transformValues(a):a}function Uc(e,t,r){const s={},a=$c(e,t,r);return e.drag&&e.dragListener!==!1&&(s.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=a,s}const Gc=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ht(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Gc.has(e)}let Da=e=>!Ht(e);function Wc(e){e&&(Da=t=>t.startsWith("on")?!Ht(t):e(t))}try{Wc(require("@emotion/is-prop-valid").default)}catch{}function Hc(e,t,r){const s={};for(const a in e)a==="values"&&typeof e.values=="object"||(Da(a)||r===!0&&Ht(a)||!t&&!Ht(a)||e.draggable&&a.startsWith("onDrag"))&&(s[a]=e[a]);return s}function rn(e,t,r){return typeof e=="string"?e:U.transform(t+r*e)}function Kc(e,t,r){const s=rn(t,e.x,e.width),a=rn(r,e.y,e.height);return`${s} ${a}`}const qc={offset:"stroke-dashoffset",array:"stroke-dasharray"},Yc={offset:"strokeDashoffset",array:"strokeDasharray"};function Xc(e,t,r=1,s=0,a=!0){e.pathLength=1;const o=a?qc:Yc;e[o.offset]=U.transform(-s);const i=U.transform(t),l=U.transform(r);e[o.array]=`${i} ${l}`}function fs(e,{attrX:t,attrY:r,attrScale:s,originX:a,originY:o,pathLength:i,pathSpacing:l=1,pathOffset:d=0,...c},f,u,p){if(ds(e,c,f,p),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:x,style:v,dimensions:g}=e;x.transform&&(g&&(v.transform=x.transform),delete x.transform),g&&(a!==void 0||o!==void 0||v.transform)&&(v.transformOrigin=Kc(g,a!==void 0?a:.5,o!==void 0?o:.5)),t!==void 0&&(x.x=t),r!==void 0&&(x.y=r),s!==void 0&&(x.scale=s),i!==void 0&&Xc(x,i,l,d,!1)}const Ea=()=>({...us(),attrs:{}}),ms=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Zc(e,t,r,s){const a=N.useMemo(()=>{const o=Ea();return fs(o,t,{enableHardwareAcceleration:!1},ms(s),e.transformTemplate),{...o.attrs,style:{...o.style}}},[t]);if(e.style){const o={};Aa(o,e.style,e),a.style={...o,...a.style}}return a}function Jc(e=!1){return(r,s,a,{latestValues:o},i)=>{const d=(cs(r)?Zc:Uc)(s,o,i,r),f={...Hc(s,typeof r=="string",e),...d,ref:a},{children:u}=s,p=N.useMemo(()=>ue(u)?u.get():u,[u]);return N.createElement(r,{...f,children:p})}}function Ma(e,{style:t,vars:r},s,a){Object.assign(e.style,t,a&&a.getProjectionStyles(s));for(const o in r)e.style.setProperty(o,r[o])}const Ra=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function La(e,t,r,s){Ma(e,t,void 0,s);for(const a in t.attrs)e.setAttribute(Ra.has(a)?a:as(a),t.attrs[a])}function hs(e,t){const{style:r}=e,s={};for(const a in r)(ue(r[a])||t.style&&ue(t.style[a])||ka(a,e))&&(s[a]=r[a]);return s}function Ia(e,t){const r=hs(e,t);for(const s in e)if(ue(e[s])||ue(t[s])){const a=jt.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=e[s]}return r}function ps(e,t,r,s={},a={}){return typeof t=="function"&&(t=t(r!==void 0?r:e.custom,s,a)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(r!==void 0?r:e.custom,s,a)),t}function Va(e){const t=N.useRef(null);return t.current===null&&(t.current=e()),t.current}const Kt=e=>Array.isArray(e),Qc=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),ed=e=>Kt(e)?e[e.length-1]||0:e;function Bt(e){const t=ue(e)?e.get():e;return Qc(t)?t.toValue():t}function td({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:r},s,a,o){const i={latestValues:rd(s,a,o,e),renderState:t()};return r&&(i.mount=l=>r(s,l,i)),i}const Fa=e=>(t,r)=>{const s=N.useContext(rr),a=N.useContext(sr),o=()=>td(e,t,s,a);return r?o():Va(o)};function rd(e,t,r,s){const a={},o=s(e,{});for(const p in o)a[p]=Bt(o[p]);let{initial:i,animate:l}=e;const d=ir(e),c=ja(e);t&&c&&!d&&e.inherit!==!1&&(i===void 0&&(i=t.initial),l===void 0&&(l=t.animate));let f=r?r.initial===!1:!1;f=f||i===!1;const u=f?l:i;return u&&typeof u!="boolean"&&!ar(u)&&(Array.isArray(u)?u:[u]).forEach(x=>{const v=ps(e,x);if(!v)return;const{transitionEnd:g,transition:k,...P}=v;for(const A in P){let S=P[A];if(Array.isArray(S)){const D=f?S.length-1:0;S=S[D]}S!==null&&(a[A]=S)}for(const A in g)a[A]=g[A]}),a}const re=e=>e;class sn{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const r=this.order.indexOf(t);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function sd(e){let t=new sn,r=new sn,s=0,a=!1,o=!1;const i=new WeakSet,l={schedule:(d,c=!1,f=!1)=>{const u=f&&a,p=u?t:r;return c&&i.add(d),p.add(d)&&u&&a&&(s=t.order.length),d},cancel:d=>{r.remove(d),i.delete(d)},process:d=>{if(a){o=!0;return}if(a=!0,[t,r]=[r,t],r.clear(),s=t.order.length,s)for(let c=0;c<s;c++){const f=t.order[c];f(d),i.has(f)&&(l.schedule(f),e())}a=!1,o&&(o=!1,l.process(d))}};return l}const Lt=["prepare","read","update","preRender","render","postRender"],nd=40;function ad(e,t){let r=!1,s=!0;const a={delta:0,timestamp:0,isProcessing:!1},o=Lt.reduce((u,p)=>(u[p]=sd(()=>r=!0),u),{}),i=u=>o[u].process(a),l=()=>{const u=performance.now();r=!1,a.delta=s?1e3/60:Math.max(Math.min(u-a.timestamp,nd),1),a.timestamp=u,a.isProcessing=!0,Lt.forEach(i),a.isProcessing=!1,r&&t&&(s=!1,e(l))},d=()=>{r=!0,s=!0,a.isProcessing||e(l)};return{schedule:Lt.reduce((u,p)=>{const x=o[p];return u[p]=(v,g=!1,k=!1)=>(r||d(),x.schedule(v,g,k)),u},{}),cancel:u=>Lt.forEach(p=>o[p].cancel(u)),state:a,steps:o}}const{schedule:J,cancel:Se,state:ce,steps:br}=ad(typeof requestAnimationFrame<"u"?requestAnimationFrame:re,!0),id={useVisualState:Fa({scrapeMotionValuesFromProps:Ia,createRenderState:Ea,onMount:(e,t,{renderState:r,latestValues:s})=>{J.read(()=>{try{r.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),J.render(()=>{fs(r,s,{enableHardwareAcceleration:!1},ms(t.tagName),e.transformTemplate),La(t,r)})}})},od={useVisualState:Fa({scrapeMotionValuesFromProps:hs,createRenderState:us})};function ld(e,{forwardMotionProps:t=!1},r,s){return{...cs(e)?id:od,preloadedFeatures:r,useRender:Jc(t),createVisualElement:s,Component:e}}function we(e,t,r,s={passive:!0}){return e.addEventListener(t,r,s),()=>e.removeEventListener(t,r)}const _a=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function lr(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const cd=e=>t=>_a(t)&&e(t,lr(t));function je(e,t,r,s){return we(e,t,cd(r),s)}const dd=(e,t)=>r=>t(e(r)),Ee=(...e)=>e.reduce(dd);function Oa(e){let t=null;return()=>{const r=()=>{t=null};return t===null?(t=e,r):!1}}const nn=Oa("dragHorizontal"),an=Oa("dragVertical");function Ba(e){let t=!1;if(e==="y")t=an();else if(e==="x")t=nn();else{const r=nn(),s=an();r&&s?t=()=>{r(),s()}:(r&&r(),s&&s())}return t}function za(){const e=Ba(!0);return e?(e(),!1):!0}class Ie{constructor(t){this.isMounted=!1,this.node=t}update(){}}function on(e,t){const r="pointer"+(t?"enter":"leave"),s="onHover"+(t?"Start":"End"),a=(o,i)=>{if(o.pointerType==="touch"||za())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[s]&&J.update(()=>l[s](o,i))};return je(e.current,r,a,{passive:!e.getProps()[s]})}class ud extends Ie{mount(){this.unmount=Ee(on(this.node,!0),on(this.node,!1))}unmount(){}}class fd extends Ie{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ee(we(this.node.current,"focus",()=>this.onFocus()),we(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const $a=(e,t)=>t?e===t?!0:$a(e,t.parentElement):!1;function wr(e,t){if(!t)return;const r=new PointerEvent("pointer"+e);t(r,lr(r))}class md extends Ie{constructor(){super(...arguments),this.removeStartListeners=re,this.removeEndListeners=re,this.removeAccessibleListeners=re,this.startPointerPress=(t,r)=>{if(this.isPressing)return;this.removeEndListeners();const s=this.node.getProps(),o=je(window,"pointerup",(l,d)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:f,globalTapTarget:u}=this.node.getProps();J.update(()=>{!u&&!$a(this.node.current,l.target)?f&&f(l,d):c&&c(l,d)})},{passive:!(s.onTap||s.onPointerUp)}),i=je(window,"pointercancel",(l,d)=>this.cancelPress(l,d),{passive:!(s.onTapCancel||s.onPointerCancel)});this.removeEndListeners=Ee(o,i),this.startPress(t,r)},this.startAccessiblePress=()=>{const t=o=>{if(o.key!=="Enter"||this.isPressing)return;const i=l=>{l.key!=="Enter"||!this.checkPressEnd()||wr("up",(d,c)=>{const{onTap:f}=this.node.getProps();f&&J.update(()=>f(d,c))})};this.removeEndListeners(),this.removeEndListeners=we(this.node.current,"keyup",i),wr("down",(l,d)=>{this.startPress(l,d)})},r=we(this.node.current,"keydown",t),s=()=>{this.isPressing&&wr("cancel",(o,i)=>this.cancelPress(o,i))},a=we(this.node.current,"blur",s);this.removeAccessibleListeners=Ee(r,a)}}startPress(t,r){this.isPressing=!0;const{onTapStart:s,whileTap:a}=this.node.getProps();a&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),s&&J.update(()=>s(t,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!za()}cancelPress(t,r){if(!this.checkPressEnd())return;const{onTapCancel:s}=this.node.getProps();s&&J.update(()=>s(t,r))}mount(){const t=this.node.getProps(),r=je(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),s=we(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Ee(r,s)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const $r=new WeakMap,jr=new WeakMap,hd=e=>{const t=$r.get(e.target);t&&t(e)},pd=e=>{e.forEach(hd)};function gd({root:e,...t}){const r=e||document;jr.has(r)||jr.set(r,{});const s=jr.get(r),a=JSON.stringify(t);return s[a]||(s[a]=new IntersectionObserver(pd,{root:e,...t})),s[a]}function xd(e,t,r){const s=gd(t);return $r.set(e,r),s.observe(e),()=>{$r.delete(e),s.unobserve(e)}}const yd={some:0,all:1};class vd extends Ie{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:s,amount:a="some",once:o}=t,i={root:r?r.current:void 0,rootMargin:s,threshold:typeof a=="number"?a:yd[a]},l=d=>{const{isIntersecting:c}=d;if(this.isInView===c||(this.isInView=c,o&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:f,onViewportLeave:u}=this.node.getProps(),p=c?f:u;p&&p(d)};return xd(this.node.current,i,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(bd(t,r))&&this.startObserver()}unmount(){}}function bd({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const wd={inView:{Feature:vd},tap:{Feature:md},focus:{Feature:fd},hover:{Feature:ud}};function Ua(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let s=0;s<r;s++)if(t[s]!==e[s])return!1;return!0}function jd(e){const t={};return e.values.forEach((r,s)=>t[s]=r.get()),t}function Nd(e){const t={};return e.values.forEach((r,s)=>t[s]=r.getVelocity()),t}function cr(e,t,r){const s=e.getProps();return ps(s,t,r!==void 0?r:s.custom,jd(e),Nd(e))}let qt=re;const We=e=>e*1e3,Ne=e=>e/1e3,kd={current:!1},Ga=e=>Array.isArray(e)&&typeof e[0]=="number";function Wa(e){return!!(!e||typeof e=="string"&&Ha[e]||Ga(e)||Array.isArray(e)&&e.every(Wa))}const dt=([e,t,r,s])=>`cubic-bezier(${e}, ${t}, ${r}, ${s})`,Ha={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:dt([0,.65,.55,1]),circOut:dt([.55,0,1,.45]),backIn:dt([.31,.01,.66,-.59]),backOut:dt([.33,1.53,.69,.99])};function Ka(e){if(e)return Ga(e)?dt(e):Array.isArray(e)?e.map(Ka):Ha[e]}function Sd(e,t,r,{delay:s=0,duration:a,repeat:o=0,repeatType:i="loop",ease:l,times:d}={}){const c={[t]:r};d&&(c.offset=d);const f=Ka(l);return Array.isArray(f)&&(c.easing=f),e.animate(c,{delay:s,duration:a,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:o+1,direction:i==="reverse"?"alternate":"normal"})}function Cd(e,{repeat:t,repeatType:r="loop"}){const s=t&&r!=="loop"&&t%2===1?0:e.length-1;return e[s]}const qa=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,Pd=1e-7,Td=12;function Ad(e,t,r,s,a){let o,i,l=0;do i=t+(r-t)/2,o=qa(i,s,a)-e,o>0?r=i:t=i;while(Math.abs(o)>Pd&&++l<Td);return i}function St(e,t,r,s){if(e===t&&r===s)return re;const a=o=>Ad(o,0,1,e,r);return o=>o===0||o===1?o:qa(a(o),t,s)}const Dd=St(.42,0,1,1),Ed=St(0,0,.58,1),Ya=St(.42,0,.58,1),Md=e=>Array.isArray(e)&&typeof e[0]!="number",Xa=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Za=e=>t=>1-e(1-t),gs=e=>1-Math.sin(Math.acos(e)),Ja=Za(gs),Rd=Xa(gs),Qa=St(.33,1.53,.69,.99),xs=Za(Qa),Ld=Xa(xs),Id=e=>(e*=2)<1?.5*xs(e):.5*(2-Math.pow(2,-10*(e-1))),ln={linear:re,easeIn:Dd,easeInOut:Ya,easeOut:Ed,circIn:gs,circInOut:Rd,circOut:Ja,backIn:xs,backInOut:Ld,backOut:Qa,anticipate:Id},cn=e=>{if(Array.isArray(e)){qt(e.length===4);const[t,r,s,a]=e;return St(t,r,s,a)}else if(typeof e=="string")return qt(ln[e]!==void 0),ln[e];return e},ys=(e,t)=>r=>!!(Nt(r)&&_c.test(r)&&r.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(r,t)),ei=(e,t,r)=>s=>{if(!Nt(s))return s;const[a,o,i,l]=s.match(or);return{[e]:parseFloat(a),[t]:parseFloat(o),[r]:parseFloat(i),alpha:l!==void 0?parseFloat(l):1}},Vd=e=>Me(0,255,e),Nr={...qe,transform:e=>Math.round(Vd(e))},Ge={test:ys("rgb","red"),parse:ei("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:s=1})=>"rgba("+Nr.transform(e)+", "+Nr.transform(t)+", "+Nr.transform(r)+", "+mt(ft.transform(s))+")"};function Fd(e){let t="",r="",s="",a="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),s=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),s=e.substring(3,4),a=e.substring(4,5),t+=t,r+=r,s+=s,a+=a),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(s,16),alpha:a?parseInt(a,16)/255:1}}const Ur={test:ys("#"),parse:Fd,transform:Ge.transform},Qe={test:ys("hsl","hue"),parse:ei("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:s=1})=>"hsla("+Math.round(e)+", "+ye.transform(mt(t))+", "+ye.transform(mt(r))+", "+mt(ft.transform(s))+")"},de={test:e=>Ge.test(e)||Ur.test(e)||Qe.test(e),parse:e=>Ge.test(e)?Ge.parse(e):Qe.test(e)?Qe.parse(e):Ur.parse(e),transform:e=>Nt(e)?e:e.hasOwnProperty("red")?Ge.transform(e):Qe.transform(e)},ee=(e,t,r)=>-r*e+r*t+e;function kr(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function _d({hue:e,saturation:t,lightness:r,alpha:s}){e/=360,t/=100,r/=100;let a=0,o=0,i=0;if(!t)a=o=i=r;else{const l=r<.5?r*(1+t):r+t-r*t,d=2*r-l;a=kr(d,l,e+1/3),o=kr(d,l,e),i=kr(d,l,e-1/3)}return{red:Math.round(a*255),green:Math.round(o*255),blue:Math.round(i*255),alpha:s}}const Sr=(e,t,r)=>{const s=e*e;return Math.sqrt(Math.max(0,r*(t*t-s)+s))},Od=[Ur,Ge,Qe],Bd=e=>Od.find(t=>t.test(e));function dn(e){const t=Bd(e);let r=t.parse(e);return t===Qe&&(r=_d(r)),r}const ti=(e,t)=>{const r=dn(e),s=dn(t),a={...r};return o=>(a.red=Sr(r.red,s.red,o),a.green=Sr(r.green,s.green,o),a.blue=Sr(r.blue,s.blue,o),a.alpha=ee(r.alpha,s.alpha,o),Ge.transform(a))};function zd(e){var t,r;return isNaN(e)&&Nt(e)&&(((t=e.match(or))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(Pa))===null||r===void 0?void 0:r.length)||0)>0}const ri={regex:Vc,countKey:"Vars",token:"${v}",parse:re},si={regex:Pa,countKey:"Colors",token:"${c}",parse:de.parse},ni={regex:or,countKey:"Numbers",token:"${n}",parse:qe.parse};function Cr(e,{regex:t,countKey:r,token:s,parse:a}){const o=e.tokenised.match(t);o&&(e["num"+r]=o.length,e.tokenised=e.tokenised.replace(t,s),e.values.push(...o.map(a)))}function Yt(e){const t=e.toString(),r={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&Cr(r,ri),Cr(r,si),Cr(r,ni),r}function ai(e){return Yt(e).values}function ii(e){const{values:t,numColors:r,numVars:s,tokenised:a}=Yt(e),o=t.length;return i=>{let l=a;for(let d=0;d<o;d++)d<s?l=l.replace(ri.token,i[d]):d<s+r?l=l.replace(si.token,de.transform(i[d])):l=l.replace(ni.token,mt(i[d]));return l}}const $d=e=>typeof e=="number"?0:e;function Ud(e){const t=ai(e);return ii(e)(t.map($d))}const Re={test:zd,parse:ai,createTransformer:ii,getAnimatableNone:Ud},oi=(e,t)=>r=>`${r>0?t:e}`;function li(e,t){return typeof e=="number"?r=>ee(e,t,r):de.test(e)?ti(e,t):e.startsWith("var(")?oi(e,t):di(e,t)}const ci=(e,t)=>{const r=[...e],s=r.length,a=e.map((o,i)=>li(o,t[i]));return o=>{for(let i=0;i<s;i++)r[i]=a[i](o);return r}},Gd=(e,t)=>{const r={...e,...t},s={};for(const a in r)e[a]!==void 0&&t[a]!==void 0&&(s[a]=li(e[a],t[a]));return a=>{for(const o in s)r[o]=s[o](a);return r}},di=(e,t)=>{const r=Re.createTransformer(t),s=Yt(e),a=Yt(t);return s.numVars===a.numVars&&s.numColors===a.numColors&&s.numNumbers>=a.numNumbers?Ee(ci(s.values,a.values),r):oi(e,t)},vt=(e,t,r)=>{const s=t-e;return s===0?1:(r-e)/s},un=(e,t)=>r=>ee(e,t,r);function Wd(e){return typeof e=="number"?un:typeof e=="string"?de.test(e)?ti:di:Array.isArray(e)?ci:typeof e=="object"?Gd:un}function Hd(e,t,r){const s=[],a=r||Wd(e[0]),o=e.length-1;for(let i=0;i<o;i++){let l=a(e[i],e[i+1]);if(t){const d=Array.isArray(t)?t[i]||re:t;l=Ee(d,l)}s.push(l)}return s}function ui(e,t,{clamp:r=!0,ease:s,mixer:a}={}){const o=e.length;if(qt(o===t.length),o===1)return()=>t[0];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const i=Hd(t,s,a),l=i.length,d=c=>{let f=0;if(l>1)for(;f<e.length-2&&!(c<e[f+1]);f++);const u=vt(e[f],e[f+1],c);return i[f](u)};return r?c=>d(Me(e[0],e[o-1],c)):d}function Kd(e,t){const r=e[e.length-1];for(let s=1;s<=t;s++){const a=vt(0,t,s);e.push(ee(r,1,a))}}function qd(e){const t=[0];return Kd(t,e.length-1),t}function Yd(e,t){return e.map(r=>r*t)}function Xd(e,t){return e.map(()=>t||Ya).splice(0,e.length-1)}function Xt({duration:e=300,keyframes:t,times:r,ease:s="easeInOut"}){const a=Md(s)?s.map(cn):cn(s),o={done:!1,value:t[0]},i=Yd(r&&r.length===t.length?r:qd(t),e),l=ui(i,t,{ease:Array.isArray(a)?a:Xd(t,a)});return{calculatedDuration:e,next:d=>(o.value=l(d),o.done=d>=e,o)}}function fi(e,t){return t?e*(1e3/t):0}const Zd=5;function mi(e,t,r){const s=Math.max(t-Zd,0);return fi(r-e(s),t-s)}const Pr=.001,Jd=.01,Qd=10,eu=.05,tu=1;function ru({duration:e=800,bounce:t=.25,velocity:r=0,mass:s=1}){let a,o,i=1-t;i=Me(eu,tu,i),e=Me(Jd,Qd,Ne(e)),i<1?(a=c=>{const f=c*i,u=f*e,p=f-r,x=Gr(c,i),v=Math.exp(-u);return Pr-p/x*v},o=c=>{const u=c*i*e,p=u*r+r,x=Math.pow(i,2)*Math.pow(c,2)*e,v=Math.exp(-u),g=Gr(Math.pow(c,2),i);return(-a(c)+Pr>0?-1:1)*((p-x)*v)/g}):(a=c=>{const f=Math.exp(-c*e),u=(c-r)*e+1;return-Pr+f*u},o=c=>{const f=Math.exp(-c*e),u=(r-c)*(e*e);return f*u});const l=5/e,d=nu(a,o,l);if(e=We(e),isNaN(d))return{stiffness:100,damping:10,duration:e};{const c=Math.pow(d,2)*s;return{stiffness:c,damping:i*2*Math.sqrt(s*c),duration:e}}}const su=12;function nu(e,t,r){let s=r;for(let a=1;a<su;a++)s=s-e(s)/t(s);return s}function Gr(e,t){return e*Math.sqrt(1-t*t)}const au=["duration","bounce"],iu=["stiffness","damping","mass"];function fn(e,t){return t.some(r=>e[r]!==void 0)}function ou(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!fn(e,iu)&&fn(e,au)){const r=ru(e);t={...t,...r,mass:1},t.isResolvedFromDuration=!0}return t}function hi({keyframes:e,restDelta:t,restSpeed:r,...s}){const a=e[0],o=e[e.length-1],i={done:!1,value:a},{stiffness:l,damping:d,mass:c,duration:f,velocity:u,isResolvedFromDuration:p}=ou({...s,velocity:-Ne(s.velocity||0)}),x=u||0,v=d/(2*Math.sqrt(l*c)),g=o-a,k=Ne(Math.sqrt(l/c)),P=Math.abs(g)<5;r||(r=P?.01:2),t||(t=P?.005:.5);let A;if(v<1){const S=Gr(k,v);A=D=>{const C=Math.exp(-v*k*D);return o-C*((x+v*k*g)/S*Math.sin(S*D)+g*Math.cos(S*D))}}else if(v===1)A=S=>o-Math.exp(-k*S)*(g+(x+k*g)*S);else{const S=k*Math.sqrt(v*v-1);A=D=>{const C=Math.exp(-v*k*D),V=Math.min(S*D,300);return o-C*((x+v*k*g)*Math.sinh(V)+S*g*Math.cosh(V))/S}}return{calculatedDuration:p&&f||null,next:S=>{const D=A(S);if(p)i.done=S>=f;else{let C=x;S!==0&&(v<1?C=mi(A,S,D):C=0);const V=Math.abs(C)<=r,_=Math.abs(o-D)<=t;i.done=V&&_}return i.value=i.done?o:D,i}}}function mn({keyframes:e,velocity:t=0,power:r=.8,timeConstant:s=325,bounceDamping:a=10,bounceStiffness:o=500,modifyTarget:i,min:l,max:d,restDelta:c=.5,restSpeed:f}){const u=e[0],p={done:!1,value:u},x=F=>l!==void 0&&F<l||d!==void 0&&F>d,v=F=>l===void 0?d:d===void 0||Math.abs(l-F)<Math.abs(d-F)?l:d;let g=r*t;const k=u+g,P=i===void 0?k:i(k);P!==k&&(g=P-u);const A=F=>-g*Math.exp(-F/s),S=F=>P+A(F),D=F=>{const z=A(F),L=S(F);p.done=Math.abs(z)<=c,p.value=p.done?P:L};let C,V;const _=F=>{x(p.value)&&(C=F,V=hi({keyframes:[p.value,v(p.value)],velocity:mi(S,F,p.value),damping:a,stiffness:o,restDelta:c,restSpeed:f}))};return _(0),{calculatedDuration:null,next:F=>{let z=!1;return!V&&C===void 0&&(z=!0,D(F),_(F)),C!==void 0&&F>C?V.next(F-C):(!z&&D(F),p)}}}const lu=e=>{const t=({timestamp:r})=>e(r);return{start:()=>J.update(t,!0),stop:()=>Se(t),now:()=>ce.isProcessing?ce.timestamp:performance.now()}},hn=2e4;function pn(e){let t=0;const r=50;let s=e.next(t);for(;!s.done&&t<hn;)t+=r,s=e.next(t);return t>=hn?1/0:t}const cu={decay:mn,inertia:mn,tween:Xt,keyframes:Xt,spring:hi};function Zt({autoplay:e=!0,delay:t=0,driver:r=lu,keyframes:s,type:a="keyframes",repeat:o=0,repeatDelay:i=0,repeatType:l="loop",onPlay:d,onStop:c,onComplete:f,onUpdate:u,...p}){let x=1,v=!1,g,k;const P=()=>{k=new Promise(K=>{g=K})};P();let A;const S=cu[a]||Xt;let D;S!==Xt&&typeof s[0]!="number"&&(D=ui([0,100],s,{clamp:!1}),s=[0,100]);const C=S({...p,keyframes:s});let V;l==="mirror"&&(V=S({...p,keyframes:[...s].reverse(),velocity:-(p.velocity||0)}));let _="idle",F=null,z=null,L=null;C.calculatedDuration===null&&o&&(C.calculatedDuration=pn(C));const{calculatedDuration:B}=C;let $=1/0,H=1/0;B!==null&&($=B+i,H=$*(o+1)-i);let X=0;const oe=K=>{if(z===null)return;x>0&&(z=Math.min(z,K)),x<0&&(z=Math.min(K-H/x,z)),F!==null?X=F:X=Math.round(K-z)*x;const xe=X-t*(x>=0?1:-1),Ve=x>=0?xe<0:xe>H;X=Math.max(xe,0),_==="finished"&&F===null&&(X=H);let Ct=X,Pt=C;if(o){const nt=Math.min(X,H)/$;let Xe=Math.floor(nt),ve=nt%1;!ve&&nt>=1&&(ve=1),ve===1&&Xe--,Xe=Math.min(Xe,o+1),!!(Xe%2)&&(l==="reverse"?(ve=1-ve,i&&(ve-=i/$)):l==="mirror"&&(Pt=V)),Ct=Me(0,1,ve)*$}const Fe=Ve?{done:!1,value:s[0]}:Pt.next(Ct);D&&(Fe.value=D(Fe.value));let{done:Tt}=Fe;!Ve&&B!==null&&(Tt=x>=0?X>=H:X<=0);const dr=F===null&&(_==="finished"||_==="running"&&Tt);return u&&u(Fe.value),dr&&ge(),Fe},Q=()=>{A&&A.stop(),A=void 0},le=()=>{_="idle",Q(),g(),P(),z=L=null},ge=()=>{_="finished",f&&f(),Q(),g()},se=()=>{if(v)return;A||(A=r(oe));const K=A.now();d&&d(),F!==null?z=K-F:(!z||_==="finished")&&(z=K),_==="finished"&&P(),L=z,F=null,_="running",A.start()};e&&se();const Ye={then(K,xe){return k.then(K,xe)},get time(){return Ne(X)},set time(K){K=We(K),X=K,F!==null||!A||x===0?F=K:z=A.now()-K/x},get duration(){const K=C.calculatedDuration===null?pn(C):C.calculatedDuration;return Ne(K)},get speed(){return x},set speed(K){K===x||!A||(x=K,Ye.time=Ne(X))},get state(){return _},play:se,pause:()=>{_="paused",F=X},stop:()=>{v=!0,_!=="idle"&&(_="idle",c&&c(),le())},cancel:()=>{L!==null&&oe(L),le()},complete:()=>{_="finished"},sample:K=>(z=0,oe(K))};return Ye}function du(e){let t;return()=>(t===void 0&&(t=e()),t)}const uu=du(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),fu=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),It=10,mu=2e4,hu=(e,t)=>t.type==="spring"||e==="backgroundColor"||!Wa(t.ease);function pu(e,t,{onUpdate:r,onComplete:s,...a}){if(!(uu()&&fu.has(t)&&!a.repeatDelay&&a.repeatType!=="mirror"&&a.damping!==0&&a.type!=="inertia"))return!1;let i=!1,l,d,c=!1;const f=()=>{d=new Promise(S=>{l=S})};f();let{keyframes:u,duration:p=300,ease:x,times:v}=a;if(hu(t,a)){const S=Zt({...a,repeat:0,delay:0});let D={done:!1,value:u[0]};const C=[];let V=0;for(;!D.done&&V<mu;)D=S.sample(V),C.push(D.value),V+=It;v=void 0,u=C,p=V-It,x="linear"}const g=Sd(e.owner.current,t,u,{...a,duration:p,ease:x,times:v}),k=()=>{c=!1,g.cancel()},P=()=>{c=!0,J.update(k),l(),f()};return g.onfinish=()=>{c||(e.set(Cd(u,a)),s&&s(),P())},{then(S,D){return d.then(S,D)},attachTimeline(S){return g.timeline=S,g.onfinish=null,re},get time(){return Ne(g.currentTime||0)},set time(S){g.currentTime=We(S)},get speed(){return g.playbackRate},set speed(S){g.playbackRate=S},get duration(){return Ne(p)},play:()=>{i||(g.play(),Se(k))},pause:()=>g.pause(),stop:()=>{if(i=!0,g.playState==="idle")return;const{currentTime:S}=g;if(S){const D=Zt({...a,autoplay:!1});e.setWithVelocity(D.sample(S-It).value,D.sample(S).value,It)}P()},complete:()=>{c||g.finish()},cancel:P}}function gu({keyframes:e,delay:t,onUpdate:r,onComplete:s}){const a=()=>(r&&r(e[e.length-1]),s&&s(),{time:0,speed:1,duration:0,play:re,pause:re,stop:re,then:o=>(o(),Promise.resolve()),cancel:re,complete:re});return t?Zt({keyframes:[0,1],duration:0,delay:t,onComplete:a}):a()}const xu={type:"spring",stiffness:500,damping:25,restSpeed:10},yu=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),vu={type:"keyframes",duration:.8},bu={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},wu=(e,{keyframes:t})=>t.length>2?vu:Ke.has(e)?e.startsWith("scale")?yu(t[1]):xu:bu,Wr=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Re.test(t)||t==="0")&&!t.startsWith("url(")),ju=new Set(["brightness","contrast","saturate","opacity"]);function Nu(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=r.match(or)||[];if(!s)return e;const a=r.replace(s,"");let o=ju.has(t)?1:0;return s!==r&&(o*=100),t+"("+o+a+")"}const ku=/([a-z-]*)\(.*?\)/g,Hr={...Re,getAnimatableNone:e=>{const t=e.match(ku);return t?t.map(Nu).join(" "):e}},Su={...Ta,color:de,backgroundColor:de,outlineColor:de,fill:de,stroke:de,borderColor:de,borderTopColor:de,borderRightColor:de,borderBottomColor:de,borderLeftColor:de,filter:Hr,WebkitFilter:Hr},vs=e=>Su[e];function pi(e,t){let r=vs(e);return r!==Hr&&(r=Re),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const gi=e=>/^0[^.\s]+$/.test(e);function Cu(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||gi(e)}function Pu(e,t,r,s){const a=Wr(t,r);let o;Array.isArray(r)?o=[...r]:o=[null,r];const i=s.from!==void 0?s.from:e.get();let l;const d=[];for(let c=0;c<o.length;c++)o[c]===null&&(o[c]=c===0?i:o[c-1]),Cu(o[c])&&d.push(c),typeof o[c]=="string"&&o[c]!=="none"&&o[c]!=="0"&&(l=o[c]);if(a&&d.length&&l)for(let c=0;c<d.length;c++){const f=d[c];o[f]=pi(t,l)}return o}function Tu({when:e,delay:t,delayChildren:r,staggerChildren:s,staggerDirection:a,repeat:o,repeatType:i,repeatDelay:l,from:d,elapsed:c,...f}){return!!Object.keys(f).length}function bs(e,t){return e[t]||e.default||e}const Au={skipAnimations:!1},ws=(e,t,r,s={})=>a=>{const o=bs(s,e)||{},i=o.delay||s.delay||0;let{elapsed:l=0}=s;l=l-We(i);const d=Pu(t,e,r,o),c=d[0],f=d[d.length-1],u=Wr(e,c),p=Wr(e,f);let x={keyframes:d,velocity:t.getVelocity(),ease:"easeOut",...o,delay:-l,onUpdate:v=>{t.set(v),o.onUpdate&&o.onUpdate(v)},onComplete:()=>{a(),o.onComplete&&o.onComplete()}};if(Tu(o)||(x={...x,...wu(e,x)}),x.duration&&(x.duration=We(x.duration)),x.repeatDelay&&(x.repeatDelay=We(x.repeatDelay)),!u||!p||kd.current||o.type===!1||Au.skipAnimations)return gu(x);if(!s.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const v=pu(t,e,x);if(v)return v}return Zt(x)};function Jt(e){return!!(ue(e)&&e.add)}const xi=e=>/^\-?\d*\.?\d+$/.test(e);function js(e,t){e.indexOf(t)===-1&&e.push(t)}function Ns(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class ks{constructor(){this.subscriptions=[]}add(t){return js(this.subscriptions,t),()=>Ns(this.subscriptions,t)}notify(t,r,s){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,r,s);else for(let o=0;o<a;o++){const i=this.subscriptions[o];i&&i(t,r,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Du=e=>!isNaN(parseFloat(e));class Eu{constructor(t,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(s,a=!0)=>{this.prev=this.current,this.current=s;const{delta:o,timestamp:i}=ce;this.lastUpdated!==i&&(this.timeDelta=o,this.lastUpdated=i,J.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>J.postRender(this.velocityCheck),this.velocityCheck=({timestamp:s})=>{s!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=Du(this.current),this.owner=r.owner}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new ks);const s=this.events[t].add(r);return t==="change"?()=>{s(),J.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,s){this.set(r),this.prev=t,this.timeDelta=s}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?fi(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function rt(e,t){return new Eu(e,t)}const yi=e=>t=>t.test(e),Mu={test:e=>e==="auto",parse:e=>e},vi=[qe,U,ye,Te,Bc,Oc,Mu],lt=e=>vi.find(yi(e)),Ru=[...vi,de,Re],Lu=e=>Ru.find(yi(e));function Iu(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,rt(r))}function Vu(e,t){const r=cr(e,t);let{transitionEnd:s={},transition:a={},...o}=r?e.makeTargetAnimatable(r,!1):{};o={...o,...s};for(const i in o){const l=ed(o[i]);Iu(e,i,l)}}function Fu(e,t,r){var s,a;const o=Object.keys(t).filter(l=>!e.hasValue(l)),i=o.length;if(i)for(let l=0;l<i;l++){const d=o[l],c=t[d];let f=null;Array.isArray(c)&&(f=c[0]),f===null&&(f=(a=(s=r[d])!==null&&s!==void 0?s:e.readValue(d))!==null&&a!==void 0?a:t[d]),f!=null&&(typeof f=="string"&&(xi(f)||gi(f))?f=parseFloat(f):!Lu(f)&&Re.test(c)&&(f=pi(d,c)),e.addValue(d,rt(f,{owner:e})),r[d]===void 0&&(r[d]=f),f!==null&&e.setBaseTarget(d,f))}}function _u(e,t){return t?(t[e]||t.default||t).from:void 0}function Ou(e,t,r){const s={};for(const a in e){const o=_u(a,t);if(o!==void 0)s[a]=o;else{const i=r.getValue(a);i&&(s[a]=i.get())}}return s}function Bu({protectedKeys:e,needsAnimating:t},r){const s=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,s}function zu(e,t){const r=e.get();if(Array.isArray(t)){for(let s=0;s<t.length;s++)if(t[s]!==r)return!0}else return r!==t}function bi(e,t,{delay:r=0,transitionOverride:s,type:a}={}){let{transition:o=e.getDefaultTransition(),transitionEnd:i,...l}=e.makeTargetAnimatable(t);const d=e.getValue("willChange");s&&(o=s);const c=[],f=a&&e.animationState&&e.animationState.getState()[a];for(const u in l){const p=e.getValue(u),x=l[u];if(!p||x===void 0||f&&Bu(f,u))continue;const v={delay:r,elapsed:0,...bs(o||{},u)};if(window.HandoffAppearAnimations){const P=e.getProps()[wa];if(P){const A=window.HandoffAppearAnimations(P,u,p,J);A!==null&&(v.elapsed=A,v.isHandoff=!0)}}let g=!v.isHandoff&&!zu(p,x);if(v.type==="spring"&&(p.getVelocity()||v.velocity)&&(g=!1),p.animation&&(g=!1),g)continue;p.start(ws(u,p,x,e.shouldReduceMotion&&Ke.has(u)?{type:!1}:v));const k=p.animation;Jt(d)&&(d.add(u),k.then(()=>d.remove(u))),c.push(k)}return i&&Promise.all(c).then(()=>{i&&Vu(e,i)}),c}function Kr(e,t,r={}){const s=cr(e,t,r.custom);let{transition:a=e.getDefaultTransition()||{}}=s||{};r.transitionOverride&&(a=r.transitionOverride);const o=s?()=>Promise.all(bi(e,s,r)):()=>Promise.resolve(),i=e.variantChildren&&e.variantChildren.size?(d=0)=>{const{delayChildren:c=0,staggerChildren:f,staggerDirection:u}=a;return $u(e,t,c+d,f,u,r)}:()=>Promise.resolve(),{when:l}=a;if(l){const[d,c]=l==="beforeChildren"?[o,i]:[i,o];return d().then(()=>c())}else return Promise.all([o(),i(r.delay)])}function $u(e,t,r=0,s=0,a=1,o){const i=[],l=(e.variantChildren.size-1)*s,d=a===1?(c=0)=>c*s:(c=0)=>l-c*s;return Array.from(e.variantChildren).sort(Uu).forEach((c,f)=>{c.notify("AnimationStart",t),i.push(Kr(c,t,{...o,delay:r+d(f)}).then(()=>c.notify("AnimationComplete",t)))}),Promise.all(i)}function Uu(e,t){return e.sortNodePosition(t)}function Gu(e,t,r={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const a=t.map(o=>Kr(e,o,r));s=Promise.all(a)}else if(typeof t=="string")s=Kr(e,t,r);else{const a=typeof t=="function"?cr(e,t,r.custom):t;s=Promise.all(bi(e,a,r))}return s.then(()=>e.notify("AnimationComplete",t))}const Wu=[...is].reverse(),Hu=is.length;function Ku(e){return t=>Promise.all(t.map(({animation:r,options:s})=>Gu(e,r,s)))}function qu(e){let t=Ku(e);const r=Xu();let s=!0;const a=(d,c)=>{const f=cr(e,c);if(f){const{transition:u,transitionEnd:p,...x}=f;d={...d,...x,...p}}return d};function o(d){t=d(e)}function i(d,c){const f=e.getProps(),u=e.getVariantContext(!0)||{},p=[],x=new Set;let v={},g=1/0;for(let P=0;P<Hu;P++){const A=Wu[P],S=r[A],D=f[A]!==void 0?f[A]:u[A],C=xt(D),V=A===c?S.isActive:null;V===!1&&(g=P);let _=D===u[A]&&D!==f[A]&&C;if(_&&s&&e.manuallyAnimateOnMount&&(_=!1),S.protectedKeys={...v},!S.isActive&&V===null||!D&&!S.prevProp||ar(D)||typeof D=="boolean")continue;let z=Yu(S.prevProp,D)||A===c&&S.isActive&&!_&&C||P>g&&C,L=!1;const B=Array.isArray(D)?D:[D];let $=B.reduce(a,{});V===!1&&($={});const{prevResolvedValues:H={}}=S,X={...H,...$},oe=Q=>{z=!0,x.has(Q)&&(L=!0,x.delete(Q)),S.needsAnimating[Q]=!0};for(const Q in X){const le=$[Q],ge=H[Q];if(v.hasOwnProperty(Q))continue;let se=!1;Kt(le)&&Kt(ge)?se=!Ua(le,ge):se=le!==ge,se?le!==void 0?oe(Q):x.add(Q):le!==void 0&&x.has(Q)?oe(Q):S.protectedKeys[Q]=!0}S.prevProp=D,S.prevResolvedValues=$,S.isActive&&(v={...v,...$}),s&&e.blockInitialAnimation&&(z=!1),z&&(!_||L)&&p.push(...B.map(Q=>({animation:Q,options:{type:A,...d}})))}if(x.size){const P={};x.forEach(A=>{const S=e.getBaseTarget(A);S!==void 0&&(P[A]=S)}),p.push({animation:P})}let k=!!p.length;return s&&(f.initial===!1||f.initial===f.animate)&&!e.manuallyAnimateOnMount&&(k=!1),s=!1,k?t(p):Promise.resolve()}function l(d,c,f){var u;if(r[d].isActive===c)return Promise.resolve();(u=e.variantChildren)===null||u===void 0||u.forEach(x=>{var v;return(v=x.animationState)===null||v===void 0?void 0:v.setActive(d,c)}),r[d].isActive=c;const p=i(f,d);for(const x in r)r[x].protectedKeys={};return p}return{animateChanges:i,setActive:l,setAnimateFunction:o,getState:()=>r}}function Yu(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Ua(t,e):!1}function _e(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Xu(){return{animate:_e(!0),whileInView:_e(),whileHover:_e(),whileTap:_e(),whileDrag:_e(),whileFocus:_e(),exit:_e()}}class Zu extends Ie{constructor(t){super(t),t.animationState||(t.animationState=qu(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),ar(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let Ju=0;class Qu extends Ie{constructor(){super(...arguments),this.id=Ju++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r,custom:s}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===a)return;const o=this.node.animationState.setActive("exit",!t,{custom:s??this.node.getProps().custom});r&&!t&&o.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const ef={animation:{Feature:Zu},exit:{Feature:Qu}},gn=(e,t)=>Math.abs(e-t);function tf(e,t){const r=gn(e.x,t.x),s=gn(e.y,t.y);return Math.sqrt(r**2+s**2)}class wi{constructor(t,r,{transformPagePoint:s,contextWindow:a,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const u=Ar(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,x=tf(u.offset,{x:0,y:0})>=3;if(!p&&!x)return;const{point:v}=u,{timestamp:g}=ce;this.history.push({...v,timestamp:g});const{onStart:k,onMove:P}=this.handlers;p||(k&&k(this.lastMoveEvent,u),this.startEvent=this.lastMoveEvent),P&&P(this.lastMoveEvent,u)},this.handlePointerMove=(u,p)=>{this.lastMoveEvent=u,this.lastMoveEventInfo=Tr(p,this.transformPagePoint),J.update(this.updatePoint,!0)},this.handlePointerUp=(u,p)=>{this.end();const{onEnd:x,onSessionEnd:v,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=Ar(u.type==="pointercancel"?this.lastMoveEventInfo:Tr(p,this.transformPagePoint),this.history);this.startEvent&&x&&x(u,k),v&&v(u,k)},!_a(t))return;this.dragSnapToOrigin=o,this.handlers=r,this.transformPagePoint=s,this.contextWindow=a||window;const i=lr(t),l=Tr(i,this.transformPagePoint),{point:d}=l,{timestamp:c}=ce;this.history=[{...d,timestamp:c}];const{onSessionStart:f}=r;f&&f(t,Ar(l,this.history)),this.removeListeners=Ee(je(this.contextWindow,"pointermove",this.handlePointerMove),je(this.contextWindow,"pointerup",this.handlePointerUp),je(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Se(this.updatePoint)}}function Tr(e,t){return t?{point:t(e.point)}:e}function xn(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Ar({point:e},t){return{point:e,delta:xn(e,ji(t)),offset:xn(e,rf(t)),velocity:sf(t,.1)}}function rf(e){return e[0]}function ji(e){return e[e.length-1]}function sf(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,s=null;const a=ji(e);for(;r>=0&&(s=e[r],!(a.timestamp-s.timestamp>We(t)));)r--;if(!s)return{x:0,y:0};const o=Ne(a.timestamp-s.timestamp);if(o===0)return{x:0,y:0};const i={x:(a.x-s.x)/o,y:(a.y-s.y)/o};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function fe(e){return e.max-e.min}function qr(e,t=0,r=.01){return Math.abs(e-t)<=r}function yn(e,t,r,s=.5){e.origin=s,e.originPoint=ee(t.min,t.max,e.origin),e.scale=fe(r)/fe(t),(qr(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=ee(r.min,r.max,e.origin)-e.originPoint,(qr(e.translate)||isNaN(e.translate))&&(e.translate=0)}function ht(e,t,r,s){yn(e.x,t.x,r.x,s?s.originX:void 0),yn(e.y,t.y,r.y,s?s.originY:void 0)}function vn(e,t,r){e.min=r.min+t.min,e.max=e.min+fe(t)}function nf(e,t,r){vn(e.x,t.x,r.x),vn(e.y,t.y,r.y)}function bn(e,t,r){e.min=t.min-r.min,e.max=e.min+fe(t)}function pt(e,t,r){bn(e.x,t.x,r.x),bn(e.y,t.y,r.y)}function af(e,{min:t,max:r},s){return t!==void 0&&e<t?e=s?ee(t,e,s.min):Math.max(e,t):r!==void 0&&e>r&&(e=s?ee(r,e,s.max):Math.min(e,r)),e}function wn(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function of(e,{top:t,left:r,bottom:s,right:a}){return{x:wn(e.x,r,a),y:wn(e.y,t,s)}}function jn(e,t){let r=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,s]=[s,r]),{min:r,max:s}}function lf(e,t){return{x:jn(e.x,t.x),y:jn(e.y,t.y)}}function cf(e,t){let r=.5;const s=fe(e),a=fe(t);return a>s?r=vt(t.min,t.max-s,e.min):s>a&&(r=vt(e.min,e.max-a,t.min)),Me(0,1,r)}function df(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const Yr=.35;function uf(e=Yr){return e===!1?e=0:e===!0&&(e=Yr),{x:Nn(e,"left","right"),y:Nn(e,"top","bottom")}}function Nn(e,t,r){return{min:kn(e,t),max:kn(e,r)}}function kn(e,t){return typeof e=="number"?e:e[t]||0}const Sn=()=>({translate:0,scale:1,origin:0,originPoint:0}),et=()=>({x:Sn(),y:Sn()}),Cn=()=>({min:0,max:0}),ae=()=>({x:Cn(),y:Cn()});function pe(e){return[e("x"),e("y")]}function Ni({top:e,left:t,right:r,bottom:s}){return{x:{min:t,max:r},y:{min:e,max:s}}}function ff({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function mf(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:s.y,right:s.x}}function Dr(e){return e===void 0||e===1}function Xr({scale:e,scaleX:t,scaleY:r}){return!Dr(e)||!Dr(t)||!Dr(r)}function Oe(e){return Xr(e)||ki(e)||e.z||e.rotate||e.rotateX||e.rotateY}function ki(e){return Pn(e.x)||Pn(e.y)}function Pn(e){return e&&e!=="0%"}function Qt(e,t,r){const s=e-r,a=t*s;return r+a}function Tn(e,t,r,s,a){return a!==void 0&&(e=Qt(e,a,s)),Qt(e,r,s)+t}function Zr(e,t=0,r=1,s,a){e.min=Tn(e.min,t,r,s,a),e.max=Tn(e.max,t,r,s,a)}function Si(e,{x:t,y:r}){Zr(e.x,t.translate,t.scale,t.originPoint),Zr(e.y,r.translate,r.scale,r.originPoint)}function hf(e,t,r,s=!1){const a=r.length;if(!a)return;t.x=t.y=1;let o,i;for(let l=0;l<a;l++){o=r[l],i=o.projectionDelta;const d=o.instance;d&&d.style&&d.style.display==="contents"||(s&&o.options.layoutScroll&&o.scroll&&o!==o.root&&tt(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,Si(e,i)),s&&Oe(o.latestValues)&&tt(e,o.latestValues))}t.x=An(t.x),t.y=An(t.y)}function An(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Ae(e,t){e.min=e.min+t,e.max=e.max+t}function Dn(e,t,[r,s,a]){const o=t[a]!==void 0?t[a]:.5,i=ee(e.min,e.max,o);Zr(e,t[r],t[s],i,t.scale)}const pf=["x","scaleX","originX"],gf=["y","scaleY","originY"];function tt(e,t){Dn(e.x,t,pf),Dn(e.y,t,gf)}function Ci(e,t){return Ni(mf(e.getBoundingClientRect(),t))}function xf(e,t,r){const s=Ci(e,r),{scroll:a}=t;return a&&(Ae(s.x,a.offset.x),Ae(s.y,a.offset.y)),s}const Pi=({current:e})=>e?e.ownerDocument.defaultView:null,yf=new WeakMap;class vf{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ae(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=f=>{const{dragSnapToOrigin:u}=this.getProps();u?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(lr(f,"page").point)},o=(f,u)=>{const{drag:p,dragPropagation:x,onDragStart:v}=this.getProps();if(p&&!x&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Ba(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),pe(k=>{let P=this.getAxisMotionValue(k).get()||0;if(ye.test(P)){const{projection:A}=this.visualElement;if(A&&A.layout){const S=A.layout.layoutBox[k];S&&(P=fe(S)*(parseFloat(P)/100))}}this.originPoint[k]=P}),v&&J.update(()=>v(f,u),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},i=(f,u)=>{const{dragPropagation:p,dragDirectionLock:x,onDirectionLock:v,onDrag:g}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:k}=u;if(x&&this.currentDirection===null){this.currentDirection=bf(k),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",u.point,k),this.updateAxis("y",u.point,k),this.visualElement.render(),g&&g(f,u)},l=(f,u)=>this.stop(f,u),d=()=>pe(f=>{var u;return this.getAnimationState(f)==="paused"&&((u=this.getAxisMotionValue(f).animation)===null||u===void 0?void 0:u.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new wi(t,{onSessionStart:a,onStart:o,onMove:i,onSessionEnd:l,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:Pi(this.visualElement)})}stop(t,r){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:a}=r;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&J.update(()=>o(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,s){const{drag:a}=this.getProps();if(!s||!Vt(t,a,this.currentDirection))return;const o=this.getAxisMotionValue(t);let i=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(i=af(i,this.constraints[t],this.elastic[t])),o.set(i)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:s}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,o=this.constraints;r&&Je(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&a?this.constraints=of(a.layoutBox,r):this.constraints=!1,this.elastic=uf(s),o!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&pe(i=>{this.getAxisMotionValue(i)&&(this.constraints[i]=df(a.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Je(t))return!1;const s=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const o=xf(s,a.root,this.visualElement.getTransformPagePoint());let i=lf(a.layout.layoutBox,o);if(r){const l=r(ff(i));this.hasMutatedConstraints=!!l,l&&(i=Ni(l))}return i}startAnimation(t){const{drag:r,dragMomentum:s,dragElastic:a,dragTransition:o,dragSnapToOrigin:i,onDragTransitionEnd:l}=this.getProps(),d=this.constraints||{},c=pe(f=>{if(!Vt(f,r,this.currentDirection))return;let u=d&&d[f]||{};i&&(u={min:0,max:0});const p=a?200:1e6,x=a?40:1e7,v={type:"inertia",velocity:s?t[f]:0,bounceStiffness:p,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...o,...u};return this.startAxisValueAnimation(f,v)});return Promise.all(c).then(l)}startAxisValueAnimation(t,r){const s=this.getAxisMotionValue(t);return s.start(ws(t,s,0,r))}stopAnimation(){pe(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){pe(t=>{var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(t){const r="_drag"+t.toUpperCase(),s=this.visualElement.getProps(),a=s[r];return a||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){pe(r=>{const{drag:s}=this.getProps();if(!Vt(r,s,this.currentDirection))return;const{projection:a}=this.visualElement,o=this.getAxisMotionValue(r);if(a&&a.layout){const{min:i,max:l}=a.layout.layoutBox[r];o.set(t[r]-ee(i,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:s}=this.visualElement;if(!Je(r)||!s||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};pe(i=>{const l=this.getAxisMotionValue(i);if(l){const d=l.get();a[i]=cf({min:d,max:d},this.constraints[i])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),pe(i=>{if(!Vt(i,t,null))return;const l=this.getAxisMotionValue(i),{min:d,max:c}=this.constraints[i];l.set(ee(d,c,a[i]))})}addListeners(){if(!this.visualElement.current)return;yf.set(this.visualElement,this);const t=this.visualElement.current,r=je(t,"pointerdown",d=>{const{drag:c,dragListener:f=!0}=this.getProps();c&&f&&this.start(d)}),s=()=>{const{dragConstraints:d}=this.getProps();Je(d)&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,o=a.addEventListener("measure",s);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),s();const i=we(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:d,hasLayoutChanged:c})=>{this.isDragging&&c&&(pe(f=>{const u=this.getAxisMotionValue(f);u&&(this.originPoint[f]+=d[f].translate,u.set(u.get()+d[f].translate))}),this.visualElement.render())});return()=>{i(),r(),o(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:s=!1,dragPropagation:a=!1,dragConstraints:o=!1,dragElastic:i=Yr,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:s,dragPropagation:a,dragConstraints:o,dragElastic:i,dragMomentum:l}}}function Vt(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function bf(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class wf extends Ie{constructor(t){super(t),this.removeGroupControls=re,this.removeListeners=re,this.controls=new vf(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||re}unmount(){this.removeGroupControls(),this.removeListeners()}}const En=e=>(t,r)=>{e&&J.update(()=>e(t,r))};class jf extends Ie{constructor(){super(...arguments),this.removePointerDownListener=re}onPointerDown(t){this.session=new wi(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Pi(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:s,onPanEnd:a}=this.node.getProps();return{onSessionStart:En(t),onStart:En(r),onMove:s,onEnd:(o,i)=>{delete this.session,a&&J.update(()=>a(o,i))}}}mount(){this.removePointerDownListener=je(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Nf(){const e=N.useContext(sr);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:s}=e,a=N.useId();return N.useEffect(()=>s(a),[]),!t&&r?[!1,()=>r&&r(a)]:[!0]}const zt={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Mn(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ct={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(U.test(e))e=parseFloat(e);else return e;const r=Mn(e,t.target.x),s=Mn(e,t.target.y);return`${r}% ${s}%`}},kf={correct:(e,{treeScale:t,projectionDelta:r})=>{const s=e,a=Re.parse(e);if(a.length>5)return s;const o=Re.createTransformer(e),i=typeof a[0]!="number"?1:0,l=r.x.scale*t.x,d=r.y.scale*t.y;a[0+i]/=l,a[1+i]/=d;const c=ee(l,d,.5);return typeof a[2+i]=="number"&&(a[2+i]/=c),typeof a[3+i]=="number"&&(a[3+i]/=c),o(a)}};class Sf extends es.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:s,layoutId:a}=this.props,{projection:o}=t;Mc(Cf),o&&(r.group&&r.group.add(o),s&&s.register&&a&&s.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),zt.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:s,drag:a,isPresent:o}=this.props,i=s.projection;return i&&(i.isPresent=o,a||t.layoutDependency!==r||r===void 0?i.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?i.promote():i.relegate()||J.postRender(()=>{const l=i.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:s}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(a),s&&s.deregister&&s.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Ti(e){const[t,r]=Nf(),s=N.useContext(ls);return es.createElement(Sf,{...e,layoutGroup:s,switchLayoutGroup:N.useContext(Na),isPresent:t,safeToRemove:r})}const Cf={borderRadius:{...ct,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ct,borderTopRightRadius:ct,borderBottomLeftRadius:ct,borderBottomRightRadius:ct,boxShadow:kf},Ai=["TopLeft","TopRight","BottomLeft","BottomRight"],Pf=Ai.length,Rn=e=>typeof e=="string"?parseFloat(e):e,Ln=e=>typeof e=="number"||U.test(e);function Tf(e,t,r,s,a,o){a?(e.opacity=ee(0,r.opacity!==void 0?r.opacity:1,Af(s)),e.opacityExit=ee(t.opacity!==void 0?t.opacity:1,0,Df(s))):o&&(e.opacity=ee(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,s));for(let i=0;i<Pf;i++){const l=`border${Ai[i]}Radius`;let d=In(t,l),c=In(r,l);if(d===void 0&&c===void 0)continue;d||(d=0),c||(c=0),d===0||c===0||Ln(d)===Ln(c)?(e[l]=Math.max(ee(Rn(d),Rn(c),s),0),(ye.test(c)||ye.test(d))&&(e[l]+="%")):e[l]=c}(t.rotate||r.rotate)&&(e.rotate=ee(t.rotate||0,r.rotate||0,s))}function In(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Af=Di(0,.5,Ja),Df=Di(.5,.95,re);function Di(e,t,r){return s=>s<e?0:s>t?1:r(vt(e,t,s))}function Vn(e,t){e.min=t.min,e.max=t.max}function he(e,t){Vn(e.x,t.x),Vn(e.y,t.y)}function Fn(e,t,r,s,a){return e-=t,e=Qt(e,1/r,s),a!==void 0&&(e=Qt(e,1/a,s)),e}function Ef(e,t=0,r=1,s=.5,a,o=e,i=e){if(ye.test(t)&&(t=parseFloat(t),t=ee(i.min,i.max,t/100)-i.min),typeof t!="number")return;let l=ee(o.min,o.max,s);e===o&&(l-=t),e.min=Fn(e.min,t,r,l,a),e.max=Fn(e.max,t,r,l,a)}function _n(e,t,[r,s,a],o,i){Ef(e,t[r],t[s],t[a],t.scale,o,i)}const Mf=["x","scaleX","originX"],Rf=["y","scaleY","originY"];function On(e,t,r,s){_n(e.x,t,Mf,r?r.x:void 0,s?s.x:void 0),_n(e.y,t,Rf,r?r.y:void 0,s?s.y:void 0)}function Bn(e){return e.translate===0&&e.scale===1}function Ei(e){return Bn(e.x)&&Bn(e.y)}function Lf(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function Mi(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function zn(e){return fe(e.x)/fe(e.y)}class If{constructor(){this.members=[]}add(t){js(this.members,t),t.scheduleRender()}remove(t){if(Ns(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(a=>t===a);if(r===0)return!1;let s;for(let a=r;a>=0;a--){const o=this.members[a];if(o.isPresent!==!1){s=o;break}}return s?(this.promote(s),!0):!1}promote(t,r){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,r&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:s}=t;r.onExitComplete&&r.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function $n(e,t,r){let s="";const a=e.x.translate/t.x,o=e.y.translate/t.y;if((a||o)&&(s=`translate3d(${a}px, ${o}px, 0) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),r){const{rotate:d,rotateX:c,rotateY:f}=r;d&&(s+=`rotate(${d}deg) `),c&&(s+=`rotateX(${c}deg) `),f&&(s+=`rotateY(${f}deg) `)}const i=e.x.scale*t.x,l=e.y.scale*t.y;return(i!==1||l!==1)&&(s+=`scale(${i}, ${l})`),s||"none"}const Vf=(e,t)=>e.depth-t.depth;class Ff{constructor(){this.children=[],this.isDirty=!1}add(t){js(this.children,t),this.isDirty=!0}remove(t){Ns(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Vf),this.isDirty=!1,this.children.forEach(t)}}function _f(e,t){const r=performance.now(),s=({timestamp:a})=>{const o=a-r;o>=t&&(Se(s),e(o-t))};return J.read(s,!0),()=>Se(s)}function Of(e){window.MotionDebug&&window.MotionDebug.record(e)}function Bf(e){return e instanceof SVGElement&&e.tagName!=="svg"}function zf(e,t,r){const s=ue(e)?e:rt(e);return s.start(ws("",s,t,r)),s.animation}const Un=["","X","Y","Z"],$f={visibility:"hidden"},Gn=1e3;let Uf=0;const Be={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Ri({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:s,resetTransform:a}){return class{constructor(i={},l=t==null?void 0:t()){this.id=Uf++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Be.totalNodes=Be.resolvedTargetDeltas=Be.recalculatedProjection=0,this.nodes.forEach(Hf),this.nodes.forEach(Zf),this.nodes.forEach(Jf),this.nodes.forEach(Kf),Of(Be)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ff)}addEventListener(i,l){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new ks),this.eventHandlers.get(i).add(l)}notifyListeners(i,...l){const d=this.eventHandlers.get(i);d&&d.notify(...l)}hasListeners(i){return this.eventHandlers.has(i)}mount(i,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Bf(i),this.instance=i;const{layoutId:d,layout:c,visualElement:f}=this.options;if(f&&!f.current&&f.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(c||d)&&(this.isLayoutDirty=!0),e){let u;const p=()=>this.root.updateBlockedByResize=!1;e(i,()=>{this.root.updateBlockedByResize=!0,u&&u(),u=_f(p,250),zt.hasAnimatedSinceResize&&(zt.hasAnimatedSinceResize=!1,this.nodes.forEach(Hn))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&f&&(d||c)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:p,hasRelativeTargetChanged:x,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||f.getDefaultTransition()||sm,{onLayoutAnimationStart:k,onLayoutAnimationComplete:P}=f.getProps(),A=!this.targetLayout||!Mi(this.targetLayout,v)||x,S=!p&&x;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||p&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(u,S);const D={...bs(g,"layout"),onPlay:k,onComplete:P};(f.shouldReduceMotion||this.options.layoutRoot)&&(D.delay=0,D.type=!1),this.startAnimation(D)}else p||Hn(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Se(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Qf),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const u=this.path[f];u.shouldResetTransform=!0,u.updateScroll("snapshot"),u.options.layoutRoot&&u.willUpdate(!1)}const{layoutId:l,layout:d}=this.options;if(l===void 0&&!d)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Wn);return}this.isUpdating||this.nodes.forEach(Yf),this.isUpdating=!1,this.nodes.forEach(Xf),this.nodes.forEach(Gf),this.nodes.forEach(Wf),this.clearAllSnapshots();const l=performance.now();ce.delta=Me(0,1e3/60,l-ce.timestamp),ce.timestamp=l,ce.isProcessing=!0,br.update.process(ce),br.preRender.process(ce),br.render.process(ce),ce.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(qf),this.sharedNodes.forEach(em)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,J.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){J.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ae(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:i,isRoot:s(this.instance),offset:r(this.instance)})}resetTransform(){if(!a)return;const i=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!Ei(this.projectionDelta),d=this.getTransformTemplate(),c=d?d(this.latestValues,""):void 0,f=c!==this.prevTransformTemplateValue;i&&(l||Oe(this.latestValues)||f)&&(a(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const l=this.measurePageBox();let d=this.removeElementScroll(l);return i&&(d=this.removeTransform(d)),nm(d),{animationId:this.root.animationId,measuredBox:l,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:i}=this.options;if(!i)return ae();const l=i.measureViewportBox(),{scroll:d}=this.root;return d&&(Ae(l.x,d.offset.x),Ae(l.y,d.offset.y)),l}removeElementScroll(i){const l=ae();he(l,i);for(let d=0;d<this.path.length;d++){const c=this.path[d],{scroll:f,options:u}=c;if(c!==this.root&&f&&u.layoutScroll){if(f.isRoot){he(l,i);const{scroll:p}=this.root;p&&(Ae(l.x,-p.offset.x),Ae(l.y,-p.offset.y))}Ae(l.x,f.offset.x),Ae(l.y,f.offset.y)}}return l}applyTransform(i,l=!1){const d=ae();he(d,i);for(let c=0;c<this.path.length;c++){const f=this.path[c];!l&&f.options.layoutScroll&&f.scroll&&f!==f.root&&tt(d,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Oe(f.latestValues)&&tt(d,f.latestValues)}return Oe(this.latestValues)&&tt(d,this.latestValues),d}removeTransform(i){const l=ae();he(l,i);for(let d=0;d<this.path.length;d++){const c=this.path[d];if(!c.instance||!Oe(c.latestValues))continue;Xr(c.latestValues)&&c.updateSnapshot();const f=ae(),u=c.measurePageBox();he(f,u),On(l,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,f)}return Oe(this.latestValues)&&On(l,this.latestValues),l}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ce.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){var l;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==d;if(!(i||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:u,layoutId:p}=this.options;if(!(!this.layout||!(u||p))){if(this.resolvedRelativeTargetAt=ce.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ae(),this.relativeTargetOrigin=ae(),pt(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),he(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ae(),this.targetWithTransforms=ae()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),nf(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):he(this.target,this.layout.layoutBox),Si(this.target,this.targetDelta)):he(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ae(),this.relativeTargetOrigin=ae(),pt(this.relativeTargetOrigin,this.target,x.target),he(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Be.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Xr(this.parent.latestValues)||ki(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var i;const l=this.getLead(),d=!!this.resumingFrom||this!==l;let c=!0;if((this.isProjectionDirty||!((i=this.parent)===null||i===void 0)&&i.isProjectionDirty)&&(c=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ce.timestamp&&(c=!1),c)return;const{layout:f,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||u))return;he(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,x=this.treeScale.y;hf(this.layoutCorrected,this.treeScale,this.path,d),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:v}=l;if(!v){this.projectionTransform&&(this.projectionDelta=et(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=et(),this.projectionDeltaWithTransform=et());const g=this.projectionTransform;ht(this.projectionDelta,this.layoutCorrected,v,this.latestValues),this.projectionTransform=$n(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==p||this.treeScale.y!==x)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),Be.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),i){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(i,l=!1){const d=this.snapshot,c=d?d.latestValues:{},f={...this.latestValues},u=et();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const p=ae(),x=d?d.source:void 0,v=this.layout?this.layout.source:void 0,g=x!==v,k=this.getStack(),P=!k||k.members.length<=1,A=!!(g&&!P&&this.options.crossfade===!0&&!this.path.some(rm));this.animationProgress=0;let S;this.mixTargetDelta=D=>{const C=D/1e3;Kn(u.x,i.x,C),Kn(u.y,i.y,C),this.setTargetDelta(u),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(pt(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),tm(this.relativeTarget,this.relativeTargetOrigin,p,C),S&&Lf(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=ae()),he(S,this.relativeTarget)),g&&(this.animationValues=f,Tf(f,c,this.latestValues,C,A,P)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Se(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=J.update(()=>{zt.hasAnimatedSinceResize=!0,this.currentAnimation=zf(0,Gn,{...i,onUpdate:l=>{this.mixTargetDelta(l),i.onUpdate&&i.onUpdate(l)},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Gn),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:l,target:d,layout:c,latestValues:f}=i;if(!(!l||!d||!c)){if(this!==i&&this.layout&&c&&Li(this.options.animationType,this.layout.layoutBox,c.layoutBox)){d=this.target||ae();const u=fe(this.layout.layoutBox.x);d.x.min=i.target.x.min,d.x.max=d.x.min+u;const p=fe(this.layout.layoutBox.y);d.y.min=i.target.y.min,d.y.max=d.y.min+p}he(l,d),tt(l,f),ht(this.projectionDeltaWithTransform,this.layoutCorrected,l,f)}}registerSharedNode(i,l){this.sharedNodes.has(i)||this.sharedNodes.set(i,new If),this.sharedNodes.get(i).add(l);const c=l.options.initialPromotionConfig;l.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(l):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){var i;const{layoutId:l}=this.options;return l?((i=this.getStack())===null||i===void 0?void 0:i.lead)||this:this}getPrevLead(){var i;const{layoutId:l}=this.options;return l?(i=this.getStack())===null||i===void 0?void 0:i.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:l,preserveFollowOpacity:d}={}){const c=this.getStack();c&&c.promote(this,d),i&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetRotation(){const{visualElement:i}=this.options;if(!i)return;let l=!1;const{latestValues:d}=i;if((d.rotate||d.rotateX||d.rotateY||d.rotateZ)&&(l=!0),!l)return;const c={};for(let f=0;f<Un.length;f++){const u="rotate"+Un[f];d[u]&&(c[u]=d[u],i.setStaticValue(u,0))}i.render();for(const f in c)i.setStaticValue(f,c[f]);i.scheduleRender()}getProjectionStyles(i){var l,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return $f;const c={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Bt(i==null?void 0:i.pointerEvents)||"",c.transform=f?f(this.latestValues,""):"none",c;const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Bt(i==null?void 0:i.pointerEvents)||""),this.hasProjected&&!Oe(this.latestValues)&&(g.transform=f?f({},""):"none",this.hasProjected=!1),g}const p=u.animationValues||u.latestValues;this.applyTransformsToTarget(),c.transform=$n(this.projectionDeltaWithTransform,this.treeScale,p),f&&(c.transform=f(p,c.transform));const{x,y:v}=this.projectionDelta;c.transformOrigin=`${x.origin*100}% ${v.origin*100}% 0`,u.animationValues?c.opacity=u===this?(d=(l=p.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=u===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const g in Wt){if(p[g]===void 0)continue;const{correct:k,applyTo:P}=Wt[g],A=c.transform==="none"?p[g]:k(p[g],u);if(P){const S=P.length;for(let D=0;D<S;D++)c[P[D]]=A}else c[g]=A}return this.options.layoutId&&(c.pointerEvents=u===this?Bt(i==null?void 0:i.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>{var l;return(l=i.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(Wn),this.root.sharedNodes.clear()}}}function Gf(e){e.updateLayout()}function Wf(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:a}=e.layout,{animationType:o}=e.options,i=r.source!==e.layout.source;o==="size"?pe(u=>{const p=i?r.measuredBox[u]:r.layoutBox[u],x=fe(p);p.min=s[u].min,p.max=p.min+x}):Li(o,r.layoutBox,s)&&pe(u=>{const p=i?r.measuredBox[u]:r.layoutBox[u],x=fe(s[u]);p.max=p.min+x,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[u].max=e.relativeTarget[u].min+x)});const l=et();ht(l,s,r.layoutBox);const d=et();i?ht(d,e.applyTransform(a,!0),r.measuredBox):ht(d,s,r.layoutBox);const c=!Ei(l);let f=!1;if(!e.resumeFrom){const u=e.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:p,layout:x}=u;if(p&&x){const v=ae();pt(v,r.layoutBox,p.layoutBox);const g=ae();pt(g,s,x.layoutBox),Mi(v,g)||(f=!0),u.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=v,e.relativeParent=u)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:r,delta:d,layoutDelta:l,hasLayoutChanged:c,hasRelativeTargetChanged:f})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function Hf(e){Be.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Kf(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function qf(e){e.clearSnapshot()}function Wn(e){e.clearMeasurements()}function Yf(e){e.isLayoutDirty=!1}function Xf(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Hn(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Zf(e){e.resolveTargetDelta()}function Jf(e){e.calcProjection()}function Qf(e){e.resetRotation()}function em(e){e.removeLeadSnapshot()}function Kn(e,t,r){e.translate=ee(t.translate,0,r),e.scale=ee(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function qn(e,t,r,s){e.min=ee(t.min,r.min,s),e.max=ee(t.max,r.max,s)}function tm(e,t,r,s){qn(e.x,t.x,r.x,s),qn(e.y,t.y,r.y,s)}function rm(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const sm={duration:.45,ease:[.4,0,.1,1]},Yn=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),Xn=Yn("applewebkit/")&&!Yn("chrome/")?Math.round:re;function Zn(e){e.min=Xn(e.min),e.max=Xn(e.max)}function nm(e){Zn(e.x),Zn(e.y)}function Li(e,t,r){return e==="position"||e==="preserve-aspect"&&!qr(zn(t),zn(r),.2)}const am=Ri({attachResizeListener:(e,t)=>we(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Er={current:void 0},Ii=Ri({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Er.current){const e=new am({});e.mount(window),e.setOptions({layoutScroll:!0}),Er.current=e}return Er.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),im={pan:{Feature:jf},drag:{Feature:wf,ProjectionNode:Ii,MeasureLayout:Ti}},om=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function lm(e){const t=om.exec(e);if(!t)return[,];const[,r,s]=t;return[r,s]}function Jr(e,t,r=1){const[s,a]=lm(e);if(!s)return;const o=window.getComputedStyle(t).getPropertyValue(s);if(o){const i=o.trim();return xi(i)?parseFloat(i):i}else return zr(a)?Jr(a,t,r+1):a}function cm(e,{...t},r){const s=e.current;if(!(s instanceof Element))return{target:t,transitionEnd:r};r&&(r={...r}),e.values.forEach(a=>{const o=a.get();if(!zr(o))return;const i=Jr(o,s);i&&a.set(i)});for(const a in t){const o=t[a];if(!zr(o))continue;const i=Jr(o,s);i&&(t[a]=i,r||(r={}),r[a]===void 0&&(r[a]=o))}return{target:t,transitionEnd:r}}const dm=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Vi=e=>dm.has(e),um=e=>Object.keys(e).some(Vi),Jn=e=>e===qe||e===U,Qn=(e,t)=>parseFloat(e.split(", ")[t]),ea=(e,t)=>(r,{transform:s})=>{if(s==="none"||!s)return 0;const a=s.match(/^matrix3d\((.+)\)$/);if(a)return Qn(a[1],t);{const o=s.match(/^matrix\((.+)\)$/);return o?Qn(o[1],e):0}},fm=new Set(["x","y","z"]),mm=jt.filter(e=>!fm.has(e));function hm(e){const t=[];return mm.forEach(r=>{const s=e.getValue(r);s!==void 0&&(t.push([r,s.get()]),s.set(r.startsWith("scale")?1:0))}),t.length&&e.render(),t}const st={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:ea(4,13),y:ea(5,14)};st.translateX=st.x;st.translateY=st.y;const pm=(e,t,r)=>{const s=t.measureViewportBox(),a=t.current,o=getComputedStyle(a),{display:i}=o,l={};i==="none"&&t.setStaticValue("display",e.display||"block"),r.forEach(c=>{l[c]=st[c](s,o)}),t.render();const d=t.measureViewportBox();return r.forEach(c=>{const f=t.getValue(c);f&&f.jump(l[c]),e[c]=st[c](d,o)}),e},gm=(e,t,r={},s={})=>{t={...t},s={...s};const a=Object.keys(t).filter(Vi);let o=[],i=!1;const l=[];if(a.forEach(d=>{const c=e.getValue(d);if(!e.hasValue(d))return;let f=r[d],u=lt(f);const p=t[d];let x;if(Kt(p)){const v=p.length,g=p[0]===null?1:0;f=p[g],u=lt(f);for(let k=g;k<v&&p[k]!==null;k++)x?qt(lt(p[k])===x):x=lt(p[k])}else x=lt(p);if(u!==x)if(Jn(u)&&Jn(x)){const v=c.get();typeof v=="string"&&c.set(parseFloat(v)),typeof p=="string"?t[d]=parseFloat(p):Array.isArray(p)&&x===U&&(t[d]=p.map(parseFloat))}else u!=null&&u.transform&&(x!=null&&x.transform)&&(f===0||p===0)?f===0?c.set(x.transform(f)):t[d]=u.transform(p):(i||(o=hm(e),i=!0),l.push(d),s[d]=s[d]!==void 0?s[d]:t[d],c.jump(p))}),l.length){const d=l.indexOf("height")>=0?window.pageYOffset:null,c=pm(t,e,l);return o.length&&o.forEach(([f,u])=>{e.getValue(f).set(u)}),e.render(),nr&&d!==null&&window.scrollTo({top:d}),{target:c,transitionEnd:s}}else return{target:t,transitionEnd:s}};function xm(e,t,r,s){return um(t)?gm(e,t,r,s):{target:t,transitionEnd:s}}const ym=(e,t,r,s)=>{const a=cm(e,t,s);return t=a.target,s=a.transitionEnd,xm(e,t,r,s)},Qr={current:null},Fi={current:!1};function vm(){if(Fi.current=!0,!!nr)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Qr.current=e.matches;e.addListener(t),t()}else Qr.current=!1}function bm(e,t,r){const{willChange:s}=t;for(const a in t){const o=t[a],i=r[a];if(ue(o))e.addValue(a,o),Jt(s)&&s.add(a);else if(ue(i))e.addValue(a,rt(o,{owner:e})),Jt(s)&&s.remove(a);else if(i!==o)if(e.hasValue(a)){const l=e.getValue(a);!l.hasAnimated&&l.set(o)}else{const l=e.getStaticValue(a);e.addValue(a,rt(l!==void 0?l:o,{owner:e}))}}for(const a in r)t[a]===void 0&&e.removeValue(a);return t}const ta=new WeakMap,_i=Object.keys(yt),wm=_i.length,ra=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],jm=os.length;class Nm{constructor({parent:t,props:r,presenceContext:s,reducedMotionConfig:a,visualState:o},i={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>J.render(this.render,!1,!0);const{latestValues:l,renderState:d}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=d,this.parent=t,this.props=r,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=i,this.isControllingVariants=ir(r),this.isVariantNode=ja(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:c,...f}=this.scrapeMotionValuesFromProps(r,{});for(const u in f){const p=f[u];l[u]!==void 0&&ue(p)&&(p.set(l[u],!1),Jt(c)&&c.add(u))}}scrapeMotionValuesFromProps(t,r){return{}}mount(t){this.current=t,ta.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),Fi.current||vm(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Qr.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){ta.delete(this.current),this.projection&&this.projection.unmount(),Se(this.notifyUpdate),Se(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,r){const s=Ke.has(t),a=r.on("change",i=>{this.latestValues[t]=i,this.props.onUpdate&&J.update(this.notifyUpdate,!1,!0),s&&this.projection&&(this.projection.isTransformDirty=!0)}),o=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{a(),o()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...r},s,a,o){let i,l;for(let d=0;d<wm;d++){const c=_i[d],{isEnabled:f,Feature:u,ProjectionNode:p,MeasureLayout:x}=yt[c];p&&(i=p),f(r)&&(!this.features[c]&&u&&(this.features[c]=new u(this)),x&&(l=x))}if((this.type==="html"||this.type==="svg")&&!this.projection&&i){this.projection=new i(this.latestValues,this.parent&&this.parent.projection);const{layoutId:d,layout:c,drag:f,dragConstraints:u,layoutScroll:p,layoutRoot:x}=r;this.projection.setOptions({layoutId:d,layout:c,alwaysMeasureLayout:!!f||u&&Je(u),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:o,layoutScroll:p,layoutRoot:x})}return l}updateFeatures(){for(const t in this.features){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ae()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}makeTargetAnimatable(t,r=!0){return this.makeTargetAnimatableFromInstance(t,this.props,r)}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let s=0;s<ra.length;s++){const a=ra[s];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const o=t["on"+a];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=bm(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const s=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(s.initial=this.props.initial),s}const r={};for(let s=0;s<jm;s++){const a=os[s],o=this.props[a];(xt(o)||o===!1)&&(r[a]=o)}return r}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){r!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,r)),this.values.set(t,r),this.latestValues[t]=r.get()}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&r!==void 0&&(s=rt(r,{owner:this}),this.addValue(t,s)),s}readValue(t){var r;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:s}=this.props,a=typeof s=="string"||typeof s=="object"?(r=ps(this.props,s))===null||r===void 0?void 0:r[t]:void 0;if(s&&a!==void 0)return a;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!ue(o)?o:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new ks),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class Oi extends Nm{sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:s}){delete r[t],delete s[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:r,...s},{transformValues:a},o){let i=Ou(s,t||{},this);if(a&&(r&&(r=a(r)),s&&(s=a(s)),i&&(i=a(i))),o){Fu(this,s,i);const l=ym(this,s,i,r);r=l.transitionEnd,s=l.target}return{transition:t,transitionEnd:r,...s}}}function km(e){return window.getComputedStyle(e)}class Sm extends Oi{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,r){if(Ke.has(r)){const s=vs(r);return s&&s.default||0}else{const s=km(t),a=(Ca(r)?s.getPropertyValue(r):s[r])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:r}){return Ci(t,r)}build(t,r,s,a){ds(t,r,s,a.transformTemplate)}scrapeMotionValuesFromProps(t,r){return hs(t,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ue(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(t,r,s,a){Ma(t,r,s,a)}}class Cm extends Oi{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Ke.has(r)){const s=vs(r);return s&&s.default||0}return r=Ra.has(r)?r:as(r),t.getAttribute(r)}measureInstanceViewportBox(){return ae()}scrapeMotionValuesFromProps(t,r){return Ia(t,r)}build(t,r,s,a){fs(t,r,s,this.isSVGTag,a.transformTemplate)}renderInstance(t,r,s,a){La(t,r,s,a)}mount(t){this.isSVGTag=ms(t.tagName),super.mount(t)}}const Pm=(e,t)=>cs(e)?new Cm(t,{enableHardwareAcceleration:!1}):new Sm(t,{enableHardwareAcceleration:!0}),Tm={layout:{ProjectionNode:Ii,MeasureLayout:Ti}},Am={...ef,...wd,...im,...Tm},ie=Dc((e,t)=>ld(e,t,Am,Pm));function Bi(){const e=N.useRef(!1);return ns(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Dm(){const e=Bi(),[t,r]=N.useState(0),s=N.useCallback(()=>{e.current&&r(t+1)},[t]);return[N.useCallback(()=>J.postRender(s),[s]),t]}class Em extends N.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=r.offsetHeight||0,s.width=r.offsetWidth||0,s.top=r.offsetTop,s.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Mm({children:e,isPresent:t}){const r=N.useId(),s=N.useRef(null),a=N.useRef({width:0,height:0,top:0,left:0});return N.useInsertionEffect(()=>{const{width:o,height:i,top:l,left:d}=a.current;if(t||!s.current||!o||!i)return;s.current.dataset.motionPopId=r;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${i}px !important;
            top: ${l}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[t]),N.createElement(Em,{isPresent:t,childRef:s,sizeRef:a},N.cloneElement(e,{ref:s}))}const Mr=({children:e,initial:t,isPresent:r,onExitComplete:s,custom:a,presenceAffectsLayout:o,mode:i})=>{const l=Va(Rm),d=N.useId(),c=N.useMemo(()=>({id:d,initial:t,isPresent:r,custom:a,onExitComplete:f=>{l.set(f,!0);for(const u of l.values())if(!u)return;s&&s()},register:f=>(l.set(f,!1),()=>l.delete(f))}),o?void 0:[r]);return N.useMemo(()=>{l.forEach((f,u)=>l.set(u,!1))},[r]),N.useEffect(()=>{!r&&!l.size&&s&&s()},[r]),i==="popLayout"&&(e=N.createElement(Mm,{isPresent:r},e)),N.createElement(sr.Provider,{value:c},e)};function Rm(){return new Map}function Lm(e){return N.useEffect(()=>()=>e(),[])}const ze=e=>e.key||"";function Im(e,t){e.forEach(r=>{const s=ze(r);t.set(s,r)})}function Vm(e){const t=[];return N.Children.forEach(e,r=>{N.isValidElement(r)&&t.push(r)}),t}const bt=({children:e,custom:t,initial:r=!0,onExitComplete:s,exitBeforeEnter:a,presenceAffectsLayout:o=!0,mode:i="sync"})=>{const l=N.useContext(ls).forceRender||Dm()[0],d=Bi(),c=Vm(e);let f=c;const u=N.useRef(new Map).current,p=N.useRef(f),x=N.useRef(new Map).current,v=N.useRef(!0);if(ns(()=>{v.current=!1,Im(c,x),p.current=f}),Lm(()=>{v.current=!0,x.clear(),u.clear()}),v.current)return N.createElement(N.Fragment,null,f.map(A=>N.createElement(Mr,{key:ze(A),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:o,mode:i},A)));f=[...f];const g=p.current.map(ze),k=c.map(ze),P=g.length;for(let A=0;A<P;A++){const S=g[A];k.indexOf(S)===-1&&!u.has(S)&&u.set(S,void 0)}return i==="wait"&&u.size&&(f=[]),u.forEach((A,S)=>{if(k.indexOf(S)!==-1)return;const D=x.get(S);if(!D)return;const C=g.indexOf(S);let V=A;if(!V){const _=()=>{u.delete(S);const F=Array.from(x.keys()).filter(z=>!k.includes(z));if(F.forEach(z=>x.delete(z)),p.current=c.filter(z=>{const L=ze(z);return L===S||F.includes(L)}),!u.size){if(d.current===!1)return;l(),s&&s()}};V=N.createElement(Mr,{key:ze(D),isPresent:!1,onExitComplete:_,custom:t,presenceAffectsLayout:o,mode:i},D),u.set(S,V)}f.splice(C,0,V)}),f=f.map(A=>{const S=A.key;return u.has(S)?A:N.createElement(Mr,{key:ze(A),isPresent:!0,presenceAffectsLayout:o,mode:i},A)}),N.createElement(N.Fragment,null,u.size?f:f.map(A=>N.cloneElement(A)))},zi=()=>{const[e,t]=N.useState(()=>localStorage.getItem("diet-theme")||"auto"),[r,s]=N.useState(!1);N.useEffect(()=>{const i=()=>{let c=!1;e==="dark"?c=!0:e==="light"?c=!1:c=window.matchMedia("(prefers-color-scheme: dark)").matches,s(c);const f=document.documentElement;c?f.classList.add("dark"):f.classList.remove("dark"),f.offsetHeight};i();const l=window.matchMedia("(prefers-color-scheme: dark)"),d=()=>{e==="auto"&&i()};return l.addEventListener("change",d),()=>l.removeEventListener("change",d)},[e]);const a=i=>{t(i),localStorage.setItem("diet-theme",i);const l={light:"Tema Chiaro",dark:"Tema Scuro",auto:"Automatico"};q.success(`Tema cambiato: ${l[i]}`)};return{theme:e,isDark:r,changeTheme:a,toggleTheme:()=>{a(r?"light":"dark")}}},Fm=({className:e="",showLabel:t=!1})=>{const{theme:r,changeTheme:s}=zi(),a=[{value:"light",icon:n.jsx(ac,{className:"w-4 h-4"}),label:"Chiaro"},{value:"dark",icon:n.jsx(Ql,{className:"w-4 h-4"}),label:"Scuro"},{value:"auto",icon:n.jsx(ga,{className:"w-4 h-4"}),label:"Auto"}],o=a.findIndex(l=>l.value===r),i=()=>{const l=(o+1)%a.length;s(a[l].value)};return n.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[t&&n.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Tema:"}),n.jsxs(ie.button,{onClick:i,className:e||"floating-button",whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":`Cambia tema (attuale: ${a[o].label})`,children:[n.jsx(bt,{mode:"wait",children:n.jsx(ie.div,{initial:{opacity:0,rotate:-180,scale:.5},animate:{opacity:1,rotate:0,scale:1},exit:{opacity:0,rotate:180,scale:.5},transition:{duration:.3,ease:"easeInOut"},className:"text-gray-600 dark:text-gray-400",children:a[o].icon},r)}),n.jsx(ie.div,{className:"absolute -bottom-1 -right-1 w-3 h-3 rounded-full bg-primary-500",initial:{scale:0},animate:{scale:1},transition:{delay:.2}})]}),t&&n.jsx(ie.span,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"text-sm text-gray-600 dark:text-gray-400 min-w-[50px]",children:a[o].label},r)]})},sa={highContrast:!1,largeText:!1,reducedMotion:!1,screenReaderOptimized:!1,keyboardFriendly:!0},$i=()=>{const[e,t]=N.useState(()=>{const f=localStorage.getItem("accessibility-settings");return f?JSON.parse(f):sa});N.useEffect(()=>{localStorage.setItem("accessibility-settings",JSON.stringify(e)),r()},[e]);const r=()=>{e.highContrast?document.documentElement.classList.add("high-contrast"):document.documentElement.classList.remove("high-contrast"),e.largeText?document.documentElement.classList.add("large-text"):document.documentElement.classList.remove("large-text"),e.reducedMotion?document.documentElement.classList.add("reduced-motion"):document.documentElement.classList.remove("reduced-motion"),e.screenReaderOptimized?document.documentElement.classList.add("screen-reader"):document.documentElement.classList.remove("screen-reader"),e.keyboardFriendly?document.documentElement.classList.add("keyboard-friendly"):document.documentElement.classList.remove("keyboard-friendly")},s=f=>{t(x=>({...x,...f}));const u={highContrast:"Alto contrasto",largeText:"Testo grande",reducedMotion:"Movimento ridotto",screenReaderOptimized:"Ottimizzazione screen reader",keyboardFriendly:"Navigazione da tastiera"},p=Object.entries(f).map(([x,v])=>`${u[x]}: ${v?"Attivato":"Disattivato"}`).join(", ");q.success(`Impostazioni aggiornate: ${p}`)};return{settings:e,updateSettings:s,toggleHighContrast:()=>{s({highContrast:!e.highContrast})},toggleLargeText:()=>{s({largeText:!e.largeText})},toggleReducedMotion:()=>{s({reducedMotion:!e.reducedMotion})},toggleScreenReaderOptimized:()=>{s({screenReaderOptimized:!e.screenReaderOptimized})},toggleKeyboardFriendly:()=>{s({keyboardFriendly:!e.keyboardFriendly})},resetSettings:()=>{t(sa),q.success("Impostazioni di accessibilità ripristinate")}}},_m=({isOpen:e,onClose:t})=>{const{settings:r,toggleHighContrast:s,toggleLargeText:a,toggleReducedMotion:o,toggleScreenReaderOptimized:i,toggleKeyboardFriendly:l,resetSettings:d}=$i(),c=f=>{f.key==="Escape"&&t()};return n.jsx(bt,{children:e&&n.jsx(n.Fragment,{children:n.jsx(ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"modal-overlay",onClick:t,children:n.jsxs(ie.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{type:"spring",damping:25},className:"modal-panel",role:"dialog","aria-modal":"true","aria-labelledby":"accessibility-title",onKeyDown:c,onClick:f=>f.stopPropagation(),children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-primary-100 dark:bg-primary-900/30 rounded-lg",children:n.jsx(ma,{className:"w-6 h-6 text-primary-600 dark:text-primary-400"})}),n.jsx("h2",{id:"accessibility-title",className:"text-xl font-semibold text-primary dark:text-white",children:"Impostazioni Accessibilità"})]}),n.jsx("button",{onClick:t,className:"modal-close","aria-label":"Chiudi pannello accessibilità",children:n.jsx(gt,{className:"w-6 h-6 text-secondary dark:text-gray-400"})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"flex items-center h-6",children:n.jsx("input",{id:"high-contrast",type:"checkbox",checked:r.highContrast,onChange:s,className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"})}),n.jsxs("div",{className:"ml-3",children:[n.jsxs("label",{htmlFor:"high-contrast",className:"flex items-center gap-2 text-base font-medium text-gray-900 dark:text-white",children:[n.jsx(ql,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),"Modalità Alto Contrasto"]}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Aumenta il contrasto dei colori per migliorare la leggibilità."})]})]}),n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"flex items-center h-6",children:n.jsx("input",{id:"large-text",type:"checkbox",checked:r.largeText,onChange:a,className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"})}),n.jsxs("div",{className:"ml-3",children:[n.jsxs("label",{htmlFor:"large-text",className:"flex items-center gap-2 text-base font-medium text-gray-900 dark:text-white",children:[n.jsx(ic,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),"Testo Grande"]}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Aumenta la dimensione del testo per una migliore leggibilità."})]})]}),n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"flex items-center h-6",children:n.jsx("input",{id:"reduced-motion",type:"checkbox",checked:r.reducedMotion,onChange:o,className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"})}),n.jsxs("div",{className:"ml-3",children:[n.jsxs("label",{htmlFor:"reduced-motion",className:"flex items-center gap-2 text-base font-medium text-gray-900 dark:text-white",children:[n.jsx(ss,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),"Movimento Ridotto"]}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Riduce o elimina le animazioni e gli effetti di movimento."})]})]}),n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"flex items-center h-6",children:n.jsx("input",{id:"screen-reader",type:"checkbox",checked:r.screenReaderOptimized,onChange:i,className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"})}),n.jsxs("div",{className:"ml-3",children:[n.jsxs("label",{htmlFor:"screen-reader",className:"flex items-center gap-2 text-base font-medium text-gray-900 dark:text-white",children:[n.jsx(ga,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),"Ottimizzazione Screen Reader"]}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Migliora la compatibilità con i lettori di schermo."})]})]}),n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"flex items-center h-6",children:n.jsx("input",{id:"keyboard-friendly",type:"checkbox",checked:r.keyboardFriendly,onChange:l,className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"})}),n.jsxs("div",{className:"ml-3",children:[n.jsxs("label",{htmlFor:"keyboard-friendly",className:"flex items-center gap-2 text-base font-medium text-gray-900 dark:text-white",children:[n.jsx(Yl,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),"Navigazione da Tastiera"]}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Migliora la navigazione tramite tastiera con indicatori di focus visibili."})]})]})]})}),n.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:n.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[n.jsx(xa,{className:"w-4 h-4"}),n.jsx("span",{children:"Ripristina impostazioni predefinite"})]})}),n.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Queste impostazioni vengono salvate automaticamente e si applicano a tutte le pagine dell'applicazione."})})]})]})})})})},Om=({className:e=""})=>{const[t,r]=es.useState(!1),s=()=>{r(!0)},a=()=>{r(!1)};return n.jsxs(n.Fragment,{children:[n.jsx(ie.button,{onClick:s,className:e||"floating-button",whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":"Apri impostazioni accessibilità",children:n.jsx(ma,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"})}),n.jsx(_m,{isOpen:t,onClose:a})]})},Bm={enabled:!1,mealReminders:!0,waterReminders:!0,exerciseReminders:!1,mealTimes:{breakfast:"08:00",lunch:"13:00",dinner:"20:00",snacks:["10:30","16:00"]},waterInterval:120},Ss=()=>{const[e,t]=N.useState(()=>{const g=localStorage.getItem("notification-settings");return g?JSON.parse(g):Bm}),[r,s]=N.useState("default"),[a,o]=N.useState(!1);N.useEffect(()=>{o("Notification"in window&&"serviceWorker"in navigator),"Notification"in window&&s(Notification.permission)},[]),N.useEffect(()=>{localStorage.setItem("notification-settings",JSON.stringify(e)),e.enabled&&r==="granted"&&d()},[e,r]);const i=async()=>{if(!a)return"not-supported";try{const g=await Notification.requestPermission();return s(g),g}catch{return"error"}},l=g=>{t(k=>({...k,...g}))},d=()=>{!e.enabled||r!=="granted"||(p(),e.mealReminders&&c(),e.waterReminders&&f(),e.exerciseReminders&&u())},c=()=>{const{breakfast:g,lunch:k,dinner:P,snacks:A}=e.mealTimes;[{time:g,name:"Colazione"},{time:k,name:"Pranzo"},{time:P,name:"Cena"},...A.map((D,C)=>({time:D,name:`Spuntino ${C+1}`}))].forEach(D=>{const[C,V]=D.time.split(":").map(Number),_=new Date,F=new Date;F.setHours(C,V,0,0),F<=_&&F.setDate(F.getDate()+1);const z=F.getTime()-_.getTime();setTimeout(()=>{x(`Promemoria: ${D.name}`,"È ora di registrare il tuo pasto!","/pwa-192x192.png")},z)})},f=()=>{const g=e.waterInterval*60*1e3,k=setInterval(()=>{x("Promemoria Idratazione","Ricordati di bere acqua! 💧","/pwa-192x192.png")},g);window.waterReminderInterval=k},u=()=>{const g=new Date,k=new Date;k.setHours(18,0,0,0),k<=g&&k.setDate(k.getDate()+1);const P=k.getTime()-g.getTime();setTimeout(()=>{x("Promemoria Esercizio","È ora di fare un po' di movimento! 🏃‍♂️","/pwa-192x192.png")},P)},p=()=>{const g=window;g.waterReminderInterval&&clearInterval(g.waterReminderInterval)},x=(g,k,P)=>{if(r!=="granted")return;const A=new Notification(g,{body:k,icon:P||"/pwa-192x192.png",badge:"/pwa-192x192.png",vibrate:[200,100,200],tag:"diet-reminder",requireInteraction:!1});setTimeout(()=>{A.close()},5e3),A.onclick=()=>{window.focus(),A.close()}};return{settings:e,permission:r,isSupported:a,requestPermission:i,updateSettings:l,scheduleNotifications:d,testNotification:()=>{x("Test Notifica","Le notifiche funzionano correttamente! 🎉")},showNotification:x}},zm=({isOpen:e,onClose:t})=>{const{settings:r,requestPermission:s,permission:a,isSupported:o,updateSettings:i}=Ss(),[l,d]=N.useState(r||c),c={enabled:!1,mealReminders:!0,waterReminders:!0,exerciseReminders:!1,mealTimes:{breakfast:"08:00",lunch:"13:00",dinner:"20:00",snacks:["10:30","16:00"]},waterInterval:120},[f,u]=N.useState("settings");N.useEffect(()=>{r&&d(r)},[r]);const p=()=>{i(l),q.success("Impostazioni notifiche salvate"),t()},x=async()=>{l.enabled?(d({...l,enabled:!1}),q.success("Notifiche disabilitate")):await s()==="granted"?(d({...l,enabled:!0}),q.success("Notifiche abilitate")):q.error("Permesso notifiche negato")},v=g=>{g.key==="Escape"&&t()};return o?n.jsx(bt,{children:e&&n.jsxs(n.Fragment,{children:[n.jsx(ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",onClick:t}),n.jsxs(ie.div,{initial:{opacity:0,y:300},animate:{opacity:1,y:0},exit:{opacity:0,y:300},transition:{type:"spring",damping:25},className:"fixed bottom-0 inset-x-0 max-h-[80vh] overflow-y-auto bg-white dark:bg-gray-800 rounded-t-xl shadow-xl z-50",role:"dialog","aria-modal":"true","aria-labelledby":"notification-title",onKeyDown:v,children:[n.jsxs("div",{className:"sticky top-0 flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 z-10",children:[n.jsxs("h2",{id:"notification-title",className:"text-xl font-semibold flex items-center gap-2",children:[n.jsx(Fr,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"}),"Centro Notifiche"]}),n.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"Chiudi centro notifiche",children:n.jsx(gt,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[n.jsx("button",{onClick:()=>u("settings"),className:`flex-1 py-3 px-4 text-center font-medium ${f==="settings"?"text-primary-600 border-b-2 border-primary-600":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(sc,{className:"w-4 h-4"}),"Impostazioni"]})}),n.jsx("button",{onClick:()=>u("schedule"),className:`flex-1 py-3 px-4 text-center font-medium ${f==="schedule"?"text-primary-600 border-b-2 border-primary-600":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(Ul,{className:"w-4 h-4"}),"Programmazione"]})})]}),n.jsxs("div",{className:"p-4",children:[f==="settings"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[l.enabled?n.jsx(Fr,{className:"w-6 h-6 text-primary-600 dark:text-primary-400"}):n.jsx(Vr,{className:"w-6 h-6 text-gray-400"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium",children:"Notifiche Push"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:l.enabled?"Abilitate":"Disabilitate"})]})]}),n.jsx("button",{onClick:x,className:`
                        relative inline-flex h-6 w-11 items-center rounded-full
                        ${l.enabled?"bg-primary-600":"bg-gray-200 dark:bg-gray-700"}
                        transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2
                      `,children:n.jsx("span",{className:`
                          inline-block h-4 w-4 transform rounded-full bg-white
                          transition-transform duration-200
                          ${l.enabled?"translate-x-6":"translate-x-1"}
                        `})})]}),n.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[n.jsx("h3",{className:"font-medium mb-3",children:"Tipi di Promemoria"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ts,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),n.jsx("span",{children:"Promemoria pasti"})]}),n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",className:"sr-only peer",checked:l.mealReminders,onChange:()=>d({...l,mealReminders:!l.mealReminders}),disabled:!l.enabled}),n.jsx("div",{className:`
                              w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary-500
                              rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full
                              peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px]
                              after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5
                              after:transition-all dark:border-gray-600 peer-checked:bg-primary-600
                              ${l.enabled?"":"opacity-50"}
                            `})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Hl,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),n.jsx("span",{children:"Promemoria acqua"})]}),n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",className:"sr-only peer",checked:l.waterReminders,onChange:()=>d({...l,waterReminders:!l.waterReminders}),disabled:!l.enabled}),n.jsx("div",{className:`
                              w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary-500
                              rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full
                              peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px]
                              after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5
                              after:transition-all dark:border-gray-600 peer-checked:bg-primary-600
                              ${l.enabled?"":"opacity-50"}
                            `})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Kl,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),n.jsx("span",{children:"Promemoria esercizio"})]}),n.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",className:"sr-only peer",checked:l.exerciseReminders,onChange:()=>d({...l,exerciseReminders:!l.exerciseReminders}),disabled:!l.enabled}),n.jsx("div",{className:`
                              w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary-500
                              rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full
                              peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px]
                              after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5
                              after:transition-all dark:border-gray-600 peer-checked:bg-primary-600
                              ${l.enabled?"":"opacity-50"}
                            `})]})]})]})]})]}),f==="schedule"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-4",children:[n.jsx("h3",{className:"font-medium mb-3",children:"Orari Pasti"}),n.jsx("div",{className:"grid grid-cols-1 gap-4",children:["Colazione","Pranzo","Cena","Spuntino"].map(g=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{children:g}),n.jsx("input",{type:"time",className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:l.mealTimes[g.toLowerCase()]||"",onChange:k=>d({...l,mealTimes:{...l.mealTimes,[g.toLowerCase()]:k.target.value}}),disabled:!l.enabled||!l.mealReminders})]},g))})]}),n.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-4",children:[n.jsx("h3",{className:"font-medium mb-3",children:"Intervallo Promemoria Acqua"}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("input",{type:"range",min:"30",max:"240",step:"30",value:l.waterInterval,onChange:g=>d({...l,waterInterval:parseInt(g.target.value)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700",disabled:!l.enabled||!l.waterReminders}),n.jsxs("span",{className:"w-20 text-center",children:[l.waterInterval," min"]})]})]}),n.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-4",children:[n.jsx("h3",{className:"font-medium mb-3",children:"Orario Esercizio"}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Promemoria giornaliero"}),n.jsx("input",{type:"time",className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:l.exerciseTime,onChange:g=>d({...l,exerciseTime:g.target.value}),disabled:!l.enabled||!l.exerciseReminders})]})]}),n.jsxs("div",{className:"pt-2",children:[n.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:["Stato permesso: ",a==="granted"?"Concesso":a==="denied"?"Negato":"Non richiesto"]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[n.jsx("button",{onClick:p,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",disabled:!o,children:"Salva impostazioni"}),n.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Annulla"})]})]})]})]})]})]})}):n.jsx(bt,{children:e&&n.jsxs(n.Fragment,{children:[n.jsx(ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",onClick:t}),n.jsx(ie.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"fixed bottom-0 inset-x-0 p-6 bg-white dark:bg-gray-800 rounded-t-xl shadow-xl z-50",children:n.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[n.jsx(Vr,{className:"w-12 h-12 text-gray-400"}),n.jsx("h2",{className:"text-xl font-semibold",children:"Notifiche non supportate"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Il tuo browser non supporta le notifiche push. Prova ad utilizzare un browser più recente o installa l'app."}),n.jsx("button",{onClick:t,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"Chiudi"})]})})]})})},$m=({className:e=""})=>{const[t,r]=N.useState(!1),{notificationSettings:s}=Ss(),a=()=>{r(!0)},o=()=>{r(!1)};return n.jsxs(n.Fragment,{children:[n.jsxs(ie.button,{onClick:a,className:`
          flex items-center gap-2 px-3 py-2 rounded-lg
          bg-gray-100 dark:bg-gray-800
          hover:bg-gray-200 dark:hover:bg-gray-700
          transition-colors duration-200
          focus:outline-none focus:ring-2 focus:ring-primary-500
          ${e}
        `,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":"Apri centro notifiche",children:[s.enabled?n.jsx(Fr,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"}):n.jsx(Vr,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),n.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Notifiche"})]}),n.jsx(zm,{isOpen:t,onClose:o})]})},Um=[{id:"first-login",title:"Primo Accesso",description:"Benvenuto in Diet Bilanciamo!",icon:"🎉",points:10,unlocked:!1,category:"social"},{id:"first-calculation",title:"Primo Calcolo",description:"Hai completato il tuo primo calcolo nutrizionale",icon:"🧮",points:25,unlocked:!1,category:"nutrition"},{id:"streak-3",title:"Costanza Iniziale",description:"Registra i tuoi pasti per 3 giorni consecutivi",icon:"🔥",points:50,unlocked:!1,category:"consistency"},{id:"streak-7",title:"Una Settimana",description:"Registra i tuoi pasti per 7 giorni consecutivi",icon:"⭐",points:100,unlocked:!1,category:"consistency"},{id:"streak-30",title:"Un Mese Perfetto",description:"Registra i tuoi pasti per 30 giorni consecutivi",icon:"🏆",points:500,unlocked:!1,category:"consistency"},{id:"calorie-goal-10",title:"Obiettivo Calorico",description:"Raggiungi il tuo obiettivo calorico per 10 giorni",icon:"🎯",points:150,unlocked:!1,category:"goals"},{id:"protein-master",title:"Maestro delle Proteine",description:"Raggiungi il tuo obiettivo proteico per 15 giorni",icon:"💪",points:200,unlocked:!1,category:"goals"},{id:"water-warrior",title:"Guerriero dell'Idratazione",description:"Bevi abbastanza acqua per 20 giorni",icon:"💧",points:175,unlocked:!1,category:"goals"},{id:"food-explorer",title:"Esploratore del Cibo",description:"Aggiungi 50 alimenti diversi al database",icon:"🍎",points:300,unlocked:!1,category:"nutrition"},{id:"level-5",title:"Livello 5",description:"Raggiungi il livello 5",icon:"🌟",points:0,unlocked:!1,category:"social"}],Rr={totalPoints:0,level:1,currentStreak:0,longestStreak:0,totalDaysLogged:0,calorieGoalsHit:0,proteinGoalsHit:0,waterGoalsHit:0,exerciseDays:0,achievements:Um,lastLoginDate:""},Cs=()=>{const[e,t]=N.useState(()=>{const S=localStorage.getItem("gamification-stats");return S?{...Rr,...JSON.parse(S)}:Rr});N.useEffect(()=>{localStorage.setItem("gamification-stats",JSON.stringify(e))},[e]),N.useEffect(()=>{r()},[]);const r=()=>{const S=new Date().toDateString(),D=e.lastLoginDate;D!==S&&(o({lastLoginDate:S}),D||c("first-login"),s(D))},s=S=>{const D=new Date,C=new Date(D);if(C.setDate(C.getDate()-1),S===C.toDateString()){const V=e.currentStreak+1;o({currentStreak:V,longestStreak:Math.max(e.longestStreak,V)}),a(V)}else S!==D.toDateString()&&o({currentStreak:1})},a=S=>{S===3&&c("streak-3"),S===7&&c("streak-7"),S===30&&c("streak-30")},o=S=>{t(D=>{const C={...D,...S},V=i(C.totalPoints);return V>D.level&&(C.level=V,q.success(`🎉 Livello ${V} raggiunto!`),V===5&&c("level-5")),C})},i=S=>Math.floor(Math.sqrt(S/100))+1,l=()=>{const S=e.level+1;return Math.pow(S-1,2)*100-e.totalPoints},d=(S,D)=>{o({totalPoints:e.totalPoints+S}),q.success(`+${S} punti: ${D}`)},c=S=>{const D=e.achievements.find(V=>V.id===S);if(!D||D.unlocked)return;const C=e.achievements.map(V=>V.id===S?{...V,unlocked:!0,unlockedAt:new Date}:V);o({achievements:C,totalPoints:e.totalPoints+D.points}),q.success(`🏆 Achievement sbloccato: ${D.title}!`,{duration:4e3})};return{stats:e,addPoints:d,unlockAchievement:c,logMeal:()=>{d(5,"Pasto registrato"),o({totalDaysLogged:e.totalDaysLogged+1})},completeCalculation:()=>{d(10,"Calcolo completato"),e.achievements.find(S=>S.id==="first-calculation"&&!S.unlocked)&&c("first-calculation")},hitCalorieGoal:()=>{d(15,"Obiettivo calorico raggiunto");const S=e.calorieGoalsHit+1;o({calorieGoalsHit:S}),S===10&&c("calorie-goal-10")},hitProteinGoal:()=>{d(20,"Obiettivo proteico raggiunto");const S=e.proteinGoalsHit+1;o({proteinGoalsHit:S}),S===15&&c("protein-master")},hitWaterGoal:()=>{d(10,"Obiettivo idratazione raggiunto");const S=e.waterGoalsHit+1;o({waterGoalsHit:S}),S===20&&c("water-warrior")},addFood:()=>{d(3,"Nuovo alimento aggiunto"),Math.floor(e.totalPoints/3)>=50&&c("food-explorer")},getUnlockedAchievements:()=>e.achievements.filter(S=>S.unlocked),getLockedAchievements:()=>e.achievements.filter(S=>!S.unlocked),getPointsForNextLevel:l,resetStats:()=>{t(Rr),q.success("Statistiche resettate")},checkDailyLogin:r}},na={trophy:Or,star:nc,medal:Jl,crown:Gl,target:Gt,default:_l},aa=({achievement:e})=>{const t=na[e.icon]||na.default;return n.jsx(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:`
        p-4 rounded-xl shadow-sm border transition-all duration-200 hover:shadow-md
        ${e.unlocked?"bg-gradient-to-br from-emerald-50 to-teal-50 border-emerald-200 dark:from-emerald-900/20 dark:to-teal-900/20 dark:border-emerald-700/50":"bg-gray-50/80 border-gray-200 dark:bg-gray-800/50 dark:border-gray-700"}
      `,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:`
            p-3 rounded-full transition-colors duration-200
            ${e.unlocked?"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-gray-200 text-gray-500 dark:bg-gray-700 dark:text-gray-400"}
          `,children:n.jsx(t,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"font-medium",children:e.title}),n.jsxs("span",{className:`
                text-xs font-bold px-3 py-1 rounded-full transition-colors duration-200
                ${e.unlocked?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-300":"bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}
              `,children:["+",e.points," pts"]})]}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:e.description}),e.progress!==void 0&&e.maxProgress!==void 0&&n.jsxs("div",{className:"mt-2",children:[n.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 mb-1",children:[n.jsx("span",{children:"Progresso"}),n.jsxs("span",{children:[e.progress,"/",e.maxProgress]})]}),n.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden",children:n.jsx(ie.div,{className:`h-2 rounded-full ${e.unlocked?"bg-gradient-to-r from-emerald-500 to-teal-500":"bg-gradient-to-r from-blue-500 to-purple-500"}`,initial:{width:0},animate:{width:`${Math.min(100,e.progress/e.maxProgress*100)}%`},transition:{duration:.8,ease:"easeOut"}})})]})]})]})})},Gm=({isOpen:e,onClose:t})=>{const{stats:r,getUnlockedAchievements:s,getLockedAchievements:a,getPointsForNextLevel:o}=Cs(),[i,l]=N.useState("unlocked"),d=s(),c=a(),f=r.level,u=o(),p=Math.min(100,u>0?r.totalPoints%100/100*100:100),x=v=>{v.key==="Escape"&&t()};return n.jsx(bt,{children:e&&n.jsxs(n.Fragment,{children:[n.jsx(ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",onClick:t}),n.jsxs(ie.div,{initial:{opacity:0,y:300},animate:{opacity:1,y:0},exit:{opacity:0,y:300},transition:{type:"spring",damping:30,stiffness:300},className:"fixed bottom-0 inset-x-0 max-h-[85vh] overflow-y-auto bg-white/95 dark:bg-gray-900/95 backdrop-blur-lg rounded-t-2xl shadow-2xl border-t border-gray-200 dark:border-gray-700 z-50",role:"dialog","aria-modal":"true","aria-labelledby":"gamification-title",onKeyDown:x,children:[n.jsxs("div",{className:"sticky top-0 flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 z-10",children:[n.jsxs("h2",{id:"gamification-title",className:"text-xl font-semibold flex items-center gap-2",children:[n.jsx(Or,{className:"w-5 h-5 text-amber-500"}),"I tuoi Progressi"]}),n.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"Chiudi pannello progressi",children:n.jsx(gt,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-lg p-4 mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/30 rounded-full",children:n.jsx(ss,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"font-medium",children:["Livello ",f]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.totalPoints," punti totali"]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Prossimo livello"}),n.jsxs("div",{className:"text-lg font-bold text-amber-600 dark:text-amber-400 flex items-center gap-1",children:[n.jsx(ha,{className:"w-4 h-4"}),f+1]})]})]}),n.jsxs("div",{className:"mt-2",children:[n.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600 dark:text-gray-400 mb-1",children:[n.jsxs("span",{children:["Livello ",f]}),n.jsxs("span",{children:["Livello ",f+1]})]}),n.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:n.jsx("div",{className:"h-2.5 rounded-full bg-gradient-to-r from-amber-500 to-orange-500",style:{width:`${p}%`}})})]}),n.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-2 text-center",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-2 shadow-sm",children:[n.jsx("div",{className:"text-lg font-bold text-gray-800 dark:text-white",children:r.currentStreak}),n.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Giorni streak"})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-2 shadow-sm",children:[n.jsx("div",{className:"text-lg font-bold text-gray-800 dark:text-white",children:r.totalDaysLogged}),n.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Giorni registrati"})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-2 shadow-sm",children:[n.jsx("div",{className:"text-lg font-bold text-gray-800 dark:text-white",children:d.length}),n.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Achievement"})]})]})]}),n.jsx("div",{className:"mb-4",children:n.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[n.jsxs("button",{onClick:()=>l("unlocked"),className:`flex-1 py-3 px-4 text-center font-medium ${i==="unlocked"?"text-primary-600 border-b-2 border-primary-600":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:["Sbloccati (",d.length,")"]}),n.jsxs("button",{onClick:()=>l("locked"),className:`flex-1 py-3 px-4 text-center font-medium ${i==="locked"?"text-primary-600 border-b-2 border-primary-600":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:["Da sbloccare (",c.length,")"]})]})}),n.jsxs("div",{className:"space-y-3",children:[i==="unlocked"&&d.length===0&&n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"mx-auto w-16 h-16 mb-4 flex items-center justify-center rounded-full bg-gray-100 dark:bg-gray-700",children:n.jsx(Or,{className:"w-8 h-8 text-gray-400"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:"Nessun achievement sbloccato"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Continua a usare l'app per sbloccare achievement e guadagnare punti!"})]}),i==="unlocked"&&d.map(v=>n.jsx(aa,{achievement:v},v.id)),i==="locked"&&c.map(v=>n.jsx(aa,{achievement:v},v.id))]})]})]})]})})},Wm=({className:e=""})=>{const{stats:t}=Cs(),[r,s]=N.useState(!1),a=t.level,o=()=>{s(!0)},i=()=>{s(!1)};return n.jsxs(n.Fragment,{children:[n.jsxs(ie.button,{onClick:o,className:`
          flex items-center gap-2 px-3 py-2 rounded-lg
          bg-gradient-to-r from-amber-50 to-orange-50
          dark:from-amber-900/20 dark:to-orange-900/20
          hover:from-amber-100 hover:to-orange-100
          dark:hover:from-amber-900/30 dark:hover:to-orange-900/30
          border border-amber-200 dark:border-amber-800/50
          transition-colors duration-200
          focus:outline-none focus:ring-2 focus:ring-amber-500
          ${e}
        `,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":"Mostra progressi e achievement",children:[n.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-amber-200 dark:bg-amber-900/50",children:n.jsx("span",{className:"text-xs font-bold text-amber-800 dark:text-amber-300",children:a})}),n.jsxs("span",{className:"text-sm font-medium text-amber-800 dark:text-amber-300",children:[t.totalPoints," pts"]})]}),n.jsx(Gm,{isOpen:r,onClose:i})]})};function Ft(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ui={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(r){e.exports=r()})(function(){return function r(s,a,o){function i(c,f){if(!a[c]){if(!s[c]){var u=typeof Ft=="function"&&Ft;if(!f&&u)return u(c,!0);if(l)return l(c,!0);var p=new Error("Cannot find module '"+c+"'");throw p.code="MODULE_NOT_FOUND",p}var x=a[c]={exports:{}};s[c][0].call(x.exports,function(v){var g=s[c][1][v];return i(g||v)},x,x.exports,r,s,a,o)}return a[c].exports}for(var l=typeof Ft=="function"&&Ft,d=0;d<o.length;d++)i(o[d]);return i}({1:[function(r,s,a){(function(o){var i=o.MutationObserver||o.WebKitMutationObserver,l;if(i){var d=0,c=new i(v),f=o.document.createTextNode("");c.observe(f,{characterData:!0}),l=function(){f.data=d=++d%2}}else if(!o.setImmediate&&typeof o.MessageChannel<"u"){var u=new o.MessageChannel;u.port1.onmessage=v,l=function(){u.port2.postMessage(0)}}else"document"in o&&"onreadystatechange"in o.document.createElement("script")?l=function(){var k=o.document.createElement("script");k.onreadystatechange=function(){v(),k.onreadystatechange=null,k.parentNode.removeChild(k),k=null},o.document.documentElement.appendChild(k)}:l=function(){setTimeout(v,0)};var p,x=[];function v(){p=!0;for(var k,P,A=x.length;A;){for(P=x,x=[],k=-1;++k<A;)P[k]();A=x.length}p=!1}s.exports=g;function g(k){x.push(k)===1&&!p&&l()}}).call(this,typeof Et<"u"?Et:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(r,s,a){var o=r(1);function i(){}var l={},d=["REJECTED"],c=["FULFILLED"],f=["PENDING"];s.exports=u;function u(C){if(typeof C!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,C!==i&&g(this,C)}u.prototype.catch=function(C){return this.then(null,C)},u.prototype.then=function(C,V){if(typeof C!="function"&&this.state===c||typeof V!="function"&&this.state===d)return this;var _=new this.constructor(i);if(this.state!==f){var F=this.state===c?C:V;x(_,F,this.outcome)}else this.queue.push(new p(_,C,V));return _};function p(C,V,_){this.promise=C,typeof V=="function"&&(this.onFulfilled=V,this.callFulfilled=this.otherCallFulfilled),typeof _=="function"&&(this.onRejected=_,this.callRejected=this.otherCallRejected)}p.prototype.callFulfilled=function(C){l.resolve(this.promise,C)},p.prototype.otherCallFulfilled=function(C){x(this.promise,this.onFulfilled,C)},p.prototype.callRejected=function(C){l.reject(this.promise,C)},p.prototype.otherCallRejected=function(C){x(this.promise,this.onRejected,C)};function x(C,V,_){o(function(){var F;try{F=V(_)}catch(z){return l.reject(C,z)}F===C?l.reject(C,new TypeError("Cannot resolve promise with itself")):l.resolve(C,F)})}l.resolve=function(C,V){var _=k(v,V);if(_.status==="error")return l.reject(C,_.value);var F=_.value;if(F)g(C,F);else{C.state=c,C.outcome=V;for(var z=-1,L=C.queue.length;++z<L;)C.queue[z].callFulfilled(V)}return C},l.reject=function(C,V){C.state=d,C.outcome=V;for(var _=-1,F=C.queue.length;++_<F;)C.queue[_].callRejected(V);return C};function v(C){var V=C&&C.then;if(C&&(typeof C=="object"||typeof C=="function")&&typeof V=="function")return function(){V.apply(C,arguments)}}function g(C,V){var _=!1;function F($){_||(_=!0,l.reject(C,$))}function z($){_||(_=!0,l.resolve(C,$))}function L(){V(z,F)}var B=k(L);B.status==="error"&&F(B.value)}function k(C,V){var _={};try{_.value=C(V),_.status="success"}catch(F){_.status="error",_.value=F}return _}u.resolve=P;function P(C){return C instanceof this?C:l.resolve(new this(i),C)}u.reject=A;function A(C){var V=new this(i);return l.reject(V,C)}u.all=S;function S(C){var V=this;if(Object.prototype.toString.call(C)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=C.length,F=!1;if(!_)return this.resolve([]);for(var z=new Array(_),L=0,B=-1,$=new this(i);++B<_;)H(C[B],B);return $;function H(X,oe){V.resolve(X).then(Q,function(le){F||(F=!0,l.reject($,le))});function Q(le){z[oe]=le,++L===_&&!F&&(F=!0,l.resolve($,z))}}}u.race=D;function D(C){var V=this;if(Object.prototype.toString.call(C)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=C.length,F=!1;if(!_)return this.resolve([]);for(var z=-1,L=new this(i);++z<_;)B(C[z]);return L;function B($){V.resolve($).then(function(H){F||(F=!0,l.resolve(L,H))},function(H){F||(F=!0,l.reject(L,H))})}}},{1:1}],3:[function(r,s,a){(function(o){typeof o.Promise!="function"&&(o.Promise=r(2))}).call(this,typeof Et<"u"?Et:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(r,s,a){var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m};function i(m,y){if(!(m instanceof y))throw new TypeError("Cannot call a class as a function")}function l(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var d=l();function c(){try{if(!d||!d.open)return!1;var m=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),y=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!m||y)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function f(m,y){m=m||[],y=y||{};try{return new Blob(m,y)}catch(b){if(b.name!=="TypeError")throw b;for(var h=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,w=new h,j=0;j<m.length;j+=1)w.append(m[j]);return w.getBlob(y.type)}}typeof Promise>"u"&&r(3);var u=Promise;function p(m,y){y&&m.then(function(h){y(null,h)},function(h){y(h)})}function x(m,y,h){typeof y=="function"&&m.then(y),typeof h=="function"&&m.catch(h)}function v(m){return typeof m!="string"&&(console.warn(m+" used as a key, but it is not a string."),m=String(m)),m}function g(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var k="local-forage-detect-blob-support",P=void 0,A={},S=Object.prototype.toString,D="readonly",C="readwrite";function V(m){for(var y=m.length,h=new ArrayBuffer(y),w=new Uint8Array(h),j=0;j<y;j++)w[j]=m.charCodeAt(j);return h}function _(m){return new u(function(y){var h=m.transaction(k,C),w=f([""]);h.objectStore(k).put(w,"key"),h.onabort=function(j){j.preventDefault(),j.stopPropagation(),y(!1)},h.oncomplete=function(){var j=navigator.userAgent.match(/Chrome\/(\d+)/),b=navigator.userAgent.match(/Edge\//);y(b||!j||parseInt(j[1],10)>=43)}}).catch(function(){return!1})}function F(m){return typeof P=="boolean"?u.resolve(P):_(m).then(function(y){return P=y,P})}function z(m){var y=A[m.name],h={};h.promise=new u(function(w,j){h.resolve=w,h.reject=j}),y.deferredOperations.push(h),y.dbReady?y.dbReady=y.dbReady.then(function(){return h.promise}):y.dbReady=h.promise}function L(m){var y=A[m.name],h=y.deferredOperations.pop();if(h)return h.resolve(),h.promise}function B(m,y){var h=A[m.name],w=h.deferredOperations.pop();if(w)return w.reject(y),w.promise}function $(m,y){return new u(function(h,w){if(A[m.name]=A[m.name]||xe(),m.db)if(y)z(m),m.db.close();else return h(m.db);var j=[m.name];y&&j.push(m.version);var b=d.open.apply(d,j);y&&(b.onupgradeneeded=function(T){var E=b.result;try{E.createObjectStore(m.storeName),T.oldVersion<=1&&E.createObjectStore(k)}catch(M){if(M.name==="ConstraintError")console.warn('The database "'+m.name+'" has been upgraded from version '+T.oldVersion+" to version "+T.newVersion+', but the storage "'+m.storeName+'" already exists.');else throw M}}),b.onerror=function(T){T.preventDefault(),w(b.error)},b.onsuccess=function(){var T=b.result;T.onversionchange=function(E){E.target.close()},h(T),L(m)}})}function H(m){return $(m,!1)}function X(m){return $(m,!0)}function oe(m,y){if(!m.db)return!0;var h=!m.db.objectStoreNames.contains(m.storeName),w=m.version<m.db.version,j=m.version>m.db.version;if(w&&(m.version!==y&&console.warn('The database "'+m.name+`" can't be downgraded from version `+m.db.version+" to version "+m.version+"."),m.version=m.db.version),j||h){if(h){var b=m.db.version+1;b>m.version&&(m.version=b)}return!0}return!1}function Q(m){return new u(function(y,h){var w=new FileReader;w.onerror=h,w.onloadend=function(j){var b=btoa(j.target.result||"");y({__local_forage_encoded_blob:!0,data:b,type:m.type})},w.readAsBinaryString(m)})}function le(m){var y=V(atob(m.data));return f([y],{type:m.type})}function ge(m){return m&&m.__local_forage_encoded_blob}function se(m){var y=this,h=y._initReady().then(function(){var w=A[y._dbInfo.name];if(w&&w.dbReady)return w.dbReady});return x(h,m,m),h}function Ye(m){z(m);for(var y=A[m.name],h=y.forages,w=0;w<h.length;w++){var j=h[w];j._dbInfo.db&&(j._dbInfo.db.close(),j._dbInfo.db=null)}return m.db=null,H(m).then(function(b){return m.db=b,oe(m)?X(m):b}).then(function(b){m.db=y.db=b;for(var T=0;T<h.length;T++)h[T]._dbInfo.db=b}).catch(function(b){throw B(m,b),b})}function K(m,y,h,w){w===void 0&&(w=1);try{var j=m.db.transaction(m.storeName,y);h(null,j)}catch(b){if(w>0&&(!m.db||b.name==="InvalidStateError"||b.name==="NotFoundError"))return u.resolve().then(function(){if(!m.db||b.name==="NotFoundError"&&!m.db.objectStoreNames.contains(m.storeName)&&m.version<=m.db.version)return m.db&&(m.version=m.db.version+1),X(m)}).then(function(){return Ye(m).then(function(){K(m,y,h,w-1)})}).catch(h);h(b)}}function xe(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Ve(m){var y=this,h={db:null};if(m)for(var w in m)h[w]=m[w];var j=A[h.name];j||(j=xe(),A[h.name]=j),j.forages.push(y),y._initReady||(y._initReady=y.ready,y.ready=se);var b=[];function T(){return u.resolve()}for(var E=0;E<j.forages.length;E++){var M=j.forages[E];M!==y&&b.push(M._initReady().catch(T))}var R=j.forages.slice(0);return u.all(b).then(function(){return h.db=j.db,H(h)}).then(function(I){return h.db=I,oe(h,y._defaultConfig.version)?X(h):I}).then(function(I){h.db=j.db=I,y._dbInfo=h;for(var O=0;O<R.length;O++){var W=R[O];W!==y&&(W._dbInfo.db=h.db,W._dbInfo.version=h.version)}})}function Ct(m,y){var h=this;m=v(m);var w=new u(function(j,b){h.ready().then(function(){K(h._dbInfo,D,function(T,E){if(T)return b(T);try{var M=E.objectStore(h._dbInfo.storeName),R=M.get(m);R.onsuccess=function(){var I=R.result;I===void 0&&(I=null),ge(I)&&(I=le(I)),j(I)},R.onerror=function(){b(R.error)}}catch(I){b(I)}})}).catch(b)});return p(w,y),w}function Pt(m,y){var h=this,w=new u(function(j,b){h.ready().then(function(){K(h._dbInfo,D,function(T,E){if(T)return b(T);try{var M=E.objectStore(h._dbInfo.storeName),R=M.openCursor(),I=1;R.onsuccess=function(){var O=R.result;if(O){var W=O.value;ge(W)&&(W=le(W));var Y=m(W,O.key,I++);Y!==void 0?j(Y):O.continue()}else j()},R.onerror=function(){b(R.error)}}catch(O){b(O)}})}).catch(b)});return p(w,y),w}function Fe(m,y,h){var w=this;m=v(m);var j=new u(function(b,T){var E;w.ready().then(function(){return E=w._dbInfo,S.call(y)==="[object Blob]"?F(E.db).then(function(M){return M?y:Q(y)}):y}).then(function(M){K(w._dbInfo,C,function(R,I){if(R)return T(R);try{var O=I.objectStore(w._dbInfo.storeName);M===null&&(M=void 0);var W=O.put(M,m);I.oncomplete=function(){M===void 0&&(M=null),b(M)},I.onabort=I.onerror=function(){var Y=W.error?W.error:W.transaction.error;T(Y)}}catch(Y){T(Y)}})}).catch(T)});return p(j,h),j}function Tt(m,y){var h=this;m=v(m);var w=new u(function(j,b){h.ready().then(function(){K(h._dbInfo,C,function(T,E){if(T)return b(T);try{var M=E.objectStore(h._dbInfo.storeName),R=M.delete(m);E.oncomplete=function(){j()},E.onerror=function(){b(R.error)},E.onabort=function(){var I=R.error?R.error:R.transaction.error;b(I)}}catch(I){b(I)}})}).catch(b)});return p(w,y),w}function dr(m){var y=this,h=new u(function(w,j){y.ready().then(function(){K(y._dbInfo,C,function(b,T){if(b)return j(b);try{var E=T.objectStore(y._dbInfo.storeName),M=E.clear();T.oncomplete=function(){w()},T.onabort=T.onerror=function(){var R=M.error?M.error:M.transaction.error;j(R)}}catch(R){j(R)}})}).catch(j)});return p(h,m),h}function nt(m){var y=this,h=new u(function(w,j){y.ready().then(function(){K(y._dbInfo,D,function(b,T){if(b)return j(b);try{var E=T.objectStore(y._dbInfo.storeName),M=E.count();M.onsuccess=function(){w(M.result)},M.onerror=function(){j(M.error)}}catch(R){j(R)}})}).catch(j)});return p(h,m),h}function Xe(m,y){var h=this,w=new u(function(j,b){if(m<0){j(null);return}h.ready().then(function(){K(h._dbInfo,D,function(T,E){if(T)return b(T);try{var M=E.objectStore(h._dbInfo.storeName),R=!1,I=M.openKeyCursor();I.onsuccess=function(){var O=I.result;if(!O){j(null);return}m===0||R?j(O.key):(R=!0,O.advance(m))},I.onerror=function(){b(I.error)}}catch(O){b(O)}})}).catch(b)});return p(w,y),w}function ve(m){var y=this,h=new u(function(w,j){y.ready().then(function(){K(y._dbInfo,D,function(b,T){if(b)return j(b);try{var E=T.objectStore(y._dbInfo.storeName),M=E.openKeyCursor(),R=[];M.onsuccess=function(){var I=M.result;if(!I){w(R);return}R.push(I.key),I.continue()},M.onerror=function(){j(M.error)}}catch(I){j(I)}})}).catch(j)});return p(h,m),h}function Ps(m,y){y=g.apply(this,arguments);var h=this.config();m=typeof m!="function"&&m||{},m.name||(m.name=m.name||h.name,m.storeName=m.storeName||h.storeName);var w=this,j;if(!m.name)j=u.reject("Invalid arguments");else{var b=m.name===h.name&&w._dbInfo.db,T=b?u.resolve(w._dbInfo.db):H(m).then(function(E){var M=A[m.name],R=M.forages;M.db=E;for(var I=0;I<R.length;I++)R[I]._dbInfo.db=E;return E});m.storeName?j=T.then(function(E){if(E.objectStoreNames.contains(m.storeName)){var M=E.version+1;z(m);var R=A[m.name],I=R.forages;E.close();for(var O=0;O<I.length;O++){var W=I[O];W._dbInfo.db=null,W._dbInfo.version=M}var Y=new u(function(Z,ne){var te=d.open(m.name,M);te.onerror=function(me){var it=te.result;it.close(),ne(me)},te.onupgradeneeded=function(){var me=te.result;me.deleteObjectStore(m.storeName)},te.onsuccess=function(){var me=te.result;me.close(),Z(me)}});return Y.then(function(Z){R.db=Z;for(var ne=0;ne<I.length;ne++){var te=I[ne];te._dbInfo.db=Z,L(te._dbInfo)}}).catch(function(Z){throw(B(m,Z)||u.resolve()).catch(function(){}),Z})}}):j=T.then(function(E){z(m);var M=A[m.name],R=M.forages;E.close();for(var I=0;I<R.length;I++){var O=R[I];O._dbInfo.db=null}var W=new u(function(Y,Z){var ne=d.deleteDatabase(m.name);ne.onerror=function(){var te=ne.result;te&&te.close(),Z(ne.error)},ne.onblocked=function(){console.warn('dropInstance blocked for database "'+m.name+'" until all open connections are closed')},ne.onsuccess=function(){var te=ne.result;te&&te.close(),Y(te)}});return W.then(function(Y){M.db=Y;for(var Z=0;Z<R.length;Z++){var ne=R[Z];L(ne._dbInfo)}}).catch(function(Y){throw(B(m,Y)||u.resolve()).catch(function(){}),Y})})}return p(j,y),j}var Wi={_driver:"asyncStorage",_initStorage:Ve,_support:c(),iterate:Pt,getItem:Ct,setItem:Fe,removeItem:Tt,clear:dr,length:nt,key:Xe,keys:ve,dropInstance:Ps};function Hi(){return typeof openDatabase=="function"}var Ce="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ki="~~local_forage_type~",Ts=/^~~local_forage_type~([^~]+)~/,At="__lfsc__:",ur=At.length,fr="arbf",mr="blob",As="si08",Ds="ui08",Es="uic8",Ms="si16",Rs="si32",Ls="ur16",Is="ui32",Vs="fl32",Fs="fl64",_s=ur+fr.length,Os=Object.prototype.toString;function Bs(m){var y=m.length*.75,h=m.length,w,j=0,b,T,E,M;m[m.length-1]==="="&&(y--,m[m.length-2]==="="&&y--);var R=new ArrayBuffer(y),I=new Uint8Array(R);for(w=0;w<h;w+=4)b=Ce.indexOf(m[w]),T=Ce.indexOf(m[w+1]),E=Ce.indexOf(m[w+2]),M=Ce.indexOf(m[w+3]),I[j++]=b<<2|T>>4,I[j++]=(T&15)<<4|E>>2,I[j++]=(E&3)<<6|M&63;return R}function hr(m){var y=new Uint8Array(m),h="",w;for(w=0;w<y.length;w+=3)h+=Ce[y[w]>>2],h+=Ce[(y[w]&3)<<4|y[w+1]>>4],h+=Ce[(y[w+1]&15)<<2|y[w+2]>>6],h+=Ce[y[w+2]&63];return y.length%3===2?h=h.substring(0,h.length-1)+"=":y.length%3===1&&(h=h.substring(0,h.length-2)+"=="),h}function qi(m,y){var h="";if(m&&(h=Os.call(m)),m&&(h==="[object ArrayBuffer]"||m.buffer&&Os.call(m.buffer)==="[object ArrayBuffer]")){var w,j=At;m instanceof ArrayBuffer?(w=m,j+=fr):(w=m.buffer,h==="[object Int8Array]"?j+=As:h==="[object Uint8Array]"?j+=Ds:h==="[object Uint8ClampedArray]"?j+=Es:h==="[object Int16Array]"?j+=Ms:h==="[object Uint16Array]"?j+=Ls:h==="[object Int32Array]"?j+=Rs:h==="[object Uint32Array]"?j+=Is:h==="[object Float32Array]"?j+=Vs:h==="[object Float64Array]"?j+=Fs:y(new Error("Failed to get type for BinaryArray"))),y(j+hr(w))}else if(h==="[object Blob]"){var b=new FileReader;b.onload=function(){var T=Ki+m.type+"~"+hr(this.result);y(At+mr+T)},b.readAsArrayBuffer(m)}else try{y(JSON.stringify(m))}catch(T){console.error("Couldn't convert value into a JSON string: ",m),y(null,T)}}function Yi(m){if(m.substring(0,ur)!==At)return JSON.parse(m);var y=m.substring(_s),h=m.substring(ur,_s),w;if(h===mr&&Ts.test(y)){var j=y.match(Ts);w=j[1],y=y.substring(j[0].length)}var b=Bs(y);switch(h){case fr:return b;case mr:return f([b],{type:w});case As:return new Int8Array(b);case Ds:return new Uint8Array(b);case Es:return new Uint8ClampedArray(b);case Ms:return new Int16Array(b);case Ls:return new Uint16Array(b);case Rs:return new Int32Array(b);case Is:return new Uint32Array(b);case Vs:return new Float32Array(b);case Fs:return new Float64Array(b);default:throw new Error("Unkown type: "+h)}}var pr={serialize:qi,deserialize:Yi,stringToBuffer:Bs,bufferToString:hr};function zs(m,y,h,w){m.executeSql("CREATE TABLE IF NOT EXISTS "+y.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],h,w)}function Xi(m){var y=this,h={db:null};if(m)for(var w in m)h[w]=typeof m[w]!="string"?m[w].toString():m[w];var j=new u(function(b,T){try{h.db=openDatabase(h.name,String(h.version),h.description,h.size)}catch(E){return T(E)}h.db.transaction(function(E){zs(E,h,function(){y._dbInfo=h,b()},function(M,R){T(R)})},T)});return h.serializer=pr,j}function Pe(m,y,h,w,j,b){m.executeSql(h,w,j,function(T,E){E.code===E.SYNTAX_ERR?T.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[y.storeName],function(M,R){R.rows.length?b(M,E):zs(M,y,function(){M.executeSql(h,w,j,b)},b)},b):b(T,E)},b)}function Zi(m,y){var h=this;m=v(m);var w=new u(function(j,b){h.ready().then(function(){var T=h._dbInfo;T.db.transaction(function(E){Pe(E,T,"SELECT * FROM "+T.storeName+" WHERE key = ? LIMIT 1",[m],function(M,R){var I=R.rows.length?R.rows.item(0).value:null;I&&(I=T.serializer.deserialize(I)),j(I)},function(M,R){b(R)})})}).catch(b)});return p(w,y),w}function Ji(m,y){var h=this,w=new u(function(j,b){h.ready().then(function(){var T=h._dbInfo;T.db.transaction(function(E){Pe(E,T,"SELECT * FROM "+T.storeName,[],function(M,R){for(var I=R.rows,O=I.length,W=0;W<O;W++){var Y=I.item(W),Z=Y.value;if(Z&&(Z=T.serializer.deserialize(Z)),Z=m(Z,Y.key,W+1),Z!==void 0){j(Z);return}}j()},function(M,R){b(R)})})}).catch(b)});return p(w,y),w}function $s(m,y,h,w){var j=this;m=v(m);var b=new u(function(T,E){j.ready().then(function(){y===void 0&&(y=null);var M=y,R=j._dbInfo;R.serializer.serialize(y,function(I,O){O?E(O):R.db.transaction(function(W){Pe(W,R,"INSERT OR REPLACE INTO "+R.storeName+" (key, value) VALUES (?, ?)",[m,I],function(){T(M)},function(Y,Z){E(Z)})},function(W){if(W.code===W.QUOTA_ERR){if(w>0){T($s.apply(j,[m,M,h,w-1]));return}E(W)}})})}).catch(E)});return p(b,h),b}function Qi(m,y,h){return $s.apply(this,[m,y,h,1])}function eo(m,y){var h=this;m=v(m);var w=new u(function(j,b){h.ready().then(function(){var T=h._dbInfo;T.db.transaction(function(E){Pe(E,T,"DELETE FROM "+T.storeName+" WHERE key = ?",[m],function(){j()},function(M,R){b(R)})})}).catch(b)});return p(w,y),w}function to(m){var y=this,h=new u(function(w,j){y.ready().then(function(){var b=y._dbInfo;b.db.transaction(function(T){Pe(T,b,"DELETE FROM "+b.storeName,[],function(){w()},function(E,M){j(M)})})}).catch(j)});return p(h,m),h}function ro(m){var y=this,h=new u(function(w,j){y.ready().then(function(){var b=y._dbInfo;b.db.transaction(function(T){Pe(T,b,"SELECT COUNT(key) as c FROM "+b.storeName,[],function(E,M){var R=M.rows.item(0).c;w(R)},function(E,M){j(M)})})}).catch(j)});return p(h,m),h}function so(m,y){var h=this,w=new u(function(j,b){h.ready().then(function(){var T=h._dbInfo;T.db.transaction(function(E){Pe(E,T,"SELECT key FROM "+T.storeName+" WHERE id = ? LIMIT 1",[m+1],function(M,R){var I=R.rows.length?R.rows.item(0).key:null;j(I)},function(M,R){b(R)})})}).catch(b)});return p(w,y),w}function no(m){var y=this,h=new u(function(w,j){y.ready().then(function(){var b=y._dbInfo;b.db.transaction(function(T){Pe(T,b,"SELECT key FROM "+b.storeName,[],function(E,M){for(var R=[],I=0;I<M.rows.length;I++)R.push(M.rows.item(I).key);w(R)},function(E,M){j(M)})})}).catch(j)});return p(h,m),h}function ao(m){return new u(function(y,h){m.transaction(function(w){w.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(j,b){for(var T=[],E=0;E<b.rows.length;E++)T.push(b.rows.item(E).name);y({db:m,storeNames:T})},function(j,b){h(b)})},function(w){h(w)})})}function io(m,y){y=g.apply(this,arguments);var h=this.config();m=typeof m!="function"&&m||{},m.name||(m.name=m.name||h.name,m.storeName=m.storeName||h.storeName);var w=this,j;return m.name?j=new u(function(b){var T;m.name===h.name?T=w._dbInfo.db:T=openDatabase(m.name,"","",0),m.storeName?b({db:T,storeNames:[m.storeName]}):b(ao(T))}).then(function(b){return new u(function(T,E){b.db.transaction(function(M){function R(Y){return new u(function(Z,ne){M.executeSql("DROP TABLE IF EXISTS "+Y,[],function(){Z()},function(te,me){ne(me)})})}for(var I=[],O=0,W=b.storeNames.length;O<W;O++)I.push(R(b.storeNames[O]));u.all(I).then(function(){T()}).catch(function(Y){E(Y)})},function(M){E(M)})})}):j=u.reject("Invalid arguments"),p(j,y),j}var oo={_driver:"webSQLStorage",_initStorage:Xi,_support:Hi(),iterate:Ji,getItem:Zi,setItem:Qi,removeItem:eo,clear:to,length:ro,key:so,keys:no,dropInstance:io};function lo(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Us(m,y){var h=m.name+"/";return m.storeName!==y.storeName&&(h+=m.storeName+"/"),h}function co(){var m="_localforage_support_test";try{return localStorage.setItem(m,!0),localStorage.removeItem(m),!1}catch{return!0}}function uo(){return!co()||localStorage.length>0}function fo(m){var y=this,h={};if(m)for(var w in m)h[w]=m[w];return h.keyPrefix=Us(m,y._defaultConfig),uo()?(y._dbInfo=h,h.serializer=pr,u.resolve()):u.reject()}function mo(m){var y=this,h=y.ready().then(function(){for(var w=y._dbInfo.keyPrefix,j=localStorage.length-1;j>=0;j--){var b=localStorage.key(j);b.indexOf(w)===0&&localStorage.removeItem(b)}});return p(h,m),h}function ho(m,y){var h=this;m=v(m);var w=h.ready().then(function(){var j=h._dbInfo,b=localStorage.getItem(j.keyPrefix+m);return b&&(b=j.serializer.deserialize(b)),b});return p(w,y),w}function po(m,y){var h=this,w=h.ready().then(function(){for(var j=h._dbInfo,b=j.keyPrefix,T=b.length,E=localStorage.length,M=1,R=0;R<E;R++){var I=localStorage.key(R);if(I.indexOf(b)===0){var O=localStorage.getItem(I);if(O&&(O=j.serializer.deserialize(O)),O=m(O,I.substring(T),M++),O!==void 0)return O}}});return p(w,y),w}function go(m,y){var h=this,w=h.ready().then(function(){var j=h._dbInfo,b;try{b=localStorage.key(m)}catch{b=null}return b&&(b=b.substring(j.keyPrefix.length)),b});return p(w,y),w}function xo(m){var y=this,h=y.ready().then(function(){for(var w=y._dbInfo,j=localStorage.length,b=[],T=0;T<j;T++){var E=localStorage.key(T);E.indexOf(w.keyPrefix)===0&&b.push(E.substring(w.keyPrefix.length))}return b});return p(h,m),h}function yo(m){var y=this,h=y.keys().then(function(w){return w.length});return p(h,m),h}function vo(m,y){var h=this;m=v(m);var w=h.ready().then(function(){var j=h._dbInfo;localStorage.removeItem(j.keyPrefix+m)});return p(w,y),w}function bo(m,y,h){var w=this;m=v(m);var j=w.ready().then(function(){y===void 0&&(y=null);var b=y;return new u(function(T,E){var M=w._dbInfo;M.serializer.serialize(y,function(R,I){if(I)E(I);else try{localStorage.setItem(M.keyPrefix+m,R),T(b)}catch(O){(O.name==="QuotaExceededError"||O.name==="NS_ERROR_DOM_QUOTA_REACHED")&&E(O),E(O)}})})});return p(j,h),j}function wo(m,y){if(y=g.apply(this,arguments),m=typeof m!="function"&&m||{},!m.name){var h=this.config();m.name=m.name||h.name,m.storeName=m.storeName||h.storeName}var w=this,j;return m.name?j=new u(function(b){m.storeName?b(Us(m,w._defaultConfig)):b(m.name+"/")}).then(function(b){for(var T=localStorage.length-1;T>=0;T--){var E=localStorage.key(T);E.indexOf(b)===0&&localStorage.removeItem(E)}}):j=u.reject("Invalid arguments"),p(j,y),j}var jo={_driver:"localStorageWrapper",_initStorage:fo,_support:lo(),iterate:po,getItem:ho,setItem:bo,removeItem:vo,clear:mo,length:yo,key:go,keys:xo,dropInstance:wo},No=function(y,h){return y===h||typeof y=="number"&&typeof h=="number"&&isNaN(y)&&isNaN(h)},ko=function(y,h){for(var w=y.length,j=0;j<w;){if(No(y[j],h))return!0;j++}return!1},Gs=Array.isArray||function(m){return Object.prototype.toString.call(m)==="[object Array]"},at={},Ws={},Ze={INDEXEDDB:Wi,WEBSQL:oo,LOCALSTORAGE:jo},So=[Ze.INDEXEDDB._driver,Ze.WEBSQL._driver,Ze.LOCALSTORAGE._driver],Dt=["dropInstance"],gr=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Dt),Co={description:"",driver:So.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Po(m,y){m[y]=function(){var h=arguments;return m.ready().then(function(){return m[y].apply(m,h)})}}function xr(){for(var m=1;m<arguments.length;m++){var y=arguments[m];if(y)for(var h in y)y.hasOwnProperty(h)&&(Gs(y[h])?arguments[0][h]=y[h].slice():arguments[0][h]=y[h])}return arguments[0]}var To=function(){function m(y){i(this,m);for(var h in Ze)if(Ze.hasOwnProperty(h)){var w=Ze[h],j=w._driver;this[h]=j,at[j]||this.defineDriver(w)}this._defaultConfig=xr({},Co),this._config=xr({},this._defaultConfig,y),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return m.prototype.config=function(h){if((typeof h>"u"?"undefined":o(h))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var w in h){if(w==="storeName"&&(h[w]=h[w].replace(/\W/g,"_")),w==="version"&&typeof h[w]!="number")return new Error("Database version must be a number.");this._config[w]=h[w]}return"driver"in h&&h.driver?this.setDriver(this._config.driver):!0}else return typeof h=="string"?this._config[h]:this._config},m.prototype.defineDriver=function(h,w,j){var b=new u(function(T,E){try{var M=h._driver,R=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!h._driver){E(R);return}for(var I=gr.concat("_initStorage"),O=0,W=I.length;O<W;O++){var Y=I[O],Z=!ko(Dt,Y);if((Z||h[Y])&&typeof h[Y]!="function"){E(R);return}}var ne=function(){for(var it=function(Eo){return function(){var Mo=new Error("Method "+Eo+" is not implemented by the current driver"),Hs=u.reject(Mo);return p(Hs,arguments[arguments.length-1]),Hs}},yr=0,Do=Dt.length;yr<Do;yr++){var vr=Dt[yr];h[vr]||(h[vr]=it(vr))}};ne();var te=function(it){at[M]&&console.info("Redefining LocalForage driver: "+M),at[M]=h,Ws[M]=it,T()};"_support"in h?h._support&&typeof h._support=="function"?h._support().then(te,E):te(!!h._support):te(!0)}catch(me){E(me)}});return x(b,w,j),b},m.prototype.driver=function(){return this._driver||null},m.prototype.getDriver=function(h,w,j){var b=at[h]?u.resolve(at[h]):u.reject(new Error("Driver not found."));return x(b,w,j),b},m.prototype.getSerializer=function(h){var w=u.resolve(pr);return x(w,h),w},m.prototype.ready=function(h){var w=this,j=w._driverSet.then(function(){return w._ready===null&&(w._ready=w._initDriver()),w._ready});return x(j,h,h),j},m.prototype.setDriver=function(h,w,j){var b=this;Gs(h)||(h=[h]);var T=this._getSupportedDrivers(h);function E(){b._config.driver=b.driver()}function M(O){return b._extend(O),E(),b._ready=b._initStorage(b._config),b._ready}function R(O){return function(){var W=0;function Y(){for(;W<O.length;){var Z=O[W];return W++,b._dbInfo=null,b._ready=null,b.getDriver(Z).then(M).catch(Y)}E();var ne=new Error("No available storage method found.");return b._driverSet=u.reject(ne),b._driverSet}return Y()}}var I=this._driverSet!==null?this._driverSet.catch(function(){return u.resolve()}):u.resolve();return this._driverSet=I.then(function(){var O=T[0];return b._dbInfo=null,b._ready=null,b.getDriver(O).then(function(W){b._driver=W._driver,E(),b._wrapLibraryMethodsWithReady(),b._initDriver=R(T)})}).catch(function(){E();var O=new Error("No available storage method found.");return b._driverSet=u.reject(O),b._driverSet}),x(this._driverSet,w,j),this._driverSet},m.prototype.supports=function(h){return!!Ws[h]},m.prototype._extend=function(h){xr(this,h)},m.prototype._getSupportedDrivers=function(h){for(var w=[],j=0,b=h.length;j<b;j++){var T=h[j];this.supports(T)&&w.push(T)}return w},m.prototype._wrapLibraryMethodsWithReady=function(){for(var h=0,w=gr.length;h<w;h++)Po(this,gr[h])},m.prototype.createInstance=function(h){return new m(h)},m}(),Ao=new To;s.exports=Ao},{3:3}]},{},[4])(4)})})(Ui);var Hm=Ui.exports;const $e=Lo(Hm);$e.config({name:"DietBilanciamo",version:1,storeName:"dietData",description:"Storage offline per Diet Bilanciamo"});const Gi=()=>{const[e,t]=N.useState(navigator.onLine),[r,s]=N.useState("idle"),[a,o]=N.useState(null);N.useEffect(()=>{const p=()=>{t(!0),q.success("Connessione ripristinata!"),d()},x=()=>{t(!1),q.error("Modalità offline attivata")};return window.addEventListener("online",p),window.addEventListener("offline",x),c(),()=>{window.removeEventListener("online",p),window.removeEventListener("offline",x)}},[]);const i=async(p,x)=>{try{await $e.setItem(p,{data:x,timestamp:Date.now(),synced:e}),e||q("Dati salvati offline",{icon:"💾"})}catch(v){console.error("Errore nel salvataggio:",v),q.error("Errore nel salvataggio dei dati")}},l=async p=>{try{const x=await $e.getItem(p);return(x==null?void 0:x.data)||null}catch(x){return console.error("Errore nel caricamento:",x),null}},d=async()=>{if(e){s("syncing");try{await new Promise(x=>setTimeout(x,2e3));const p=new Date;o(p),await $e.setItem("lastSync",p.getTime()),s("idle"),q.success("Dati sincronizzati!")}catch{s("error"),q.error("Errore nella sincronizzazione")}}},c=async()=>{try{const p=await $e.getItem("lastSync");p&&o(new Date(p))}catch(p){console.error("Errore nel caricamento ultimo sync:",p)}};return{isOnline:e,syncStatus:r,lastSync:a,saveData:i,loadData:l,syncData:d,clearOfflineData:async()=>{try{await $e.clear(),o(null),q.success("Cache offline pulita")}catch{q.error("Errore nella pulizia della cache")}},getStorageInfo:async()=>{try{const p=await $e.keys(),x=p.length;return{keys:p,size:x}}catch{return{keys:[],size:0}}}}},Km=({className:e=""})=>{const{isOnline:t,syncData:r}=Gi(),[s,a]=N.useState(!1),o=async()=>{if(!t){q.error("Non sei connesso a Internet. Impossibile sincronizzare.");return}a(!0);try{await r(),q.success("Dati sincronizzati con successo!")}catch(i){console.error("Errore durante la sincronizzazione:",i),q.error("Errore durante la sincronizzazione. Riprova più tardi.")}finally{a(!1)}};return n.jsxs(ie.div,{initial:{opacity:0},animate:{opacity:1},className:`flex items-center gap-2 px-3 py-2 rounded-lg ${e} ${t?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400":"bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-400"}`,children:[t?n.jsx(dc,{className:"w-4 h-4"}):n.jsx(cc,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-medium",children:t?"Online":"Offline"}),t&&n.jsx(ie.button,{onClick:o,disabled:s,className:"ml-1 p-1 rounded-full hover:bg-green-100 dark:hover:bg-green-800/30 focus:outline-none focus:ring-2 focus:ring-green-500",whileHover:{scale:1.1},whileTap:{scale:.9},"aria-label":"Sincronizza dati",title:"Sincronizza dati",children:n.jsx(xa,{className:`w-3.5 h-3.5 ${s?"animate-spin":""}`})})]})};function qm(){const[e,t]=N.useState(null);console.log("App.tsx: user state initialized",e);const[r,s]=N.useState(!0),{theme:a}=zi(),{isOnline:o}=Gi(),{checkDailyLogin:i}=Cs(),{settings:l}=$i(),{requestPermission:d}=Ss();N.useEffect(()=>{const u=localStorage.getItem("bilanciamo_user");if(console.log("App.tsx: useEffect - savedUser from localStorage",u),u){const p=JSON.parse(u);console.log("App.tsx: useEffect - parsedUser",p),t(p),i()}s(!1)},[i]),N.useEffect(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(u=>{console.log("SW registered: ",u)}).catch(u=>{console.log("SW registration failed: ",u)})},[]),N.useEffect(()=>{e&&d()},[e,d]);const c=u=>{console.log("App.tsx: handleLogin - userData",u),t(u),localStorage.setItem("bilanciamo_user",JSON.stringify(u))},f=()=>{console.log("App.tsx: handleLogout"),t(null),localStorage.removeItem("bilanciamo_user"),localStorage.removeItem("bilanciamo_calculations"),localStorage.removeItem("bilanciamo_meals")};return r?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-accent-50 flex items-center justify-center",children:n.jsx("div",{className:"animate-pulse-soft",children:n.jsx("div",{className:"w-16 h-16 bg-primary-500 rounded-full"})})}):n.jsxs("div",{className:`
        min-h-screen transition-colors duration-300
        ${a==="dark"?"bg-gradient-to-br from-gray-900 to-gray-800 text-white":"bg-gradient-to-br from-primary-50 to-accent-50 text-gray-900"}
        ${l.highContrast?"high-contrast":""}
        ${l.largeText?"large-text":""}
        ${l.reducedMotion?"reduced-motion":""}
        ${l.screenReaderOptimized?"screen-reader-optimized":""}
        ${l.keyboardFriendly?"keyboard-friendly":""}
        ${o?"":"offline-mode"}
      `,children:[n.jsx(Ml,{position:"top-right",toastOptions:{duration:4e3,style:{background:a==="dark"?"#374151":"#ffffff",color:a==="dark"?"#ffffff":"#111827",border:a==="dark"?"1px solid #4B5563":"1px solid #E5E7EB"},success:{iconTheme:{primary:"#10B981",secondary:"#ffffff"}},error:{iconTheme:{primary:"#EF4444",secondary:"#ffffff"}}}}),n.jsxs("div",{className:"fixed top-4 right-4 z-30 flex flex-col gap-2",children:[n.jsx(Km,{}),e&&n.jsx(Wm,{})]}),n.jsxs("div",{className:"fixed bottom-4 right-4 z-30 flex flex-col gap-2",children:[n.jsx(Fm,{}),n.jsx(Om,{}),e&&n.jsx($m,{})]}),n.jsx(uc,{user:e,onLogout:f}),n.jsxs("main",{className:"container mx-auto px-4 py-8",children:[console.log("App.tsx: rendering Dashboard or Login, user:",e),e?n.jsx(bc,{user:e}):n.jsx(fc,{onLogin:c})]})]})}la(document.getElementById("root")).render(n.jsx(N.StrictMode,{children:n.jsx(qm,{})}));
